{"initialLink":"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector","sanitizedLink":"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector","finalLink":"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector","htmlEmbed":"<script>window.contexterSetup=window.contexterSetup||function(){window.contexterSetupComplete=!0;class ContexterLink extends HTMLAnchorElement{constructor(){super()}connectedCallback(){this.setAttribute(\"target\",\"_blank\")}}customElements.define(\"contexter-link\",ContexterLink,{extends:\"a\"}),customElements.define(\"contexter-inner\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__inner\"}}),customElements.define(\"contexter-thumbnail\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__thumbnail\"}}),customElements.define(\"contexter-byline\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__byline\"}}),customElements.define(\"contexter-keywordset\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__keywordset\"}}),customElements.define(\"contexter-linkset\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__linkset\"}}),customElements.define(\"contexter-meta\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__meta\"}}),customElements.define(\"contexter-summary\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"p-summary entry-summary\"}}),customElements.define(\"contexter-box-head\",class extends HTMLElement{constructor(){super()}connectedCallback(){this.className=\"contexter-box__head\"}}),customElements.define(\"contexter-box-inner\",class extends HTMLElement{constructor(){super()}connectedCallback(){}});class ContexterBox extends HTMLElement{constructor(){super(),this.first=!0,this.shadow=this.attachShadow({mode:\"open\"})}connectedCallback(){if(this.first){this.first=!1;var style=document.createElement(\"style\"),lightDomStyle=(style.innerHTML=`:host {--background: #f5f6f7;--border: darkblue;--blue: #0000ee;--font-color: black;--inner-border: black;font-family: Franklin,Arial,Helvetica,sans-serif;font-size: 14px;background: var(--background);width: 600px;color: var(--font-color);min-height: 90px;display: block;padding: 8px;border: 1px solid var(--border);cursor: pointer;box-sizing: border-box;margin: 6px;contain: content;margin: 6px auto;}// can only select top-level nodes with slotted::slotted(*) {max-width: 100%;display:block;}::slotted([slot=thumbnail]) {max-width: 100%;display:block;}::slotted([slot=header]) {width: 100%;font-size: 1.25rem;font-weight: bold;display:block;margin-bottom: 6px;}::slotted([slot=author]) {max-width: 50%;font-size: 12px;display:inline-block;float: left;}::slotted([slot=time]) {max-width: 50%;font-size: 12px;display:inline-block;float: right;}::slotted([slot=summary]) {width: 100%;margin-top: 6px;padding: 10px 2px;border-top: 1px solid var(--inner-border);font-size: 15px;display:inline-block;margin-bottom: 6px;}contexter-meta {height: auto;margin-bottom: 4px;width: 100%;display: grid;position: relative;min-height: 16px;grid-template-columns: repeat(2, 1fr);}::slotted([slot=keywords]) {width: 80%;padding: 2px 4px;border-top: 1px solid var(--inner-border);font-size: 11px;display: block;float: right;font-style: italic;text-align: right;grid-column: 2/2;grid-row: 1;align-self: end;justify-self: end;}::slotted([slot=keywords]):empty {border-top: 0px solid var(--inner-border);}::slotted([slot=archive-link]) {font-size: 1em;display: inline;}::slotted([slot=archive-link])::after {content: \"|\";display: inline;color: var(--font-color);text-decoration: none;margin: 0 .5em;}::slotted([slot=read-link]) {font-size: 1em;display: inline;}contexter-linkset {width: 80%;padding: 2px 4px;font-size: 13px;float: left;font-weight: bold;grid-row: 1;grid-column: 1/2;align-self: end;justify-self: start;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {:host {width: 310px;}}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){:host {--background: #354150;--border: #1f2b37;--blue: #55b0ff;--font-color: #ffffff;--inner-border: #787a7c;background: var(--background);border: 1px solid var(--border)}}`,document.createElement(\"style\"));lightDomStyle.innerHTML=`contexter-box {contain: content;}contexter-box .read-link {font-weight: bold;}contexter-box a {color: #0000ee;}contexter-box img {width: 100%;border: 0;padding: 0;margin: 0;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {...}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){contexter-box a {color: #55b0ff;}}`,this.appendChild(lightDomStyle),this.shadow.appendChild(style);const innerContainer=document.createElement(\"contexter-box-inner\"),innerSlotThumbnail=(this.shadow.appendChild(innerContainer),document.createElement(\"slot\")),innerSlotHeader=(innerSlotThumbnail.name=\"thumbnail\",innerContainer.appendChild(innerSlotThumbnail),document.createElement(\"slot\")),innerSlotAuthor=(innerSlotHeader.name=\"header\",innerContainer.appendChild(innerSlotHeader),document.createElement(\"slot\")),innerSlotTime=(innerSlotAuthor.name=\"author\",innerContainer.appendChild(innerSlotAuthor),document.createElement(\"slot\")),innerSlotSummary=(innerSlotTime.name=\"time\",innerContainer.appendChild(innerSlotTime),document.createElement(\"slot\")),metaContainer=(innerSlotSummary.name=\"summary\",innerContainer.appendChild(innerSlotSummary),document.createElement(\"contexter-meta\")),innerSlotInfo=(innerContainer.appendChild(metaContainer),document.createElement(\"slot\")),linkContainer=(innerSlotInfo.name=\"keywords\",metaContainer.appendChild(innerSlotInfo),document.createElement(\"contexter-linkset\")),innerSlotArchiveLink=(metaContainer.appendChild(linkContainer),document.createElement(\"slot\")),innerSlotReadLink=(innerSlotArchiveLink.name=\"archive-link\",linkContainer.appendChild(innerSlotArchiveLink),document.createElement(\"slot\"));innerSlotReadLink.name=\"read-link\",linkContainer.appendChild(innerSlotReadLink),this.className=\"contexter-box\",this.onclick=e=>{if(!e.target.className.includes(\"read-link\")&&!e.target.className.includes(\"title-link\")){const mainLinks=this.querySelectorAll(\"a.main-link\");mainLinks[0].click()}}}}}customElements.define(\"contexter-box\",ContexterBox)},window.contexterSetupComplete||window.contexterSetup();</script><contexter-box class=\"link-card h-entry hentry\" itemscope=\"\" itemtype=\"https://schema.org/CreativeWork\"><contexter-thumbnail class=\"thumbnail\" slot=\"thumbnail\"></contexter-thumbnail><contexter-box-head slot=\"header\" class=\"p-name entry-title\" itemprop=\"headline\"><contexter-box-head slot=\"header\" class=\"p-name entry-title\" itemprop=\"headline\"><a is=\"contexter-link\" href=\"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector\" itemprop=\"url\">How We Built a Real-time Privacy Inspector – The Markup</a></contexter-box-head></contexter-box-head><contexter-byline class=\"p-author author\" slot=\"author\"><span class=\"p-name byline\" rel=\"author\" itemprop=\"author\">@themarkup</span></contexter-byline><time class=\"dt-published published\" slot=\"time\" itemprop=\"datePublished\" datetime=\"2022-04-05T17:38:43.109Z\">3/5/2022</time><contexter-summary class=\"p-summary entry-summary\" itemprop=\"abstract\" slot=\"summary\"><p>Blacklight catalogs the many ways any website tracks visitors: from cookies to capturing every user keystroke and mouse movement</p></contexter-summary><contexter-keywordset itemprop=\"keywords\" slot=\"keywords\"><span rel=\"category tag\" class=\"p-category\" itemprop=\"keywords\">Blacklight</span></contexter-keywordset><a is=\"contexter-link\" href=\"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector\" class=\"read-link main-link\" itemprop=\"sameAs\" slot=\"read-link\">Read</a></contexter-box>","linkId":"2c602ae180fb5b7c729a3a842b171173e56e0e03","data":{"originalLink":"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector","sanitizedLink":"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector","canonical":"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector","htmlText":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>How We Built a Real-time Privacy Inspector – The Markup</title>\n    <meta name=\"description\" content=\"Blacklight catalogs the many ways any website tracks visitors: from cookies to capturing every user keystroke and mouse movement\" />\n    <link rel=\"stylesheet\" href=\"https://mrkp-static-production.themarkup.org/static/dist/main.d00009b9.css\">\n    <link rel=\"shortcut icon\" href=\"https://mrkp-static-production.themarkup.org/static/img/social-icons/favicon.png\" />\n    <link rel=\"apple-touch-icon\" href=\"https://mrkp-static-production.themarkup.org/static/img/social-icons/apple-touch-icon.png\" />\n    <link rel=\"alternate\" type=\"application/rss+xml\" href=\"/feeds/rss.xml\" />\n    <link rel=\"alternate\" type=\"application/atom+xml\" href=\"/feeds/atom.xml\" />\n    <link rel=\"canonical\" href=\"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector\" />\n    <meta property=\"og:type\" content=\"article\" />\n    <meta property=\"og:title\" content=\"How We Built a Real-time Privacy Inspector – The Markup\" />\n    <meta property=\"og:description\" content=\"Blacklight catalogs the many ways any website tracks visitors: from cookies to capturing every user keystroke and mouse movement\" />\n    <meta property=\"og:image\" content=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/show-your-work-blacklight-1200x628.jpg\" />\n\n    <meta name=\"twitter:card\" content=\"summary_large_image\"/>\n    <meta name=\"twitter:site\" content=\"@themarkup\">\n    <meta name=\"twitter:creator\" content=\"@themarkup\"/>\n    <meta name=\"twitter:title\" content=\"How We Built a Real-time Privacy Inspector – The Markup\"/>\n    <meta name=\"twitter:image\" content=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/show-your-work-blacklight-1200x600.jpg\"/>\n    <meta name=\"twitter:description\" content=\"Blacklight catalogs the many ways any website tracks visitors: from cookies to capturing every user keystroke and mouse movement\"/>\n    <meta property=\"article:section\" content=\"Blacklight\">\n    \n\n    \n    <script type=\"text/javascript\">\n    var STRIPE_PUBLISHABLE_KEY = \"pk_live_N1jzERrJAAx1c1H4ab6yG8T600Ku2TXda4\";\n    var SCRIPT_ROOT = \"\";\n    var VARIANTS = {\"js\": []};\n    </script>\n</head>\n<body>\n\n  <div class=\"wrapper \" id=\"top\">\n\n    \n\n<section id=\"menu\" class=\"site-menu js-site-menu\" aria-hidden=\"true\">\n  <div class=\"site-menu-inner\">\n    <nav class=\"menu-list menu-list--content\" aria-label=\"Series\">\n      <ul class='menu-nav'>\n        \n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/series/amazons-advantage\" class=\"menu-nav__link site-header-link\">Amazon’s Advantage</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/series/google-the-giant\" class=\"menu-nav__link site-header-link\">Google the Giant</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/series/ask-the-markup/\" class=\"menu-nav__link site-header-link\">Ask The Markup</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/series/locked-out\" class=\"menu-nav__link site-header-link\">Locked Out</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/series/blacklight\" class=\"menu-nav__link site-header-link\">Blacklight</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"https://themarkup.org/series/machine-learning\" class=\"menu-nav__link site-header-link\">Machine Learning</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/series/citizen-browser\" class=\"menu-nav__link site-header-link\">Citizen Browser</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"https://themarkup.org/series/prediction-bias\" class=\"menu-nav__link site-header-link\">Prediction: Bias</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/series/denied\" class=\"menu-nav__link site-header-link\">Denied</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"https://themarkup.org/series/working-for-an-algorithm\" class=\"menu-nav__link site-header-link\">Working for an Algorithm</a>\n    \n            </li>\n          \n        \n      </ul>\n      \n        <form id=\"search-form\" class=\"site-search site-search--navy js-site-search search-is-empty\" action=\"/search\" role=\"search\">\n    <label for=\"search\" class=\"visually-hidden\" aria-hidden=\"true\">Search term</label>\n    <div class='site-search__input-wrapper'>\n    <input name=\"s\" type=\"search\" id=\"search\" class=\"site-search__input js-search-input\" placeholder=\"Search\" aria-label=\"Search input\">\n    </div>\n    <div class='button button--navy'>\n      <button class=\"site-search__submit button__label\" type=\"submit\" aria-controls=\"search\" aria-label=\"Submit\">\n        <svg><use xlink:href=\"#icon-search\"></use></svg>\n      </button>\n    </div>\n</form>\n      \n    </nav>\n\n    <nav class=\"menu-list menu-list--information\" aria-label=\"Pages\">\n      <ul class=\"menu-nav\">\n        \n          \n            <li class=\"menu-nav__item\">\n              \n      \n      \n      <a href=\"/about\" class=\"menu-nav__link site-header-link\">About Us</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/donate/\" class=\"menu-nav__link site-header-link\">Donate</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/events\" class=\"menu-nav__link site-header-link\">Events</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      \n      \n      <a href=\"/tips\" class=\"menu-nav__link site-header-link\">Have a Tip?</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"https://boards.greenhouse.io/themarkup\" class=\"menu-nav__link site-header-link\">Jobs</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/newsletter\" class=\"menu-nav__link site-header-link\">Newsletters</a>\n    \n            </li>\n          \n            <li class=\"menu-nav__item\">\n              \n      <a href=\"/team/\" class=\"menu-nav__link site-header-link\">Team</a>\n    \n            </li>\n          \n        \n      </ul>\n    </nav>\n\n    <nav class=\"menu-list menu-list--follow\" aria-label=\"Social media\">\n      <ul class='menu-nav'>\n        <li class='menu-nav__item'>\n          <a href=\"https://www.facebook.com/teammarkup/\" target=\"_blank\" class=\"site-header-link menu-nav__link menu-nav__link--facebook\">\n            <svg><use xlink:href='#icon-facebook'></use></svg>Facebook\n          </a>\n        </li>\n        <li class='menu-nav__item'>\n          <a href=\"https://www.twitter.com/themarkup/\" target=\"_blank\" class=\"site-header-link menu-nav__link menu-nav__link--twitter\">\n            <svg><use xlink:href='#icon-twitter'></use></svg>Twitter\n          </a>\n        </li>\n        <li class='menu-nav__item'>\n          <a href=\"https://www.instagram.com/the.markup/\" target=\"_blank\" class=\"site-header-link menu-nav__link menu-nav__link--instagram\">\n            <svg><use xlink:href='#icon-instagram'></use></svg>Instagram\n          </a>\n        </li>\n        <li class='menu-nav__item'>\n          <a href='/feeds/rss.xml' target=\"_blank\" class=\"site-header-link menu-nav__link menu-nav__link--rss\">\n            <svg><use xlink:href='#icon-rss'></use></svg>RSS Feed\n          </a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n</section>\n    <svg display=\"none\" width=\"0\" height=\"0\" xmlns=\"http://www.w3.org/2000/svg\">\n  <defs>\n    <symbol id=\"icon-facebook\" viewBox=\"0 0 16 32\">\n      <path d=\"M9.959 32H3.318V15.998H0v-5.514h3.318v-3.31C3.318 2.676 5.191 0 10.515 0h4.431v5.516h-2.77c-2.073 0-2.21.771-2.21 2.209l-.009 2.76h5.019l-.587 5.514H9.958v16.002h.001z\"/>\n    </symbol>\n    <symbol id=\"icon-twitter\" viewBox=\"0 0 36 32\">\n      <path d=\"M35.005.564a14.425 14.425 0 01-4.691 1.867C28.97.934 27.049.001 24.924.001c-4.078 0-7.383 3.445-7.383 7.694 0 .603.061 1.191.188 1.752-6.136-.321-11.577-3.381-15.222-8.04a7.921 7.921 0 00-.999 3.87c0 2.668 1.304 5.024 3.286 6.406a7.193 7.193 0 01-3.347-.962v.095c0 3.729 2.544 6.84 5.927 7.545a6.935 6.935 0 01-1.948.271c-.475 0-.94-.046-1.388-.137.938 3.056 3.666 5.284 6.899 5.343-2.529 2.065-5.714 3.293-9.173 3.293-.596 0-1.185-.033-1.762-.106 3.269 2.182 7.151 3.456 11.322 3.456 13.587 0 21.012-11.725 21.012-21.894 0-.335-.004-.667-.019-.995a15.312 15.312 0 003.685-3.985 14.29 14.29 0 01-4.241 1.211A7.65 7.65 0 0035.007.563z\"/>\n    </symbol>\n    <symbol id=\"icon-instagram\" viewBox=\"0 0 16 16\">\n      <path d=\"M8 0c2.173 0 2.445.01 3.298.048.852.039 1.433.174 1.942.372a3.92 3.92 0 011.417.923c.445.444.719.89.923 1.417.198.509.333 1.09.372 1.942C15.99 5.555 16 5.827 16 8s-.01 2.445-.048 3.298c-.039.852-.174 1.433-.372 1.942a3.921 3.921 0 01-.923 1.417c-.444.445-.89.719-1.417.923-.509.198-1.09.333-1.942.372C10.445 15.99 10.173 16 8 16s-2.445-.01-3.298-.048c-.852-.039-1.433-.174-1.942-.372a3.922 3.922 0 01-1.417-.923A3.921 3.921 0 01.42 13.24c-.198-.509-.333-1.09-.372-1.942C.01 10.445 0 10.173 0 8s.01-2.445.048-3.298C.087 3.85.222 3.269.42 2.76c.204-.526.478-.973.923-1.417.444-.445.89-.719 1.417-.923C3.269.222 3.85.087 4.702.048 5.555.01 5.827 0 8 0zm0 1.441c-2.136 0-2.39.009-3.233.047-.78.036-1.203.166-1.485.276-.374.145-.64.318-.92.598-.28.28-.453.546-.598.92-.11.282-.24.705-.276 1.485-.038.844-.047 1.097-.047 3.233s.009 2.39.047 3.233c.036.78.166 1.203.276 1.485.145.374.318.64.598.92.28.28.546.453.92.598.282.11.705.24 1.485.276.844.038 1.097.047 3.233.047s2.39-.009 3.233-.047c.78-.036 1.203-.166 1.485-.276.374-.145.64-.318.92-.598.28-.28.453-.546.598-.92.11-.282.24-.705.276-1.485.038-.844.047-1.097.047-3.233s-.009-2.39-.047-3.233c-.036-.78-.166-1.203-.276-1.485a2.48 2.48 0 00-.598-.92 2.479 2.479 0 00-.92-.598c-.282-.11-.705-.24-1.485-.276-.844-.038-1.097-.047-3.233-.047zm0 9.226a2.667 2.667 0 100-5.334 2.667 2.667 0 000 5.334zm0-6.775a4.108 4.108 0 110 8.216 4.108 4.108 0 010-8.216zm5.23-.162a.96.96 0 11-1.92 0 .96.96 0 011.92 0z\"/>\n    </symbol>\n    <symbol id=\"icon-subtext\" viewBox=\"0 0 290 290\">\n      <path transform=\"translate(-447.91 -429.72)\" d=\"M484,569.07a105.39,105.39,0,0,1,38.44-40.52A104.24,104.24,0,1,1,576,722.28H460.57a12.62,12.62,0,0,1-10.18-20.06l6.56-9L500.28,634,532,652.33l-24.45,33.44H576a67.81,67.81,0,1,0-34.73-126,68.86,68.86,0,0,0-25.18,26.4Z\" />\n      <path transform=\"translate(-447.91 -429.72)\" d=\"M666.7,585.34a105.37,105.37,0,0,1-38.33,38.83A104.25,104.25,0,1,1,576,429.72H691.43a12.61,12.61,0,0,1,10.18,20.06l-6.56,9L651.72,518,620,499.67l24.46-33.44H576a67.81,67.81,0,1,0,34,126.42A68.73,68.73,0,0,0,635,567.37Z\" />\n    </symbol>\n    <symbol id=\"icon-chevron\" viewBox=\"0 0 14 8\">\n      <path d=\"M14 1.3L12.6 0 7 5.3 1.4 0 0 1.3l5.6 5.4L7 8l1.4-1.3z\"/>\n    </symbol>\n    <symbol id=\"icon-left-arrow\" viewBox=\"0 0 36.6 16\">\n      <path d=\"M36.6 8L22.7 0v6.4H0v3.2h22.7V16z\"/>\n    </symbol>\n    <symbol id=\"icon-right-arrow\" viewBox=\"0 0 36.6 16\">\n      <path d=\"M0 8l13.9 8V9.6h22.7V6.4H13.9V0z\"/>\n    </symbol>\n    <symbol id=\"icon-menu\" viewBox=\"0 0 25 19\">\n      <path d=\"M11 0h14v3H11V0zM0 8h25v3H0V8zm5 8h20v3H5v-3z\"/>\n    </symbol>\n    <symbol id=\"icon-search\" viewBox=\"0 0 21 21\">\n      <path d=\"M21 18.94l-5.473-5.43a8.426 8.426 0 001.638-4.996C17.165 3.819 13.315 0 8.582 0 3.85 0 0 3.82 0 8.514c0 4.695 3.85 8.514 8.582 8.514 1.794 0 3.46-.55 4.84-1.486L18.924 21 21 18.94zM2.517 8.514c0-3.318 2.721-6.018 6.066-6.018 3.345 0 6.066 2.7 6.066 6.018 0 3.318-2.721 6.017-6.066 6.017-3.346 0-6.066-2.7-6.066-6.017z\"/>\n    </symbol>\n    <symbol id=\"markup-logo\" viewBox=\"0 0 538.7 98\">\n      <path d=\"M150.4 72.2c-9.2 0-15.3-7.8-15.3-24.2v-2.8H167v-.5c0-16.6-8.6-25.2-22.2-25.2-12.8 0-26.2 12.1-26.2 31 0 19.7 10.8 30 25.5 30 11 0 20.5-8 24.9-17.3l-1.5-.9c-4.4 5.6-11.3 9.9-17.1 9.9zm-5.9-49.4c4 0 7 2.3 7 13.3v5.5h-16.2c.9-12.9 4.5-18.8 9.2-18.8zm-26.9 54.6l2 .6v1.5h-29V78l2-.6c3.3-1 4-2.7 4-8.3V36.9c0-7.1-2.7-10.1-8.1-10.1-2.5 0-5 .7-7.2 2.2v40.1c0 5.6.7 7.3 4 8.3l2 .6v1.5h-29V78l2-.6c4.2-1.3 5-2.7 5-8.3V13.9c0-5.5-1.6-7-6.9-7H45.8v62.2c0 5.6.8 7 5 8.3l2 .6v1.5h-31V78l2-.6c4.2-1.3 5-2.7 5-8.3V6.9h-3.7C13 6.9 9.7 10 3.4 23.9l-1.9 4.2H0L1 3.5h61.3l19-3.5v25.4c3.7-3.6 9.2-5.9 15.2-5.9 9.9 0 16.1 7 16.1 20v29.6c0 5.6.8 7 5 8.3zM459.8 81l-.4-6.8c-3.7 3.8-9.4 6.3-15.6 6.3-9.9 0-16.1-7-16.1-20V32.9c0-6.5-2.4-9.2-6.6-9.2-2.2 0-4.4.8-8.8 5.4l-9.5 10 16.5 28.8c3.8 6.6 5.6 8.2 8.5 9.1v1.5c-3 1.1-8.5 2-11.9 2-6.9 0-10.5-2.6-15.3-12.3l-8.8-17.8-4.2 4.3v14.4c0 5.6.8 7 5 8.3l2 .6v1.5h-30V78l2-.6c4.2-1.3 5-2.7 5-8.3V13.9c0-5.6-.8-7-4.4-8.1l-2.6-.8V3.5l23-3.5v50.5L401.3 36c3.7-4 3.6-9.6-2.1-12.4l-3.3-1.6v-1.5h31.8l16-1.5v44.1c0 7.1 2.7 10.1 8.1 10.1 2.5 0 5-.7 7.2-2.2V32.9c0-5.6-.8-7-4.4-8.1L452 24v-1.5l23-3.5v48.1c0 5.6.8 7 4.4 8.1l2.6.8v1.5L459.8 81zm-187.6-3.8l1.9.8v1.5h-32V78l1.9-.8c4.3-1.8 5.3-3.1 4.9-10L246 14.8l-23.9 64.9h-1.8l-23.4-64.3-2.6 45.3c-.4 7.4 1.2 10.7 7.9 15.4l2.7 1.9v1.5h-24V78l1.9-1.8c6.1-5.7 7.5-8.3 7.9-15.7l2.7-45.6c.3-5-.8-6.8-5.5-8.9l-2.3-1V3.5h25.5l17.4 47.9 17.6-47.9h25.1V5l-2.3 1c-4.7 2.1-5.8 3.9-5.5 8.9l3 51.1c.4 7.6 1.3 9.3 5.8 11.2zM349.6 31c4.2 0 7.7 3.4 11.2 3.4 4.2 0 6.5-3.5 6.5-10.2 0-2.6-.7-3.7-2.4-4.2-.6-.2-2.2-.5-3.4-.5-4.7 0-10.1 4.3-13.6 9.3l-.5-9.8-22.2 3.5V24l2.6.8c3.6 1.1 4.4 2.5 4.4 8.1v36.2c0 5.2-1.7 7.4-6.2 7.4-4.4 0-6.2-2.2-6.2-7.4V40.5c0-14.7-7.8-21-21.7-21-9.6 0-17.1 5.4-21.1 13.1-.5.9-.6 2.2.5 3.2 2.6 2.3 5.8 3.7 8 3.7 3.9 0 6.5-2.3 7.7-8.8 1.2-6.6 2.4-8 4.9-8 3.7 0 5.7 2.2 5.7 9.7V48c-3.1-1.1-6.5-1.8-9.6-1.8-11.9 0-20.5 7.3-20.5 17.4 0 9.8 7.9 16.9 17.3 16.9 6 0 11.3-2.6 14.6-6.7 2.1 4.3 6.2 5.7 13.2 5.7h37.9V78l-2.2-.6c-5.7-1.6-6.3-2.7-6.3-8.3v-38c.5-.1 1-.1 1.4-.1zm-51.2 42.7c-5.2 0-8.6-3.8-8.6-11.8s3.4-11.8 8.6-11.8c1.7 0 3.5.3 5.4 1v11.6c0 3.5.3 6.3.9 8.6-2.1 1.6-4.3 2.4-6.3 2.4zm218.2-54.2c-5 0-10 2.3-13.6 5.9l-.3-6.4-22.2 3.5V24l2.6.8c3.6 1.1 4.4 2.5 4.4 8.1v54.7c0 5.6-.8 7-5 8.3l-2 .6V98h30v-1.5l-2-.6c-4.2-1.3-5-2.7-5-8.3v-8.3c2.4.8 5 1.2 7.7 1.2 13.8 0 27.5-11.7 27.5-31 0-18.7-10.3-30-22.1-30zM511 77c-2.6 0-5.2-1.2-7.5-3.6V28.7c2.3-2.4 5-3.7 7.5-3.7 6.6 0 11 6.6 11 26s-4.4 26-11 26z\"/>\n    </symbol>\n    <symbol id=\"icon-cross\" viewBox=\"0 0 100 100\">\n      <path d=\"M9.341 80.052l70.71-70.71 10.607 10.606-70.71 70.71z\"/>\n      <path d=\"M9.341 19.948L19.948 9.342l70.71 70.71L80.05 90.658z\"/>\n    </symbol>\n    <symbol id=\"icon-rss\" viewBox=\"0 0 192 192\">\n      <circle cx=\"32\" cy=\"160\" r=\"32\"/>\n      <path d=\"M0 96c53 0 96 43 96 96h32C128 121.3 70.7 64 0 64v32z\"/>\n      <path d=\"M0 32c88.4 0 160 71.6 160 160h32C192 86 106 0 0 0v32z\"/>\n    </symbol>\n  </defs>\n</svg>\n  \n    \n<a href=\"#content\" class=\"visually-hidden focusable\">Skip navigation</a>\n<header class=\"site-header\" role=\"banner\">\n  <div class='site-header__nav'>\n    <div class=\"site-header__nav-inner\">\n      <a class='site-header__link site-header__link--menu js-MenuToggle' role=\"button\" aria-controls=\"menu\" aria-label=\"Site menu\">Menu\n        <svg class='site-header__link-icon'><use xlink:href='#icon-chevron'></use></svg>\n      </a>\n\n      <a href=\"/\" class=\"site-header__branding\">\n        <svg viewBox='0 0 538.7 98' class='site-header__logo'><use xlink:href=\"#markup-logo\"></use></svg>\n        <span class=\"visually-hidden\">The Markup</span>\n      </a>\n\n      <a href='/donate' class='site-header__link site-header__link--donate' data-utm-source=\"header\">Donate\n      </a>\n\n      <ul class='site-header__links'>\n        \n          \n            <li class=\"site-header__links-item\">\n              \n      \n      \n      <a href=\"/about\" class=\"site-header__link\">About Us</a>\n    \n            </li>\n          \n            <li class=\"site-header__links-item\">\n              \n      <a href=\"/donate\" class=\"site-header__link button\">\n        <span class=\"button__label\">Donate</span>\n      </a>\n    \n            </li>\n          \n        \n      </ul>\n    </div>\n  </div><p class='site-header__statement'>Big Tech Is Watching You. We’re Watching Big&nbsp;Tech.</p></header>\n  \n\n\n    \n\n<div class=\"print-only\">\n  <div class=\"print-logo\">\n    <svg viewBox=\"0 0 538.7 98\" class=\"site-header__logo\"><use xlink:href=\"#markup-logo\"></use></svg>\n  </div>\n  <h1 class=\"article-title\">How We Built a Real-time Privacy Inspector</h1>\n  <div class=\"article-byline\">By Surya Mattu and Aaron Sankin </div>\n  <div class=\"article-date\">September 22, 2020 06:00 ET</div>\n  <div class=\"article-link\">Viewable online at<br><a href=\"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector\">https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector</a></div>\n</div><article id=\"content\" class=\"article-single article-single--show-your-work\" role=\"main\">\n  \n    <div class=\"article-single-inner\">\n\n      \n        <header class=\"article-header\">\n  <div class=\"article-titles print-hidden\"><p class=\"article-type\"><a href=\"/series/show-your-work\" class=\"article-type__link article-type__link--type\">Show Your Work</a><a href=\"/series/blacklight\" class=\"article-type__link article-type__link--series\">Blacklight</a></p><h1 class=\"article-title\">How We Built a Real-time Privacy Inspector</h1>\n\n    <div class='article-titles__meta'>\n      \n        \n<span class=\"article-author\">\n  <span>By </span>\n  \n\n    \n\n      <a class=\"article-author__link\" href=\"https://themarkup.org/people/surya-mattu/\">Surya Mattu</a> and \n\n      <a class=\"article-author__link\" href=\"https://themarkup.org/people/aaron-sankin/\">Aaron Sankin</a> \n</span>\n\n      \n      <div class=\"article-date\">\n        <time datetime=\"2020-09-22T06:00:00\">September 22, 2020 06:00 ET</time></div>\n    </div>\n  </div>\n\n  <div class=\"article-art__wrapper\">\n    <div class=\"article-art\">\n      <figure class=\"article-figure\">\n        \n          \n            <picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/The-Markup-841x473.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/The-Markup-1682x946.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/The-Markup-750x422.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/The-Markup-1140x641.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/The-Markup-841x473.jpg\" alt=\"Illustration of a keyboard but every key has an eye symbol on it\" class=\"article-img\">\n</picture>\n          \n        \n      </figure>\n    </div>\n  </div>\n  \n    <div class='article-original-post print-hidden'>\n    <div class='article-original-post__description'>\n      <p class='article-original-post__description-copy'>\n        \n      </p>\n    </div>\n    \n      <article class=\"article-card article-card--original article-card--has-image \"\n  >\n  <a href=\"https://themarkup.org/blacklight/2020/09/22/blacklight-tracking-advertisers-digital-privacy-sensitive-websites\" class=\"article-card__link\">\n    \n    <div class=\"article-card__content\">\n      <div class=\"article-card__content-inner\">\n          <p class=\"article-card-type\"><span class=\"article-card-type__series\">Blacklight</span></p>\n        <h3 class=\"article-card__headline \">\n\n          \n            The High Privacy Cost of a “Free”&nbsp;Website\n          \n        </h3><p class=\"article-card__subhead\">Trackers piggybacking on website tools leave some site operators in the dark about who is watching or what marketers do with the data </p><time class=\"article-card__date\" datetime=\"2020-09-22T06:00:00\">September 22, 2020 06:00 ET</time></div>\n    </div>\n  </a>\n</article>\n    \n    </div>\n  \n</header>\n      \n\n      <div class=\"article-body article-body--show-your-work\">\n        <div class=\"article-meta\">\n          <div class='article-meta__share' role=\"complementary\" aria-labelledby=\"article-meta__share__heading\">\n            <h3 id=\"article-meta__share__heading\" class='article-meta__title' aria-hidden=\"true\">Share This Article</h3>\n            \n              <a  class='button  article-meta__button js-CopyLink' >\n    <span class='button__label button__label--main'>\n        \n        Copy Link\n    </span></a>\n            \n            \n              \n                <a  class='button  article-meta__button js-open-republisher' >\n    <span class='button__label button__label--main'>\n        \n        Republish\n    </span></a>\n              \n            \n          </div>\n          \n        </div>\n        <p>Blacklight is a real-time website privacy inspector.</p>\n\n\n\n<p>The tool emulates how a user might be surveilled while browsing the web. Users type a URL into Blacklight, and it visits the requested website, scans for known types of privacy violations, and returns an instant privacy analysis of the inspected site.</p>\n\n\n\n<p>Blacklight works by visiting each website with a headless browser, running custom software built by The Markup. This software monitors which scripts on that website are potentially surveilling the user by performing seven different tests, each investigating a specific, known method of surveillance.</p>\n\n\n\n<p>The types of surveillance that Blacklight seeks to identify are:</p>\n\n\n\n  <ul class=\"list\">\n\n  <li class='list__item'>Third-party cookies</li>\n  \n  <li class='list__item'>Ad trackers</li>\n  \n  <li class='list__item'>Key logging</li>\n  \n  <li class='list__item'>Session recording</li>\n  \n  <li class='list__item'>Canvas fingerprinting</li>\n  \n  <li class='list__item'>Facebook tracking</li>\n  \n  <li class='list__item'>Google Analytics “Remarketing Audiences”</li>\n  \n</ul>\n  </ul>\n\n\n\n<p>These are defined later in this document, as are their limitations.</p>\n\n\n\n<p>Blacklight was built using the NodeJS Javascript environment, the <a href=\"https://pptr.dev/\" target=\"_blank\">Puppeteer</a> Node library, which provides high-level control over a <a href=\"https://www.chromium.org/\" target=\"_blank\">Chromium</a> (open-source Chrome) browser. When a user enters a URL into Blacklight, the tool opens a headless web browser with a fresh profile and visits its homepage as well as an additional randomly selected page deeper inside the same website.</p>\n\n\n<div id=\"blacklight-tool-embed\" class=\"graphics graphics--blacklight-tool-embed graphics--left\">\n  \n    <a href=\"#blacklight-tool-embed\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n    <h3 class=\"graphics__heading\">Who’s peeking over your shoulder as you work, learn, or explore the&nbsp;internet?</h3>\n  \n  \n  <div class=\"graphics__content print-hidden\">\n    <div class='blacklight-tool-embed'>\n  <p class='blacklight-tool-embed__instruction'>Try out Blacklight here. Enter a website, and Blacklight will scan it for user-tracking technologies — and who’s getting your data.</p>\n\n  <form class=\"blacklight-tool-embed__form\" name=\"blacklight\" target=\"_blank\" action=\"https://themarkup.org/blacklight\">\n    <label for=\"submit\" class=\"visually-hidden\">Enter a URL for Blacklight to scan</label>\n    <div class=\"blacklight-tool-embed__form-input-wrapper\" data-children-count=\"1\">\n      <input name=\"url\" inputmode=\"url\" class=\"blacklight-tool-embed__form-input\" placeholder=\"Enter a Website Address\">\n      <div class=\"blacklight-tool-embed__form-input-background\"></div>\n    </div>\n\n    <div class=\"blacklight-tool-embed__form-button-wrapper\">\n      <button type=\"submit\" class=\"blacklight-tool-embed__form-button\" aria-label=\"Scan Site\">\n        <img class=\"blacklight-tool-embed__form-icon\" src=\"https://mrkp-static-production.themarkup.org/graphics/blacklight-tool-embed/1600729080984/assets/search.svg\">\n      </button>\n    </div>\n  </form>\n</div>\n  </div>\n  \n    <img src=\"https://mrkp-static-production.themarkup.org/graphics/blacklight-tool-embed/1600729080984/fallback.png\" class=\"print-only\" alt=\"\">\n  \n  \n    <style>\n    \n.blacklight-tool-embed {\n  border-top: 1px solid #ff335f; }\n\n.blacklight-tool-embed__instruction {\n  margin-top: 10px; }\n\n.blacklight-tool-embed__form {\n  display: flex;\n  padding-top: 8px;\n  padding-bottom: 15px; }\n\n.blacklight-tool-embed__form-input-wrapper {\n  position: relative;\n  margin-right: 12px;\n  flex-grow: 2; }\n  .blacklight-tool-embed__form-input-wrapper:before {\n    content: \"\";\n    position: absolute;\n    top: 6px;\n    left: 6px;\n    width: 100%;\n    height: 100%;\n    background: transparent url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='3' height='3'%3E%3Ccircle cx='2.5' cy='2.5' r='.5' fill='%23242a49'/%3E%3C/svg%3E\") repeat right bottom; }\n\n.blacklight-tool-embed__form-input {\n  position: relative;\n  z-index: 3;\n  width: 100%;\n  margin: 0;\n  border-radius: 0;\n  border: 1px solid #242a49;\n  padding: 12px;\n  font-size: 16px;\n  font-family: \"messina\", sans-serif;\n  color: #242a49;\n  background-color: transparent;\n  -webkit-appearance: none; }\n  .blacklight-tool-embed__form-input:focus {\n    outline: 0;\n    border-color: #242a49; }\n\n@keyframes loadingBar {\n  0% {\n    background-image: linear-gradient(to right, blue, #ffffff);\n    transform: translateX(100%); }\n  40% {\n    background-image: linear-gradient(to right, blue, #ffffff);\n    transform: translateX(-100%); }\n  50% {\n    background-image: linear-gradient(to right, #ffffff, blue);\n    transform: translateX(-100%); }\n  90%,\n  100% {\n    background-image: linear-gradient(to right, #ffffff, blue);\n    transform: translateX(100%); } }\n\n.blacklight-tool-embed__form-input-background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #ffffff;\n  z-index: 2;\n  overflow: hidden; }\n  .blacklight-tool-embed__form-input-background:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 3;\n    pointer-events: none; }\n    .is-loading .blacklight-tool-embed__form-input-background:after {\n      animation: loadingBar 6s linear infinite; }\n\n.blacklight-tool-embed__form-button-wrapper {\n  position: relative;\n  z-index: 2;\n  margin-right: 6px;\n  cursor: pointer; }\n  .blacklight-tool-embed__form-button-wrapper:before {\n    content: '';\n    position: absolute;\n    z-index: 2;\n    top: 3px;\n    left: 3px;\n    width: 100%;\n    height: 100%;\n    border: 1px solid #242a49;\n    background-color: #ffffff;\n    transition: transform 0.2s linear, border-color 0.2s linear; }\n  .blacklight-tool-embed__form-button-wrapper:after {\n    content: '';\n    position: absolute;\n    top: 6px;\n    left: 6px;\n    width: 100%;\n    height: 100%;\n    border: 1px solid #242a49;\n    background-color: #ffffff;\n    transition: transform 0.2s linear, border-color 0.2s linear; }\n  .blacklight-tool-embed__form-button-wrapper:hover .blacklight-tool-embed__form-button {\n    transform: translate(-3px, -3px);\n    color: #242a49; }\n  .blacklight-tool-embed__form-button-wrapper:hover:before {\n    transform: translate(-2px, -2px);\n    border-color: #666a80; }\n  .blacklight-tool-embed__form-button-wrapper:hover:after {\n    transform: translate(-1px, -1px);\n    border-color: #9295a4; }\n\n.blacklight-tool-embed__form-button {\n  position: relative;\n  z-index: 3;\n  border: 1px solid #242a49;\n  padding: 12px;\n  font-size: 16px;\n  font-family: \"messina\", sans-serif;\n  font-weight: 700;\n  color: #ffffff;\n  background-color: #ff335f;\n  display: block;\n  transition: color 0.2s linear, transform 0.2s linear, border-color 0.2s linear; }\n  .blacklight-tool-embed__form-button:focus {\n    border-color: #ff335f;\n    border-radius: 0;\n    outline: 0; }\n\n.blacklight-tool-embed__form-icon {\n  height: 19px;\n  width: auto;\n  display: block; }\n\n.graphics--left .blacklight-tool-embed__form-icon,\n.graphics--right .blacklight-tool-embed__form-icon {\n  display: block; }\n\n.graphics--left .blacklight-tool-embed__form-label,\n.graphics--right .blacklight-tool-embed__form-label {\n  display: none; }\n\n    </style>\n  \n  \n</div>\n\n\n<p>While the browser is visiting the website, it runs custom software in the background that monitors scripts and network requests to observe when and how user data is being collected.   To monitor scripts, Blacklight modifies <a href=\"https://github.com/the-markup/blacklight-collector/blob/main/src/plugins/fingerprinting-apis.ts\" target=\"_blank\">various fingerprintable properties</a> of the browser’s Window API. This allows Blacklight to log which script made a particular function call, using the <a href=\"https://www.stacktracejs.com/\" target=\"_blank\">Stacktrace-js</a> package. The network requests are collected using a monitoring tool included in <a href=\"https://pptr.dev/#?product=Puppeteer&amp;version=v5.2.1&amp;show=api-event-request\" target=\"_blank\">Puppeteer’s API</a>.</p>\n\n\n\n<p>Blacklight uses the script data and network requests to run the seven tests described above. Afterward, it closes the browser and generates an instant report for the user.</p>\n\n\n\n<p>It records a list of all the URLs that the inspected website requests. In addition, it makes a list of all domains and subdomains that were requested. The tool we provide to the public will not save those lists unless the user chooses to share results with us through an option in the tool.</p>\n\n\n\n<p>We define domain names using the <a href=\"https://web.archive.org/web/20200615204307/https:/github.com/remusao/tldts/blob/master/packages/tldts-core/src/domain.ts\" target=\"_blank\">Public Suffix + 1 method</a>. We define <em>first-party domain</em> as any domain that matches the website visited, including subdomains. We define <em>third-party</em> as any domain that does not match the website visited. The tool compares the list of third-party domains from the website requests with DuckDuckGo’s <a href=\"https://github.com/duckduckgo/tracker-radar\" target=\"_blank\">Tracker Radar</a> dataset.</p>\n\n\n\n<p>This data merge allows Blacklight to add the following information about the third-party domains found on the inspected site:</p>\n\n\n\n  <ol class=\"list\">\n\n  <li class='list__item'>Name of the domain’s owner.</li>\n  \n  <li class='list__item'><a href=\"https://github.com/duckduckgo/tracker-radar/blob/master/docs/CATEGORIES.md\">Categories assigned by DuckDuckGo</a> to each domain that attempt to describe its observed purpose or intent.</li>\n  \n</ul>\n  </ol>\n\n\n\n<p>This additional information about third parties is provided to users as context for Blacklight’s instant test results. Among other things, this information is used to count the number of advertising-related trackers present on a given website.</p>\n\n\n\n<p>Blacklight runs tests based on the root URL of the page entered by a user into the tool. For example, if a user types in <em>https://example.com/sports</em>, Blacklight starts its inspection at <em>https://example.com</em> and disregards the <em>/sports</em> path. If a user types in <em>https://sports.example.com</em>, Blacklight starts its inspection at <em>https://sports.example.com</em>.</p>\n\n\n\n  <div id=\"block4\" class=\"promotion print-hidden js-promotion promotion--donate  promotion--has-image promotion--right\" data-promotion=\"donate-report-deeply-and-fix-things-1-202108a\">\n    <div class=\"promotion__inner\" data-href=\"/donate-202109a\">\n        <h2 class=\"promotion__heading\"><a href=\"/donate-202109a\" class=\"promotion__link js-promotion-link\">Report Deeply and Fix Things</a></h2>\n      \n        <a href=\"/donate-202109a\" class=\"js-promotion-link\">\n          <figure class=\"promotion__figure\">\n            \n              <picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2021/11/support_woman_original-360x203.jpg, https://mrkp-static-production.themarkup.org/uploads/2021/11/support_woman_original-750x422.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2021/11/support_woman_original-750x422.jpg, https://mrkp-static-production.themarkup.org/uploads/2021/11/support_woman_original-1140x641.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2021/11/support_woman_original-360x203.jpg\" alt=\"\" class=\"promotion__img\">\n</picture>\n            \n          </figure>\n        </a>\n      \n      <div class=\"promotion__content\">\n          <p class=\"promotion__description\">Because it turns out moving fast and breaking things broke some super important things.</p>\n          \n            <a href='/donate-202109a' class='button button--important js-promotion-link' >\n    <span class='button__label button__label--main'>\n        \n        Give Now\n    </span></a>\n          \n        \n        \n      </div>\n    </div>\n  </div>\n\n\n\n<p>Blacklight results for each requested domain are cached for 24 hours, and these cached reports are delivered in response to subsequent user requests for the same website during those 24 hours. This is designed to prevent the tool from being used maliciously to overwhelm a website with thousands of automated visits.</p>\n\n\n\n<p>Blacklight will also tell users whether their results are high, low, or about average compared with what the tool found on the 100,000 most popular websites as ranked by the <a href=\"https://tranco-list.eu/\" target=\"_blank\">Tranco List</a>. This is described in more detail below. </p>\n\n\n\n<p>The Blacklight code base is open source and available on <a href=\"https://github.com/the-markup/blacklight-collector\" target=\"_blank\">Github</a>; it can also be downloaded as <a href=\"https://www.npmjs.com/package/@themarkup/blacklight-collector\" target=\"_blank\">an NPM module</a>.</p>\n\n\n\n<p>There are limitations to our analysis. Blacklight emulates a user visiting a website, but its automated behavior is different from human behavior, and that behavior may trigger different types of surveillance. For instance, an automated request might trigger more fraud detection but fewer ads.</p>\n\n\n\n<p>Given the dynamic nature of web-based technology, it is also possible that some of these tests will become out-of-date over time. And new legitimate-use cases for the techniques Blacklight flags could emerge that would not be listed in the tool’s caveats.</p>\n\n\n\n<p>For this reason, Blacklight results should not be taken as the final word on potential privacy violations by a given website. Rather, they should be treated as an initial automated inspection that requires further investigation before a definitive claim can be made.</p>\n\n\n<div class=\"heading heading--level2\">\n\t\n\t<a href=\"#previous-work\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h2 id=\"previous-work\" class=\"heading__text\">Previous&nbsp;Work</h2>\n</div>\n\n\n<p>Blacklight is built on the foundation of various privacy census tools built over the past decade.</p>\n\n\n\n<p>It runs Javascript instrumentation, which enables it to monitor calls to the browsers’ Javascript API. This is based on <a href=\"https://senglehardt.com/papers/openwpm_03-2015.pdf\" target=\"_blank\">OpenWPM</a>, an open-source tool for web privacy measurement built by Steven Englehardt, Gunes Acar, Dillon Reisman, and Arvind Narayanan at Princeton University. It is now maintained by Mozilla.</p>\n\n\n\n<p>OpenWPM was used to power <a href=\"https://webtap.princeton.edu/\" target=\"_blank\">Princeton’s Web Transparency and Accountability Project</a>, which monitored websites and services to discover companies’ data collection, data use, and deceptive practices.</p>\n\n\n\n<p>Through numerous studies conducted between 2015 and 2019, <a href=\"https://webtransparency.cs.princeton.edu/webcensus/data-release/\" target=\"_blank\">Princeton researchers uncovered</a> the presence of many privacy-infringing technologies. These included <a href=\"https://www.cs.princeton.edu/~arvindn/publications/OpenWPM_1_million_site_tracking_measurement.pdf\" target=\"_blank\">browser fingerprinting and cookie syncing</a> as well as <a href=\"https://freedom-to-tinker.com/tag/noboundaries/\" target=\"_blank\">how session replay scripts collect passwords and sensitive user data</a>. One notable example is the <a href=\"https://freedom-to-tinker.com/2017/11/15/no-boundaries-exfiltration-of-personal-data-by-session-replay-scripts/\" target=\"_blank\">exfiltration of prescription data and health-conditions data from walgreens.com.</a></p>\n\n\n\n<p>Five of the seven tests Blacklight runs are based on the techniques described in the Princeton research mentioned above. These tests are canvas fingerprinting, key logging, session recording, and third-party cookies.      </p>\n\n\n\n<p>OpenWPM incorporates code and techniques from other privacy inspection tools, including <a href=\"http://fourthparty.info/\" target=\"_blank\">FourthParty</a>, <a href=\"https://privacybadger.org/\" target=\"_blank\">Privacy Badger</a>, and <a href=\"https://www.cosic.esat.kuleuven.be/fpdetective/#paper\" target=\"_blank\">FP Detective</a>:</p>\n\n\n\n  <ul class=\"list\">\n\n  <li class='list__item'><strong>FourthParty</strong> was an open-source platform for measuring dynamic web content <a href=\"https://cyberlaw.stanford.edu/blog/2011/08/fourthparty-new-approach-web-measurement\">that was released in August 2011</a> and maintained until 2014. It has been used in various studies, including one <a href=\"https://cyberlaw.stanford.edu/blog/2011/10/tracking-trackers-where-everybody-knows-your-username\">that describes</a> how websites like Home Depot were leaking their customers' usernames to third parties. Blacklight uses FourthParty’s method to monitor what user information is being sent over the network to third parties.</li>\n  \n  <li class='list__item'><strong>Privacy Badger</strong> is a browser add-on made by the Electronic Frontier Foundation and released in May 2014. It prevents advertisers and third-party trackers from following people on the internet.</li>\n  \n  <li class='list__item'><strong>FP Detective</strong> was the first comprehensive study to measure the prevalence of device fingerprinting on the internet. The tool was released in 2013 and was used to conduct large-scale web-privacy studies.</li>\n  \n</ul>\n  </ul>\n\n\n\n<p>Blacklight’s data analysis was inspired in part by the<a href=\"https://edps.europa.eu/press-publications/edps-inspection-software_en\" target=\"_blank\"> Website Evidence Collector</a> developed by the European Union’s Electronic Data Protection Supervisor (EDPS). The Website Evidence Collector is a NodeJS package that uses the Puppeteer library to discover how a website collects a user’s personal data. Some of the categories of collected data were chosen by the EDPS.</p>\n\n\n\n<p>Other projects that have influenced Blacklight’s development include the <a href=\"https://www.law.berkeley.edu/research/bclt/research/privacy-at-bclt/web-privacy-census/\" target=\"_blank\">Web Privacy Census</a>, conducted at UC Berkeley in 2012, and the <a href=\"https://www.wsj.com/articles/SB10001424052748703977004575393121635952084?mod=article_inline\" target=\"_blank\">Wall Street Journal’s “What They Know” series</a>.   </p>\n\n\n<div class=\"heading heading--level2\">\n\t\n\t<a href=\"#how-we-analyzed-each-type-of-tracking\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h2 id=\"how-we-analyzed-each-type-of-tracking\" class=\"heading__text\">How We Analyzed Each Type of&nbsp;Tracking</h2>\n</div>\n\n\n\t\n<div class=\"heading heading--level3\">\n\t\n\t<a href=\"#third-party-cookies\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h3 id=\"third-party-cookies\" class=\"heading__text\">Third-Party&nbsp;Cookies</h3>\n</div>\n\n\n<p>Third-party cookies are a <a href=\"https://www.eff.org/wp/behind-the-one-way-mirror#Cookies\" target=\"_blank\">small piece of data that tracking companies store in your web browser</a> when you visit a website. This bit of text—usually a unique number or string of characters—identifies you when you visit other websites that contain tracking code from the same company. Third-party cookies are used by hundreds of companies to build dossiers about users and deliver customized ads based on their behavior.</p>\n\n\n\n<p>Popular web browsers Edge, Brave, Firefox, and Safari all <a href=\"https://www.cookiestatus.com/\" target=\"_blank\">block third-party tracking cookies by default</a>, and Chrome has announced that it will <a href=\"https://www.theverge.com/2020/1/14/21064698/google-third-party-cookies-chrome-two-years-privacy-safari-firefox\" target=\"_blank\">phase them out</a>.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>Blacklight monitors network requests for the “Set-Cookie” header and observes all domains that set cookies using the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie\" target=\"_blank\">document.cookie</a> javascript property. Blacklight identifies third-party cookies as those whose domains do not match the domain of the website being visited. We look up these third-party domains in DuckDuckGo’s Tracker Radar data to find out who owns them, how prevalent they are, and what kinds of services they provide.</p>\n\n\n\n\t\n<div class=\"heading heading--level3\">\n\t\n\t<a href=\"#key-logging\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h3 id=\"key-logging\" class=\"heading__text\">Key&nbsp;Logging</h3>\n</div>\n\n\n<p>Key logging is when a first or third party monitors the text that you type into a webpage before you hit the submit button. This technique has been used for a variety of purposes, including identifying <a href=\"https://gizmodo.com/how-a-company-you-ve-never-heard-of-sends-you-letters-a-1795643539\" target=\"_blank\">anonymous web users by matching them to postal addresses and real names</a>. </p>\n\n\n\n<p>There are other reasons for key logging, such as providing autocomplete functionality. Blacklight cannot determine the intent behind the inspected website’s use of this technique.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>In order to test whether this is happening on a given website, Blacklight types predetermined text (see <a href=\"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector#appendix\">Appendix</a>) in all input fields but never clicks on a submit button. It monitors network requests to see if the data that was entered was sent to any servers.</p>\n\n\n<div class=\"heading heading--level2\">\n\t\n\t<a href=\"#session-recording\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h2 id=\"session-recording\" class=\"heading__text\">Session&nbsp;Recording<em></em></h2>\n</div>\n\n\n<p>Session recording is technology that allows a third party to monitor and record all of a user’s behavior on a webpage—including mouse movements, clicks, scrolling down the page, and anything you type into a form even if you don’t click submit.</p>\n\n\n\n<p><a href=\"https://freedom-to-tinker.com/2017/11/15/no-boundaries-exfiltration-of-personal-data-by-session-replay-scripts/\" target=\"_blank\">In a 2017 study</a>, researchers at Princeton University found that session recorders were collecting sensitive information such as passwords and credit card numbers. When the researchers contacted the companies in question, most responded quickly and fixed the underlying cause of the data leak. However, the research highlights that these aren’t simply bugs but rather insecure practices that the researchers say should be stopped entirely. Most companies that offer session recording say they use the data to provide their customers—the websites installing the technology—meaningful insights on how to improve a user’s experience on the website. One company, Inspectlet, describes its service as watching “individual visitors use your site as if you’re looking over their shoulders.” (Inspectlet did not respond to an email seeking comment.)</p>\n\n\n<figure class=\"wp-block-image wp-block-image--screenshot align \" aria-label=\"image\" role=\"group\">\n  <div class=\"image-container\"><div class=\"image-screenshot-credit\">\n        <span class=\"visually-hidden\">Credit:</span>Inspectlet</div><picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-720x405.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-1280x720.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-720x405.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-1280x720.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-720x405.jpg\" alt=\"Screenshot from Inspectlet, a known session-recording provider.\" class=\"\">\n</picture></div><figcaption>\n      <span class=\"visually-hidden\">Caption:</span>\n      Screenshot from Inspectlet, a known session recording provider.</figcaption></figure>\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>We define session recording as the loading of a specific type of script by a company that we know to be providing session recording services.</p>\n\n\n\n<p>Blacklight monitors the network requests for specific URL substrings that appear only when session recording is taking place, <a href=\"https://web.archive.org/web/20210830151649/https://gist.github.com/gunesacar/0c67b94ad415841cf3be6761714147ca\" target=\"_blank\">according to a list</a> created by researchers at Princeton University in 2017.</p>\n\n\n\n  <div id=\"block12\" class=\"promotion print-hidden js-promotion promotion--donate  promotion--right\" data-promotion=\"donate-report-deeply-and-fix-things-2-202108b\">\n    <div class=\"promotion__inner\" data-href=\"/donate-202109b\">\n        <h2 class=\"promotion__heading\"><a href=\"/donate-202109b\" class=\"promotion__link js-promotion-link\">Report Deeply and Fix Things</a></h2>\n      \n      <div class=\"promotion__content\">\n          <p class=\"promotion__description\">Because it turns out moving fast and breaking things broke some super important things.</p>\n          \n            <a href='/donate-202109b' class='button button--important js-promotion-link' >\n    <span class='button__label button__label--main'>\n        \n        Give Now\n    </span></a>\n          \n        \n        \n      </div>\n    </div>\n  </div>\n\n\n\n<p>Sometimes key logging is used as part of session recording. In those cases, Blacklight would correctly report the session recorder as both key logging and session recording because we observed both, even though both tests are identifying the same script.  </p>\n\n\n\n<p>Blacklight accurately detects when a website loads these scripts—but companies typically record only a sample of website visits, so not every user is being recorded on every visit.</p>\n\n\n\n\t\n<div class=\"heading heading--level3\">\n\t\n\t<a href=\"#canvas-fingerprinting\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h3 id=\"canvas-fingerprinting\" class=\"heading__text\">Canvas&nbsp;Fingerprinting</h3>\n</div>\n\n\n<p>Fingerprinting describes a group of techniques that try to identify your browser without setting a cookie. <a href=\"https://webtransparency.cs.princeton.edu/webcensus/#results\" target=\"_blank\">They can identify you</a> even if you block all cookies.</p>\n\n\n\n<p>Canvas fingerprinting is a type of fingerprinting that identifies users by drawing shapes and text on a user’s webpage and noting the minor differences in the way they are rendered. </p>\n\n\n<figure class=\"wp-block-image  align \" aria-label=\"image\" role=\"group\">\n  <div class=\"image-container\"><picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-720x405.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-1280x720.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-720x405.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-1280x720.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-720x405.jpg\" alt=\"Four examples of canvas fingerprinting found with Blacklight\" class=\"\">\n</picture></div><figcaption>\n      <span class=\"visually-hidden\">Caption:</span>\n      Four examples of canvas fingerprinting found with Blacklight.</figcaption></figure>\n\n\n<p>These differences in font rendering, smoothing, and anti-aliasing and other features <a href=\"https://webtransparency.cs.princeton.edu/webcensus/index.html#canvas-font-fp\" target=\"_blank\">are used by marketers</a> and others to identify individual devices. All of the major internet browsers, except Chrome, try to counter canvas fingerprinting—either by not fulfilling data requests for scripts known to have engaged in the practice or by trying to standardize users’ fingerprints.</p>\n\n\n\n<p>The image below is an example of the type of canvas images used by fingerprinting scripts. These canvases are usually invisible to the user.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>We follow the methodology described in <a href=\"http://randomwalker.info/publications/OpenWPM_1_million_site_tracking_measurement.pdf#page=12\" target=\"_blank\">this paper</a> by researchers at Princeton University to identify when the HTML canvas element is used for tracking purposes. The parameters we use to identify canvases that are being drawn for fingerprinting purposes are:</p>\n\n\n\n  <ul class=\"list\">\n\n  <li class='list__item'>The canvas element's <em>height</em> and <em>width</em> properties must not be set below 16px.</li>\n  \n  <li class='list__item'>Text must be written to the canvas within at least 10 distinct characters.</li>\n  \n  <li class='list__item'>The script should not call the <em>save</em>, <em>restore</em>, or <em>addEventListener</em> methods of the rendering context.</li>\n  \n  <li class='list__item'>The script extracts and image with a <em>toDataURL</em> or with a single call to <em>getImageData</em> that specifies an area with&nbsp;a minimum size of 16px × 16px.</li>\n  \n</ul>\n  </ul>\n\n\n\n<p>We have not seen this in practice, but it is possible that Blacklight could falsely label a legitimate use of the canvas that matches these heuristics. In order to account for this, the tool captures the image drawn by the script and renders this in the tool. Users should be able to determine the use of canvas simply by viewing this image. A typical fingerprinting script is shown above.                                                   </p>\n\n\n\n\t\n<div class=\"heading heading--level3\">\n\t\n\t<a href=\"#ad-trackers\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h3 id=\"ad-trackers\" class=\"heading__text\">Ad&nbsp;Trackers</h3>\n</div>\n\n\n<p>Ad trackers are technologies that identify and collect information about users. These technologies usually (but not always) appear with some level of consent from the website owners. They are used to collect website user analytics, for ad-targeting, and by data brokers and other information collectors to build user profiles. They usually take the form of Javascript scripts or web beacons.</p>\n\n\n\n<p>Web beacons are small 1px by 1px images that are placed on a website for tracking purposes by third parties. Using this technique, a third party can determine behaviors including when a particular user went to a site, the kind of browser, and what IP address it used.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>Blacklight checks all network requests against the <a href=\"https://easylist.to/\" target=\"_blank\">EasyPrivacy</a> list, which contains URLs and URL substrings that are known to be used for tracking. Blacklight monitors the network activity for requests being made to these URLs and substrings.</p>\n\n\n\n<p>Blacklight only records requests being made to third-party domains. It ignores any URL patterns in the EasyPrivacy list that match a first-party domain. For example, the EFF hosts its own analytics, and that results in requests to “<a href=\"https://anon-stats.eff.org\" target=\"_blank\">https://anon-stats.eff.org</a>,” their analytics subdomain. If a user types in <em>https://eff.org</em>, Blacklight does not consider calls to <em>https://anon-stats.eff.org</em> to be a third-party request.</p>\n\n\n\n<p>We look up these third-party domains in DuckDuckGo’s Tracker Radar data set to find out who owns them, how prevalent they are, and what kinds of services they provide. We only include third-party domains that belong to the “Ad Motivated Tracking” categories defined in the <a href=\"https://github.com/duckduckgo/tracker-radar/blob/master/docs/CATEGORIES.md\" target=\"_blank\">Tracker Radar data set</a>.</p>\n\n\n\n\t\n<div class=\"heading heading--level3\">\n\t\n\t<a href=\"#facebook-pixel\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h3 id=\"facebook-pixel\" class=\"heading__text\">Facebook&nbsp;Pixel</h3>\n</div>\n\n\n<p>The Facebook pixel is a piece of code Facebook created that allows other websites to target their visitors later with ads on Facebook. Common actions that can be tracked by pixel include viewing a page or specific content, adding payment information, or making a purchase.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>Blacklight looks for network requests from the site going to Facebook and looks in the URL query parameters for data that matches the schema of what is described in the documentation for Facebook’s pixel. We look for three different types of data: “<a href=\"https://web.archive.org/web/20200625095908/https:/developers.facebook.com/docs/facebook-pixel/reference/\" target=\"_blank\">standard</a> events,” “custom events” and <a href=\"https://web.archive.org/web/20200413102542/https:/developers.facebook.com/docs/facebook-pixel/advanced/advanced-matching\" target=\"_blank\">“advanced matching</a>.”</p>\n\n\n\n\t\n<div class=\"heading heading--level3\">\n\t\n\t<a href=\"#google-analytics-remarketing-audiences\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h3 id=\"google-analytics-remarketing-audiences\" class=\"heading__text\">Google Analytics’ “Remarketing&nbsp;Audiences”</h3>\n</div>\n\n\n<p>Google Analytics is the most popular website analytics platform in use today. <a href=\"https://whotracks.me/trackers/google_analytics.html\" target=\"_blank\">According to whotracks.me 41.7 percent of web traffic is analyzed by Google Analytics</a>. While most of the functionality of this service is to provide developers and website owners with information on how their audience is engaging with their website, the tool also allows the website to make custom audience lists based on user behavior and then target ads to those visitors across the internet using Google Ads and Display &amp; Video 360. Blacklight examines inspected sites for the presence of the tool, not how it is used.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>Blacklight looks for network requests from the inspected site going to a URL beginning with “stats.g.doubleclick” that also contains the “UA-” Google account identifier prefix. This is described in more detail in <a href=\"https://web.archive.org/web/20200615214845/https:/developers.google.com/analytics/resources/concepts/gaConceptsTrackingOverview\" target=\"_blank\">Google Analytics developer documentation</a>.</p>\n\n\n<div class=\"heading heading--level2\">\n\t\n\t<a href=\"#survey\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h2 id=\"survey\" class=\"heading__text\">Survey</h2>\n</div>\n\n\n<p>To determine the prevalence of tracking technologies on the internet both for context in Blacklight and for accompanying news stories, we ran the 100,000 most popular websites as defined by the <a href=\"https://tranco-list.eu/list/V3KN/full\" target=\"_blank\">Tranco List</a> through Blacklight. The data and analysis code can be found on <a href=\"https://github.com/the-markup/investigation-blacklight-the-high-cost-of-free\" target=\"_blank\">Github</a> . Blacklight successfully captured data for 81,617 of those URLs. The rest either failed to resolve, timed out on multiple attempts, or didn’t load a webpage. The percentages listed below are for the 81,617 successful captures.</p>\n\n\n\n<p>Some of the analysis goes beyond what appears on the tool. The key findings from our survey are as follows:</p>\n\n\n\n  <ul class=\"list\">\n\n  <li class='list__item'>6 percent of websites used canvas fingerprinting.</li>\n  \n  <li class='list__item'>15 percent of websites loaded scripts from known session recorders.</li>\n  \n  <li class='list__item'>4 percent of websites logged keystrokes.</li>\n  \n  <li class='list__item'>13 percent of sites did not load any third-party cookies or tracking network requests.</li>\n  \n  <li class='list__item'>The median number of third-party cookie loads was three.</li>\n  \n  <li class='list__item'>The median number of ad trackers loaded was seven.</li>\n  \n  <li class='list__item'>74 percent of sites loaded Google tracking technology.</li>\n  \n  <li class='list__item'>33 percent of websites loaded Facebook tracking technology.</li>\n  \n  <li class='list__item'>50 percent of sites used Google Analytics’ remarketing feature.</li>\n  \n  <li class='list__item'>30 percent of sites used the Facebook pixel.</li>\n  \n</ul>\n  </ul>\n\n\n\n<p>We classified as Google tracking technology any network requests being made to any of the following domains:</p>\n\n\n\n  <ul class=\"list\">\n\n  <li class='list__item'>google-analytics.com</li>\n  \n  <li class='list__item'>Doubleclick.net</li>\n  \n  <li class='list__item'>Googletagmanager.com</li>\n  \n  <li class='list__item'>Googletagservices</li>\n  \n  <li class='list__item'>Googlesyndication.com</li>\n  \n  <li class='list__item'>Googleadservices</li>\n  \n  <li class='list__item'>2mdn.net</li>\n  \n</ul>\n  </ul>\n\n\n\n<p>We classified as Facebook tracking technology any network requests being made to any of the following Facebook domains:</p>\n\n\n\n  <ul class=\"list\">\n\n  <li class='list__item'>facebook.com</li>\n  \n  <li class='list__item'>Facebook.net</li>\n  \n  <li class='list__item'>atdmt.com</li>\n  \n</ul>\n  </ul>\n\n\n<div class=\"heading heading--level2\">\n\t\n\t<a href=\"#limitations\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h2 id=\"limitations\" class=\"heading__text\">Limitations</h2>\n</div>\n\n\n<p>Blacklight’s analysis is limited by four main factors: </p>\n\n\n\n  <ol class=\"list\">\n\n  <li class='list__item'>It is a simulation of a user behavior, not actual user behavior, and could thus trigger different surveillance responses. </li>\n  \n  <li class='list__item'>The inspected website could be surveilling user activities for benign purposes. </li>\n  \n  <li class='list__item'>False positives (possible with canvas fingerprinting): Very occasionally, legitimate uses of the HTML canvas match the heuristics Blacklight uses to identify canvas fingerprinting. </li>\n  \n  <li class='list__item'>False negatives: The stack tracing technique used by Blacklight’s Javascript instrumentation might incorrectly attribute a call to a window API method we are monitoring to a library included by a script. For example, if a fingerprinting script uses jQuery to do some calls, jQuery might end up on the top of the stack and Blacklight will attribute the call to that instead of the script that's actually responsible. This possibility was brought to our attention by researchers who reviewed our methodology; we have not seen it occur in our tests or our survey of the 100,000 most popular sites.</li>\n  \n</ul>\n  </ol>\n\n\n\n  <div id=\"block25\" class=\"promotion print-hidden js-promotion promotion--donate  promotion--left\" data-promotion=\"donate-report-deeply-and-fix-things-3-202108c\">\n    <div class=\"promotion__inner\" data-href=\"/donate-202109c\">\n        <h2 class=\"promotion__heading\"><a href=\"/donate-202109c\" class=\"promotion__link js-promotion-link\">Report Deeply and Fix Things</a></h2>\n      \n      <div class=\"promotion__content\">\n          <p class=\"promotion__description\">Because it turns out moving fast and breaking things broke some super important things.</p>\n          \n            <a href='/donate-202109c' class='button button--important js-promotion-link' >\n    <span class='button__label button__label--main'>\n        \n        Give Now\n    </span></a>\n          \n        \n        \n      </div>\n    </div>\n  </div>\n\n\n\n<p>Regarding false positives, when Blacklight visits a site, that site can see the request is coming from computers hosted by Amazon’s AWS cloud infrastructure. Because botnets are often run on cloud infrastructure, our tool could trigger bot-detection software on the website, including canvas fingerprinting. This could result in false positives for the canvas fingerprinting test where the purpose of the test is not to track users but rather to detect botnets.</p>\n\n\n\n<p>In order to test this, we took a random sample of 1,000 sites from the top websites from the Tranco List that we had already run through Blacklight on AWS. We ran this sample through Blacklight software on our computer locally at a residential IP address in New York City. We concluded that the results of a Blacklight inspection locally are very similar, but not exactly the same, as running it on cloud infrastructure.</p>\n\n\n\n<div id=\"results-for-sample-local-computer-and-aws\" class=\"block-table js-table\">\n  \n    <a href=\"#results-for-sample-local-computer-and-aws\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n    <h3 class=\"block-table__heading\">Results for Sample: Local Computer and AWS</h3>\n  \n  <div class=\"block-table__body\">\n    <table>\n        \n          <tr><th>\n              <span class=\"block-table__header-label\">\n                \n              </span>\n            </th><th>\n              <span class=\"block-table__header-label\">Local\n                \n              </span>\n            </th><th>\n              <span class=\"block-table__header-label\">AWS\n                \n              </span>\n            </th></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"1\"><td>Canvas fingerprinting</td><td>8%</td><td>10%</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"2\"><td>Session recording</td><td>18%</td><td>19%</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"3\"><td>Key logging</td><td>4%</td><td>6%</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"4\"><td>Median number of third-party cookies</td><td>4</td><td>5</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"5\"><td>Median number of third-party trackers recorded</td><td>7</td><td>8</td></tr>\n        \n      </table></div></div>\n\n\n<p>Not all surveillance activity that is imperceptible to the user is necessarily malicious. For instance, canvas fingerprinting is used for fraud prevention because <a href=\"https://docs.fingerprintjs.com/pro/user-identification\" target=\"_blank\">it can identify a device</a>. And key logging can be used to provide autocomplete functionality.</p>\n\n\n\n<p>Blacklight does not attempt to identify the intent of any particular tracking technology it finds.</p>\n\n\n\n<p>Nor can Blacklight determine exactly how a website uses the data it collects on a user when loading session recording scripts and monitoring user behavior, such as mouse movements and keystrokes.</p>\n\n\n\n<p>Blacklight does not check the terms of use or privacy policies of the websites it visits to see whether they disclose their surveillance activities.</p>\n\n\n\n<hr class=\"wp-block-separator\"><div class=\"heading heading--level2\">\n\t\n\t<a href=\"#appendix\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h2 id=\"appendix\" class=\"heading__text\">Appendix</h2>\n</div><p><strong>Input field values</strong></p>\n\n\n\n<p>The table below lists the values we programmed Blacklight to type into input fields on websites. We used the Mozilla <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete\" target=\"_blank\">autocomplete attribute write-up as our reference</a>. Blacklight also checks for the base64, md5, sha256 and sha512 versions of these values.</p>\n\n\n\n<div class=\"block-table js-table\">\n  \n  <div class=\"block-table__body\">\n    <table>\n        \n          <tr><th>\n              <span class=\"block-table__header-label\">Autocomplete Attribute\n                \n              </span>\n            </th><th>\n              <span class=\"block-table__header-label\">Blacklight Value\n                \n              </span>\n            </th></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"1\"><td>Date</td><td>01/01/2026</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"2\"><td>Email</td><td>blacklight-headless@themarkup.org</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"3\"><td>Password</td><td>SUPERS3CR3T_PASSWORD</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"4\"><td>Search</td><td>TheMarkup</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"5\"><td>Text</td><td>IdaaaaTarbell</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"6\"><td>URL</td><td>https://themarkup.org</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"7\"><td>Organization</td><td>The Markup</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"8\"><td>Organization Title</td><td>Non-profit newsroom</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"9\"><td>Current Password</td><td>S3CR3T_CURRENT_PASSWORD</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"10\"><td>New Password</td><td>S3CR3T_NEW_PASSWORD</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"11\"><td>Username</td><td>idaaaa_tarbell</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"12\"><td>Family Name</td><td>Tarbell</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"13\"><td>Given Name</td><td>Idaaaa</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"14\"><td>Name</td><td>IdaaaaTarbell</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"15\"><td>Street Address</td><td>PO Box #1103</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"16\"><td>Address Line 1</td><td>PO Box #1103</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"17\"><td>Postal Code</td><td>10159</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"18\"><td>CC-Name</td><td>IDAAAATARBELL</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"19\"><td>CC-Given-Name</td><td>IDAAAA</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"20\"><td>CC-Family-Name</td><td>TARBELL</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"21\"><td>CC-Number</td><td>4479846060020724</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"22\"><td>CC-Exp</td><td>01/2026</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"23\"><td>CC-Type</td><td>Visa</td></tr>\n        \n      \n        \n          <tr class=\"block-table__row\" data-row=\"24\"><td>Transaction Amount</td><td>13371337</td></tr>\n        \n      </table></div></div>\n\n<div class=\"heading heading--level2\">\n\t\n\t<a href=\"#acknowledgements\" class=\"heading__link\">&#x21a9;&#xFE0E; link</a>\n\t<h2 id=\"acknowledgements\" class=\"heading__text\"><strong>Acknowledgements</strong></h2>\n</div>\n\n\n<p>We thank Gunes Acar (KU Leven), Steven Englehardt (Mozilla), and Arvind Narayanan and Jonathan Mayer (Princeton, CITP) for comments and suggestions on an earlier draft.</p>\n\n\n\n<hr class=\"wp-block-separator\"><p></p></div>\n        <div class=\"article-donate js-promotion print-hidden\">\n          <div class=\"article-donate__content\"><div class='article-donate__body'>\n                <figure class=\"article-donate__visual video-loop-wrapper\">\n                  \n                    <picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2021/11/banner-720x113.jpg, https://mrkp-static-production.themarkup.org/uploads/2021/11/banner-1280x200.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2021/11/banner-720x113.jpg, https://mrkp-static-production.themarkup.org/uploads/2021/11/banner-1280x200.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2021/11/banner-720x113.jpg\" alt=\"\" class=\"\">\n</picture>\n                  \n                    <div class=\"js-video-loop article-donate__video uses-motion\" data-desktop=\"https://mrkp-static-production.themarkup.org/uploads/2021/11/banner-1152.mp4\"  data-mobile=\"https://mrkp-static-production.themarkup.org/uploads/2021/11/banner-688.mp4\" data-href=\"/donate-footer\"></div>\n                  </figure>\n              <p>How did we do that?</p>\n<p>Independent journalism. Tech expertise. Data-driven analysis. And you.</p>\n<p>That’s what drives The Markup and what makes it the unparalleled nonprofit newsroom for using technology to hold technology to account. </p>\n<p>Reader support is an essential piece of our equation. Building a better future is not only possible, it’s happening right now—thanks to you.</p>\n\n              \n                <a href='/donate-footer' class='button button--important ' >\n    <span class='button__label button__label--main'>\n        \n        Donate Now\n    </span></a>\n              \n            </div>\n          </div>\n        </div>\n      <footer class=\"article-footer print-hidden\">\n        <div class=\"article-footer-titles\">\n          <h2 class=\"article-footer-titles__overline\">You just read</h2>\n          <p class=\"article-footer-titles__title\">How We Built a Real-time Privacy Inspector</p><p class=\"article-footer-titles__series\">From the series —\n    \n\n      <a href=\"/series/blacklight\">Blacklight</a> and \n\n      <a href=\"/series/show-your-work\">Show Your Work</a></p><div class=\"article-footer-titles__share\">\n            <h2 class='article-footer-titles__overline'>Share This Article</h2>\n            \n              <a  class='button  js-CopyLink' >\n    <span class='button__label button__label--main'>\n        \n        Copy Link\n    </span></a>\n            \n            \n              \n                <a  class='button  js-open-republisher' >\n    <span class='button__label button__label--main'>\n        \n        Republish\n    </span></a>\n              \n            \n          </div>\n        </div>\n\n        <div class=\"article-footer__details print-hidden\">\n          \n          <h3 class=\"article-details__overline\">Credits</h3>\n          <div class=\"article-authors\">\n            \n            <ul class=\"article__author-list\">\n            \n              <li class=\"article__author-list-item\">\n                \n                <div class='article__author-headshot'>\n                  \n                    <picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/02/0009_Surya-60x60.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/02/0009_Surya-120x120.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/02/0009_Surya-120x120.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/02/0009_Surya-240x240.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2020/02/0009_Surya-60x60.jpg\" alt=\"\" class=\"article__author-image\">\n</picture>\n                  \n                </div>\n                \n                <p class=\"article__author-description\">\n                  \n                    <a href=\"https://themarkup.org/people/surya-mattu/\" class=\"article__author-link\">Surya Mattu</a>\n                    <span class='article__author-non-link'>Senior Data Engineer and Investigative Data Journalist</span>\n                  </p>\n              </li><li class=\"article__author-list-item\">\n                \n                <div class='article__author-headshot'>\n                  \n                    <picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/01/Aaron-60x60.jpeg, https://mrkp-static-production.themarkup.org/uploads/2020/01/Aaron-120x120.jpeg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/01/Aaron-120x120.jpeg, https://mrkp-static-production.themarkup.org/uploads/2020/01/Aaron-240x240.jpeg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2020/01/Aaron-60x60.jpeg\" alt=\"Headshot of Aaron Sankin\" class=\"article__author-image\">\n</picture>\n                  \n                </div>\n                \n                <p class=\"article__author-description\">\n                  \n                    <a href=\"https://themarkup.org/people/aaron-sankin/\" class=\"article__author-link\">Aaron Sankin</a>\n                    <span class='article__author-non-link'>Investigative Reporter </span>\n                  </p>\n              </li>\n            </ul>\n\n            \n            \n          </div>\n          \n\n        </div>\n\n      </footer>\n    </div>\n  \n</article>\n\n<section id=\"republisher\" class=\"republish-section\" data-id=\"11520\" aria-hidden=\"true\">\n  <div class='republish-button-wrapper'>\n    \n      <a  class='button button--navy republish-button js-close-republisher' >\n    <span class='button__label button__label--main'>\n        \n        Close\n    </span></a>\n    \n  </div>\n\n  <div class=\"republish-inner\">\n    <div class=\"republish-details\">\n      <div class='republish-overline'>Republish</div>\n      <h2 class=\"republish-heading\">\n        How We Built a Real-time Privacy Inspector\n      </h2>\n      <div class=\"republish-instructions\">\n        <p>We’re happy to make this story available to republish for free under the conditions of an <a href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\">Attribution–NonCommercial–No Derivatives Creative Commons</a> license. Please adhere to the following:</p>\n<ul>\n<li><strong>Notify us:</strong> Please email us at <a href=\"mailto:republish@themarkup.org\">republish@themarkup.org</a> to let us know if you’ve republished the story.</li>\n<li><strong>Give prominent credit to The Markup and its journalists</strong>: Credit our authors at the top of the article and any other byline areas of your publication.</li>\n<li><strong>Do not edit the article:</strong> The complete, unaltered article text must be published. If you wish to translate the article, please contact us for approval.</li>\n<li><strong>Access to the article must remain free:</strong> Do not sell access to this article or place it behind a paywall, but you can republish our articles on sites with ads.</li>\n<li><strong>Images may not be available for republication:</strong> Not all of the imagery used in articles published on our site are licensed under Creative Commons. Some images are from commercial providers who do not allow their images to be republished without permission or payment. If you wish to use any image from our articles, email us at <a href=\"mailto:republish@themarkup.org\">republish@themarkup.org</a> for guidance.</li>\n<li><strong>Use the provided HTML to republish this article on your site:</strong> Simply copy the HTML that we have provided and publish it as is on your website. The provided HTML snippet includes all text formatting and hyperlinks, the author byline, and credit to The Markup. If the HTML code for The Markup credit image is incompatible with your CMS, let us know if you remove it.</li>\n</ul>\n\n      </div>\n    </div>\n\n    <div class=\"republish-content\">\n      <div class=\"republish-content-inner\">\n        <textarea class=\"republish-markup\" id=\"republisher-markup\" readonly resize=\"false\">Some placeholder text</textarea>\n      </div>\n      \n        <a  class='button button--navy republish-copy-button js-copy-republishing' >\n    <span class='button__label button__label--main'>\n        \n        Copy HTML\n    </span></a>\n      \n    </div>\n  </div>\n</section>\n\n\n  <section class=\"article-footer__latest print-hidden\">\n    \n      \n        <div class='section-label section-label--center '>\n    <h2 class='section-label__text'>The Latest</h2>\n</div>\n      \n\n      <div class=\"latest-articles__list article-cards--3up\">\n        \n          <article class=\"article-card  article-card--has-image \"\n  >\n  <a href=\"https://themarkup.org/privacy/2022/04/01/following-markup-investigation-u-s-regulators-questioned-life360s-data-practices\" class=\"article-card__link\">\n    \n      <div class=\"article-card__art\">\n        <figure class=\"article-card__figure\">\n          \n            <picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2022/03/life-360-follo-v2-360x203.jpg, https://mrkp-static-production.themarkup.org/uploads/2022/03/life-360-follo-v2-750x422.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2022/03/life-360-follo-v2-750x422.jpg, https://mrkp-static-production.themarkup.org/uploads/2022/03/life-360-follo-v2-1140x641.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2022/03/life-360-follo-v2-360x203.jpg\" alt=\"Illustration of the Life360 logo broken into fragments, surrounded by location pins that are missing pixels.\" class=\"article-card__img\">\n</picture>\n          \n        </figure>\n      </div>\n    \n    <div class=\"article-card__content\">\n      <div class=\"article-card__content-inner\">\n          <p class=\"article-card-type\"><span class=\"article-card-type__series\">Privacy</span></p>\n        <h3 class=\"article-card__headline \">\n\n          \n            Following Markup Investigation, U.S. Regulators Questioned Life360’s Data Practices\n          \n        </h3><p class=\"article-card__subhead\">The family safety company was approached by regulators about its data&nbsp;sales</p><time class=\"article-card__date\" datetime=\"2022-04-01T10:00:00\">April 1, 2022 10:00 ET</time></div>\n    </div>\n  </a>\n</article>\n        \n          <article class=\"article-card  article-card--has-image \"\n  >\n  <a href=\"https://themarkup.org/ask-the-markup/2022/03/30/can-chatrooms-replace-courtrooms\" class=\"article-card__link\">\n    \n      <div class=\"article-card__art\">\n        <figure class=\"article-card__figure\">\n          \n            <picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2022/03/atm-courtroom-360x203.jpg, https://mrkp-static-production.themarkup.org/uploads/2022/03/atm-courtroom-750x422.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2022/03/atm-courtroom-750x422.jpg, https://mrkp-static-production.themarkup.org/uploads/2022/03/atm-courtroom-1140x641.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2022/03/atm-courtroom-360x203.jpg\" alt=\"Illustration of a man sitting in an armchair, surrounded by a maze of chat boxes, dollar signs and hands.\" class=\"article-card__img\">\n</picture>\n          \n        </figure>\n      </div>\n    \n    <div class=\"article-card__content\">\n      <div class=\"article-card__content-inner\">\n          <p class=\"article-card-type\"><span class=\"article-card-type__series\">Ask The Markup</span><span class=\"article-card-type__series\">Remote Justice</span></p>\n        <h3 class=\"article-card__headline \">\n\n          \n            Can Chatrooms Replace Courtrooms?\n          \n        </h3><p class=\"article-card__subhead\">Online dispute resolution systems have many problems, but supporters believe they are better than costly, slow&nbsp;courts</p><time class=\"article-card__date\" datetime=\"2022-03-30T08:00:00\">March 30, 2022 08:00 ET</time></div>\n    </div>\n  </a>\n</article>\n        \n          <article class=\"article-card  article-card--has-image \"\n  >\n  <a href=\"https://themarkup.org/privacy/2022/03/21/lawsuit-highlights-how-little-control-brokers-have-over-location-data\" class=\"article-card__link\">\n    \n      <div class=\"article-card__art\">\n        <figure class=\"article-card__figure\">\n          \n            <picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2022/03/xmode-lost-track-edited-360x203.png, https://mrkp-static-production.themarkup.org/uploads/2022/03/xmode-lost-track-edited-750x422.png 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2022/03/xmode-lost-track-edited-750x422.png, https://mrkp-static-production.themarkup.org/uploads/2022/03/xmode-lost-track-edited-1140x641.png 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2022/03/xmode-lost-track-edited-360x203.png\" alt=\"Illustration of an X situated in a maze of rooms with location pins and ladders.\" class=\"article-card__img\">\n</picture>\n          \n        </figure>\n      </div>\n    \n    <div class=\"article-card__content\">\n      <div class=\"article-card__content-inner\">\n          <p class=\"article-card-type\"><span class=\"article-card-type__series\">Privacy</span></p>\n        <h3 class=\"article-card__headline \">\n\n          \n            Lawsuit Highlights How Little Control Brokers Have Over Location Data\n          \n        </h3><p class=\"article-card__subhead\">The case suggests this loosely regulated industry can’t deliver on its promises of&nbsp;privacy</p><time class=\"article-card__date\" datetime=\"2022-03-21T08:00:00\">March 21, 2022 08:00 ET</time></div>\n    </div>\n  </a>\n</article>\n        \n      </div>\n    \n  </section>\n\n\n\n\n  </div>\n\n  \n\n<footer class=\"site-footer js-Footer\">\n  <div class=\"site-footer-inner\">\n\n    <a href='/' class='footer-logo'>\n      <span class=\"visually-hidden\">Return to The Markup's homepage</span>\n      <svg><use xlink:href=\"#markup-logo\"></use></svg>\n    </a>\n\n    <div class='footer-donate'>\n      <p class='footer-donate__description'>\n        Your contributions help us investigate how technology influences our&nbsp;society.\n      </p>\n\n      <div class='footer-donate__arrow'></div>\n\n      \n        <a href='/donate' class='button button--navy ' >\n    <span class='button__label button__label--main'>\n        \n        Donate\n    </span></a>\n      \n    </div>\n\n    <div class=\"footer-list footer-list--information\">\n      <ul class=\"footer-nav\">\n        \n          \n            <li class=\"footer-nav__item\">\n              \n      \n      \n      <a href=\"/about\" class=\"footer-nav__link\">About Us</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      \n      \n      <a href=\"/donors\" class=\"footer-nav__link\">Our Donors</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      \n      \n      <a href=\"/ethics\" class=\"footer-nav__link\">Ethics Policy</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      <a href=\"/events/\" class=\"footer-nav__link\">Events</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      \n      \n      <a href=\"/board-of-directors\" class=\"footer-nav__link\">Board of Directors</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      <a href=\"https://boards.greenhouse.io/themarkup\" class=\"footer-nav__link\">Jobs</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      <a href=\"/team\" class=\"footer-nav__link\">Team</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      \n      \n      <a href=\"/tips\" class=\"footer-nav__link\">Have a Tip?</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      <a href=\"/newsletter\" class=\"footer-nav__link\">Newsletters</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      <a href=\"/2020/02/25/editor-letter-julia-angwin\" class=\"footer-nav__link\">A Letter from the Editor</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      \n      \n      <a href=\"/privacy\" class=\"footer-nav__link\">Privacy Policy</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      <a href=\"/2020/02/25/president-letter-nabiha-syed\" class=\"footer-nav__link\">A Letter from the President</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      \n      \n      <a href=\"/terms\" class=\"footer-nav__link\">Terms of Use</a>\n    \n            </li>\n          \n            <li class=\"footer-nav__item\">\n              \n      \n      \n      <a href=\"/announcements\" class=\"footer-nav__link\">Announcements</a>\n    \n            </li>\n          \n        \n      </ul>\n    </div>\n\n    <div class=\"footer-list footer-list--follow\">\n      <ul class='footer-nav'>\n        <li class='footer-nav__item'>\n          <a href=\"https://www.facebook.com/teammarkup/\" target=\"_blank\" class=\"footer-nav__link footer-nav__link--facebook\">\n            <svg><use xlink:href='#icon-facebook'></use></svg>Facebook\n          </a>\n        </li>\n        <li class='footer-nav__item'>\n          <a href=\"https://www.twitter.com/themarkup/\" target=\"_blank\" class=\"footer-nav__link footer-nav__link--twitter\">\n            <svg><use xlink:href='#icon-twitter'></use></svg>Twitter\n          </a>\n        </li>\n        <li class='footer-nav__item'>\n          <a href=\"https://www.instagram.com/the.markup/\" target=\"_blank\" class=\"footer-nav__link footer-nav__link--instagram\">\n            <svg><use xlink:href='#icon-instagram'></use></svg>Instagram\n          </a>\n        </li>\n        <li class='footer-nav__item'>\n          <a href=\"https://joinsubtext.com/textthemarkup\" target=\"_blank\" class=\"footer-nav__link footer-nav__link--subtext\">\n            <svg><use xlink:href='#icon-subtext'></use></svg>Subtext\n          </a>\n        </li>\n        <li class='footer-nav__item'>\n          <a href='/feeds/rss.xml' target=\"_blank\" class=\"footer-nav__link footer-nav__link--rss\">\n            <svg><use xlink:href='#icon-rss'></use></svg>RSS Feed\n          </a>\n        </li>\n      </ul>\n    </div>\n\n    <div class=\"footer-newsletter\">\n      <p class=\"footer-newsletter__description\">\n        Sign up to get The Markup newsletter in your inbox every&nbsp;Saturday.\n      </p>\n  \n      \n        <form action=\"https://www.getrevue.co/profile/themarkup/add_subscriber\" method=\"post\" class=\"subscribe  subscribe--navy\" id=\"revue-form\" name=\"revue-form\"  target=\"_blank\">\n    <div class='subscribe__input-wrapper'>\n        <label class='visually-hidden' for=\"member_email\">Enter your email address to signup to our newsletter</label>\n        <input placeholder=\"Email address\" type=\"email\" name=\"member[email]\" class=\"subscribe__input\" id=\"member_email\">\n    </div>\n    <div class='button button--navy'>\n        <button type=\"submit\" value=\"Subscribe\" name=\"member[subscribe]\" class=\"subscribe__submit button__label\" id=\"member_submit\">\n            <div class='subscribe__label'>Subscribe</div>\n        </button>\n    </div>\n</form>\n      \n    </div>\n  </div>\n</footer>\n\n  <script src=\"https://mrkp-static-production.themarkup.org/static/dist/main.93fe5467.js\"></script>\n</body>\n</html>","oembed":false,"readabilityObject":{"title":"How We Built a Real-time Privacy Inspector – The Markup","content":"<div id=\"readability-page-1\" class=\"page\"><div>\n        \n        <p>Blacklight is a real-time website privacy inspector.</p>\n\n\n\n<p>The tool emulates how a user might be surveilled while browsing the web. Users type a URL into Blacklight, and it visits the requested website, scans for known types of privacy violations, and returns an instant privacy analysis of the inspected site.</p>\n\n\n\n<p>Blacklight works by visiting each website with a headless browser, running custom software built by The Markup. This software monitors which scripts on that website are potentially surveilling the user by performing seven different tests, each investigating a specific, known method of surveillance.</p>\n\n\n\n<p>The types of surveillance that Blacklight seeks to identify are:</p>\n\n\n\n  <ul>\n\n  <li>Third-party cookies</li>\n  \n  <li>Ad trackers</li>\n  \n  <li>Key logging</li>\n  \n  <li>Session recording</li>\n  \n  <li>Canvas fingerprinting</li>\n  \n  <li>Facebook tracking</li>\n  \n  <li>Google Analytics “Remarketing Audiences”</li>\n  \n</ul>\n  \n\n\n\n<p>These are defined later in this document, as are their limitations.</p>\n\n\n\n<p>Blacklight was built using the NodeJS Javascript environment, the <a href=\"https://pptr.dev/\" target=\"_blank\">Puppeteer</a> Node library, which provides high-level control over a <a href=\"https://www.chromium.org/\" target=\"_blank\">Chromium</a> (open-source Chrome) browser. When a user enters a URL into Blacklight, the tool opens a headless web browser with a fresh profile and visits its homepage as well as an additional randomly selected page deeper inside the same website.</p>\n\n\n\n\n\n<p>While the browser is visiting the website, it runs custom software in the background that monitors scripts and network requests to observe when and how user data is being collected.&nbsp;&nbsp; To monitor scripts, Blacklight modifies <a href=\"https://github.com/the-markup/blacklight-collector/blob/main/src/plugins/fingerprinting-apis.ts\" target=\"_blank\">various fingerprintable properties</a> of the browser’s Window API. This allows Blacklight to log which script made a particular function call, using the <a href=\"https://www.stacktracejs.com/\" target=\"_blank\">Stacktrace-js</a> package. The network requests are collected using a monitoring tool included in <a href=\"https://pptr.dev/#?product=Puppeteer&amp;version=v5.2.1&amp;show=api-event-request\" target=\"_blank\">Puppeteer’s API</a>.</p>\n\n\n\n<p>Blacklight uses the script data and network requests to run the seven tests described above. Afterward, it closes the browser and generates an instant report for the user.</p>\n\n\n\n<p>It records a list of all the URLs that the inspected website requests. In addition, it makes a list of all domains and subdomains that were requested. The tool we provide to the public will not save those lists unless the user chooses to share results with us through an option in the tool.</p>\n\n\n\n<p>We define domain names using the <a href=\"https://web.archive.org/web/20200615204307/https:/github.com/remusao/tldts/blob/master/packages/tldts-core/src/domain.ts\" target=\"_blank\">Public Suffix + 1 method</a>. We define <em>first-party domain</em> as any domain that matches the website visited, including subdomains. We define <em>third-party</em> as any domain that does not match the website visited. The tool compares the list of third-party domains from the website requests with DuckDuckGo’s <a href=\"https://github.com/duckduckgo/tracker-radar\" target=\"_blank\">Tracker Radar</a> dataset.</p>\n\n\n\n<p>This data merge allows Blacklight to add the following information about the third-party domains found on the inspected site:</p>\n\n\n\n  <ol>\n\n  <li>Name of the domain’s owner.</li>\n  \n  <li><a href=\"https://github.com/duckduckgo/tracker-radar/blob/master/docs/CATEGORIES.md\">Categories assigned by DuckDuckGo</a> to each domain that attempt to describe its observed purpose or intent.</li>\n  \n\n  </ol>\n\n\n\n<p>This additional information about third parties is provided to users as context for Blacklight’s instant test results. Among other things, this information is used to count the number of advertising-related trackers present on a given website.</p>\n\n\n\n<p>Blacklight runs tests based on the root URL of the page entered by a user into the tool. For example, if a user types in <em>https://example.com/sports</em>, Blacklight starts its inspection at <em>https://example.com</em> and disregards the <em>/sports</em> path. If a user types in <em>https://sports.example.com</em>, Blacklight starts its inspection at <em>https://sports.example.com</em>.</p>\n\n\n\n  \n\n\n\n<p>Blacklight results for each requested domain are cached for 24 hours, and these cached reports are delivered in response to subsequent user requests for the same website during those 24 hours. This is designed to prevent the tool from being used maliciously to overwhelm a website with thousands of automated visits.</p>\n\n\n\n<p>Blacklight will also tell users whether their results are high, low, or about average compared with what the tool found on the 100,000 most popular websites as ranked by the <a href=\"https://tranco-list.eu/\" target=\"_blank\">Tranco List</a>. This is described in more detail below.&nbsp;</p>\n\n\n\n<p>The Blacklight code base is open source and available on <a href=\"https://github.com/the-markup/blacklight-collector\" target=\"_blank\">Github</a>; it can also be downloaded as <a href=\"https://www.npmjs.com/package/@themarkup/blacklight-collector\" target=\"_blank\">an NPM module</a>.</p>\n\n\n\n<p>There are limitations to our analysis. Blacklight emulates a user visiting a website, but its automated behavior is different from human behavior, and that behavior may trigger different types of surveillance. For instance, an automated request might trigger more fraud detection but fewer ads.</p>\n\n\n\n<p>Given the dynamic nature of web-based technology, it is also possible that some of these tests will become out-of-date over time. And new legitimate-use cases for the techniques Blacklight flags could emerge that would not be listed in the tool’s caveats.</p>\n\n\n\n<p>For this reason, Blacklight results should not be taken as the final word on potential privacy violations by a given website. Rather, they should be treated as an initial automated inspection that requires further investigation before a definitive claim can be made.</p>\n\n\n\n\n\n<p>Blacklight is built on the foundation of various privacy census tools built over the past decade.</p>\n\n\n\n<p>It runs Javascript instrumentation, which enables it to monitor calls to the browsers’ Javascript API. This is based on <a href=\"https://senglehardt.com/papers/openwpm_03-2015.pdf\" target=\"_blank\">OpenWPM</a>, an open-source tool for web privacy measurement built by Steven Englehardt, Gunes Acar, Dillon Reisman, and Arvind Narayanan at Princeton University. It is now maintained by Mozilla.</p>\n\n\n\n<p>OpenWPM was used to power <a href=\"https://webtap.princeton.edu/\" target=\"_blank\">Princeton’s Web Transparency and Accountability Project</a>, which monitored websites and services to discover companies’ data collection, data use, and deceptive practices.</p>\n\n\n\n<p>Through numerous studies conducted between 2015 and 2019, <a href=\"https://webtransparency.cs.princeton.edu/webcensus/data-release/\" target=\"_blank\">Princeton researchers uncovered</a> the presence of many privacy-infringing technologies. These included <a href=\"https://www.cs.princeton.edu/~arvindn/publications/OpenWPM_1_million_site_tracking_measurement.pdf\" target=\"_blank\">browser fingerprinting and cookie syncing</a> as well as <a href=\"https://freedom-to-tinker.com/tag/noboundaries/\" target=\"_blank\">how session replay scripts collect passwords and sensitive user data</a>. One notable example is the <a href=\"https://freedom-to-tinker.com/2017/11/15/no-boundaries-exfiltration-of-personal-data-by-session-replay-scripts/\" target=\"_blank\">exfiltration of prescription data and health-conditions data from walgreens.com.</a></p>\n\n\n\n<p>Five of the seven tests Blacklight runs are based on the techniques described in the Princeton research mentioned above. These tests are canvas fingerprinting, key logging, session recording, and third-party cookies.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\n\n\n\n<p>OpenWPM incorporates code and techniques from other privacy inspection tools, including <a href=\"http://fourthparty.info/\" target=\"_blank\">FourthParty</a>, <a href=\"https://privacybadger.org/\" target=\"_blank\">Privacy Badger</a>, and <a href=\"https://www.cosic.esat.kuleuven.be/fpdetective/#paper\" target=\"_blank\">FP Detective</a>:</p>\n\n\n\n  <ul>\n\n  <li><strong>FourthParty</strong> was an open-source platform for measuring dynamic web content <a href=\"https://cyberlaw.stanford.edu/blog/2011/08/fourthparty-new-approach-web-measurement\">that was released in August 2011</a> and maintained until 2014. It has been used in various studies, including one <a href=\"https://cyberlaw.stanford.edu/blog/2011/10/tracking-trackers-where-everybody-knows-your-username\">that describes</a> how websites like Home Depot were leaking their customers' usernames to third parties. Blacklight uses FourthParty’s method to monitor what user information is being sent over the network to third parties.</li>\n  \n  <li><strong>Privacy Badger</strong> is a browser add-on made by the Electronic Frontier Foundation and released in May 2014. It prevents advertisers and third-party trackers from following people on the internet.</li>\n  \n  <li><strong>FP Detective</strong> was the first comprehensive study to measure the prevalence of device fingerprinting on the internet. The tool was released in 2013 and was used to conduct large-scale web-privacy studies.</li>\n  \n</ul>\n  \n\n\n\n<p>Blacklight’s data analysis was inspired in part by the<a href=\"https://edps.europa.eu/press-publications/edps-inspection-software_en\" target=\"_blank\"> Website Evidence Collector</a> developed by the European Union’s Electronic Data Protection Supervisor (EDPS). The Website Evidence Collector is a NodeJS package that uses the Puppeteer library to discover how a website collects a user’s personal data. Some of the categories of collected data were chosen by the EDPS.</p>\n\n\n\n<p>Other projects that have influenced Blacklight’s development include the <a href=\"https://www.law.berkeley.edu/research/bclt/research/privacy-at-bclt/web-privacy-census/\" target=\"_blank\">Web Privacy Census</a>, conducted at UC Berkeley in 2012, and the <a href=\"https://www.wsj.com/articles/SB10001424052748703977004575393121635952084?mod=article_inline\" target=\"_blank\">Wall Street Journal’s “What They Know” series</a>.&nbsp;&nbsp;&nbsp;</p>\n\n\n<div>\n\t\n\t<p><a href=\"#how-we-analyzed-each-type-of-tracking\">↩︎ link</a></p><h2 id=\"how-we-analyzed-each-type-of-tracking\">How We Analyzed Each Type of&nbsp;Tracking</h2>\n</div>\n\n\n\t\n<div>\n\t\n\t<p><a href=\"#third-party-cookies\">↩︎ link</a></p><h3 id=\"third-party-cookies\">Third-Party&nbsp;Cookies</h3>\n</div>\n\n\n<p>Third-party cookies are a <a href=\"https://www.eff.org/wp/behind-the-one-way-mirror#Cookies\" target=\"_blank\">small piece of data that tracking companies store in your web browser</a> when you visit a website. This bit of text—usually a unique number or string of characters—identifies you when you visit other websites that contain tracking code from the same company. Third-party cookies are used by hundreds of companies to build dossiers about users and deliver customized ads based on their behavior.</p>\n\n\n\n<p>Popular web browsers Edge, Brave, Firefox, and Safari all <a href=\"https://www.cookiestatus.com/\" target=\"_blank\">block third-party tracking cookies by default</a>, and Chrome has announced that it will <a href=\"https://www.theverge.com/2020/1/14/21064698/google-third-party-cookies-chrome-two-years-privacy-safari-firefox\" target=\"_blank\">phase them out</a>.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>Blacklight monitors network requests for the “Set-Cookie” header and observes all domains that set cookies using the <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie\" target=\"_blank\">document.cookie</a> javascript property. Blacklight identifies third-party cookies as those whose domains do not match the domain of the website being visited. We look up these third-party domains in DuckDuckGo’s Tracker Radar data to find out who owns them, how prevalent they are, and what kinds of services they provide.</p>\n\n\n\n\t\n\n\n\n<p>Key logging is when a first or third party monitors the text that you type into a webpage before you hit the submit button. This technique has been used for a variety of purposes, including identifying <a href=\"https://gizmodo.com/how-a-company-you-ve-never-heard-of-sends-you-letters-a-1795643539\" target=\"_blank\">anonymous web users by matching them to postal addresses and real names</a>.&nbsp;</p>\n\n\n\n<p>There are other reasons for key logging, such as providing autocomplete functionality. Blacklight cannot determine the intent behind the inspected website’s use of this technique.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>In order to test whether this is happening on a given website, Blacklight types predetermined text (see <a href=\"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector#appendix\">Appendix</a>) in all input fields but never clicks on a submit button. It monitors network requests to see if the data that was entered was sent to any servers.</p>\n\n\n\n\n\n<p>Session recording is technology that allows a third party to monitor and record all of a user’s behavior on a webpage—including mouse movements, clicks, scrolling down the page, and anything you type into a form even if you don’t click submit.</p>\n\n\n\n<p><a href=\"https://freedom-to-tinker.com/2017/11/15/no-boundaries-exfiltration-of-personal-data-by-session-replay-scripts/\" target=\"_blank\">In a 2017 study</a>, researchers at Princeton University found that session recorders were collecting sensitive information such as passwords and credit card numbers. When the researchers contacted the companies in question, most responded quickly and fixed the underlying cause of the data leak. However, the research highlights that these aren’t simply bugs but rather insecure practices that the researchers say should be stopped entirely. Most companies that offer session recording say they use the data to provide their customers—the websites installing the technology—meaningful insights on how to improve a user’s experience on the website. One company, Inspectlet, describes its service as watching “individual visitors use your site as if you’re looking over their shoulders.” (Inspectlet did not respond to an email seeking comment.)</p>\n\n\n<figure aria-label=\"image\" role=\"group\">\n  <div><p><span>Credit:</span>Inspectlet</p><picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-720x405.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-1280x720.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-720x405.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-1280x720.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/Inspectlet-Session-Recording-Website-Heatmaps-Javascript-A-B-Testing-Error-Logging-Form-Analytics-720x405.jpg\" alt=\"Screenshot from Inspectlet, a known session-recording provider.\">\n</picture></div><figcaption>\n      <span>Caption:</span>\n      Screenshot from Inspectlet, a known session recording provider.</figcaption></figure>\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>We define session recording as the loading of a specific type of script by a company that we know to be providing session recording services.</p>\n\n\n\n<p>Blacklight monitors the network requests for specific URL substrings that appear only when session recording is taking place, <a href=\"https://web.archive.org/web/20210830151649/https://gist.github.com/gunesacar/0c67b94ad415841cf3be6761714147ca\" target=\"_blank\">according to a list</a> created by researchers at Princeton University in 2017.</p>\n\n\n\n  \n\n\n\n<p>Sometimes key logging is used as part of session recording. In those cases, Blacklight would correctly report the session recorder as both key logging and session recording because we observed both, even though both tests are identifying the same script. &nbsp;</p>\n\n\n\n<p>Blacklight accurately detects when a website loads these scripts—but companies typically record only a sample of website visits, so not every user is being recorded on every visit.</p>\n\n\n\n\t\n<div>\n\t\n\t<p><a href=\"#canvas-fingerprinting\">↩︎ link</a></p><h3 id=\"canvas-fingerprinting\">Canvas&nbsp;Fingerprinting</h3>\n</div>\n\n\n<p>Fingerprinting describes a group of techniques that try to identify your browser without setting a cookie. <a href=\"https://webtransparency.cs.princeton.edu/webcensus/#results\" target=\"_blank\">They can identify you</a> even if you block all cookies.</p>\n\n\n\n<p>Canvas fingerprinting is a type of fingerprinting that identifies users by drawing shapes and text on a user’s webpage and noting the minor differences in the way they are rendered.&nbsp;</p>\n\n\n<figure aria-label=\"image\" role=\"group\">\n  <div><picture>\n  <source media=\"(min-width: 491px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-720x405.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-1280x720.jpg 2x\">\n  <source media=\"(max-width: 490px)\" srcset=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-720x405.jpg, https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-1280x720.jpg 3x\">\n  <img src=\"https://mrkp-static-production.themarkup.org/uploads/2020/09/fingerprinting-720x405.jpg\" alt=\"Four examples of canvas fingerprinting found with Blacklight\">\n</picture></div><figcaption>\n      <span>Caption:</span>\n      Four examples of canvas fingerprinting found with Blacklight.</figcaption></figure>\n\n\n<p>These differences in font rendering, smoothing, and anti-aliasing and other features <a href=\"https://webtransparency.cs.princeton.edu/webcensus/index.html#canvas-font-fp\" target=\"_blank\">are used by marketers</a> and others to identify individual devices. All of the major internet browsers, except Chrome, try to counter canvas fingerprinting—either by not fulfilling data requests for scripts known to have engaged in the practice or by trying to standardize users’ fingerprints.</p>\n\n\n\n<p>The image below is an example of the type of canvas images used by fingerprinting scripts. These canvases are usually invisible to the user.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>We follow the methodology described in <a href=\"http://randomwalker.info/publications/OpenWPM_1_million_site_tracking_measurement.pdf#page=12\" target=\"_blank\">this paper</a> by researchers at Princeton University to identify when the HTML canvas element is used for tracking purposes. The parameters we use to identify canvases that are being drawn for fingerprinting purposes are:</p>\n\n\n\n  <ul>\n\n  <li>The canvas element's <em>height</em> and <em>width</em> properties must not be set below 16px.</li>\n  \n  <li>Text must be written to the canvas within at least 10 distinct characters.</li>\n  \n  <li>The script should not call the <em>save</em>, <em>restore</em>, or <em>addEventListener</em> methods of the rendering context.</li>\n  \n  <li>The script extracts and image with a <em>toDataURL</em> or with a single call to <em>getImageData</em> that specifies an area with&nbsp;a minimum size of 16px × 16px.</li>\n  \n</ul>\n  \n\n\n\n<p>We have not seen this in practice, but it is possible that Blacklight could falsely label a legitimate use of the canvas that matches these heuristics. In order to account for this, the tool captures the image drawn by the script and renders this in the tool. Users should be able to determine the use of canvas simply by viewing this image. A typical fingerprinting script is shown above.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\n\n\n\n\t\n\n\n\n<p>Ad trackers are technologies that identify and collect information about users. These technologies usually (but not always) appear with some level of consent from the website owners. They are used to collect website user analytics, for ad-targeting, and by data brokers and other information collectors to build user profiles. They usually take the form of Javascript scripts or web beacons.</p>\n\n\n\n<p>Web beacons are small 1px by 1px images that are placed on a website for tracking purposes by third parties. Using this technique, a third party can determine behaviors including when a particular user went to a site, the kind of browser, and what IP address it used.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>Blacklight checks all network requests against the <a href=\"https://easylist.to/\" target=\"_blank\">EasyPrivacy</a> list, which contains URLs and URL substrings that are known to be used for tracking. Blacklight monitors the network activity for requests being made to these URLs and substrings.</p>\n\n\n\n<p>Blacklight only records requests being made to third-party domains. It ignores any URL patterns in the EasyPrivacy list that match a first-party domain. For example, the EFF hosts its own analytics, and that results in requests to “<a href=\"https://anon-stats.eff.org/\" target=\"_blank\">https://anon-stats.eff.org</a>,” their analytics subdomain. If a user types in <em>https://eff.org</em>, Blacklight does not consider calls to <em>https://anon-stats.eff.org</em> to be a third-party request.</p>\n\n\n\n<p>We look up these third-party domains in DuckDuckGo’s Tracker Radar data set to find out who owns them, how prevalent they are, and what kinds of services they provide. We only include third-party domains that belong to the “Ad Motivated Tracking” categories defined in the <a href=\"https://github.com/duckduckgo/tracker-radar/blob/master/docs/CATEGORIES.md\" target=\"_blank\">Tracker Radar data set</a>.</p>\n\n\n\n\t\n\n\n\n<p>The Facebook pixel is a piece of code Facebook created that allows other websites to target their visitors later with ads on Facebook. Common actions that can be tracked by pixel include viewing a page or specific content, adding payment information, or making a purchase.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>Blacklight looks for network requests from the site going to Facebook and looks in the URL query parameters for data that matches the schema of what is described in the documentation for Facebook’s pixel. We look for three different types of data: “<a href=\"https://web.archive.org/web/20200625095908/https:/developers.facebook.com/docs/facebook-pixel/reference/\" target=\"_blank\">standard</a> events,” “custom events” and <a href=\"https://web.archive.org/web/20200413102542/https:/developers.facebook.com/docs/facebook-pixel/advanced/advanced-matching\" target=\"_blank\">“advanced matching</a>.”</p>\n\n\n\n\t\n\n\n\n<p>Google Analytics is the most popular website analytics platform in use today. <a href=\"https://whotracks.me/trackers/google_analytics.html\" target=\"_blank\">According to whotracks.me 41.7 percent of web traffic is analyzed by Google Analytics</a>. While most of the functionality of this service is to provide developers and website owners with information on how their audience is engaging with their website, the tool also allows the website to make custom audience lists based on user behavior and then target ads to those visitors across the internet using Google Ads and Display &amp; Video 360. Blacklight examines inspected sites for the presence of the tool, not how it is used.</p>\n\n\n\n<p><strong>What Blacklight Tests</strong></p>\n\n\n\n<p>Blacklight looks for network requests from the inspected site going to a URL beginning with “stats.g.doubleclick” that also contains the “UA-” Google account identifier prefix. This is described in more detail in <a href=\"https://web.archive.org/web/20200615214845/https:/developers.google.com/analytics/resources/concepts/gaConceptsTrackingOverview\" target=\"_blank\">Google Analytics developer documentation</a>.</p>\n\n\n\n\n\n<p>To determine the prevalence of tracking technologies on the internet both for context in Blacklight and for accompanying news stories, we ran the 100,000 most popular websites as defined by the <a href=\"https://tranco-list.eu/list/V3KN/full\" target=\"_blank\">Tranco List</a> through Blacklight. The data and analysis code can be found on <a href=\"https://github.com/the-markup/investigation-blacklight-the-high-cost-of-free\" target=\"_blank\">Github</a>&nbsp;. Blacklight successfully captured data for 81,617 of those URLs. The rest either failed to resolve, timed out on multiple attempts, or didn’t load a webpage. The percentages listed below are for the 81,617 successful captures.</p>\n\n\n\n<p>Some of the analysis goes beyond what appears on the tool. The key findings from our survey are as follows:</p>\n\n\n\n  <ul>\n\n  <li>6 percent of websites used canvas fingerprinting.</li>\n  \n  <li>15 percent of websites loaded scripts from known session recorders.</li>\n  \n  <li>4 percent of websites logged keystrokes.</li>\n  \n  <li>13 percent of sites did not load any third-party cookies or tracking network requests.</li>\n  \n  <li>The median number of third-party cookie loads was three.</li>\n  \n  <li>The median number of ad trackers loaded was seven.</li>\n  \n  <li>74 percent of sites loaded Google tracking technology.</li>\n  \n  <li>33 percent of websites loaded Facebook tracking technology.</li>\n  \n  <li>50 percent of sites used Google Analytics’ remarketing feature.</li>\n  \n  <li>30 percent of sites used the Facebook pixel.</li>\n  \n</ul>\n  \n\n\n\n<p>We classified as Google tracking technology any network requests being made to any of the following domains:</p>\n\n\n\n  <ul>\n\n  <li>google-analytics.com</li>\n  \n  <li>Doubleclick.net</li>\n  \n  <li>Googletagmanager.com</li>\n  \n  <li>Googletagservices</li>\n  \n  <li>Googlesyndication.com</li>\n  \n  <li>Googleadservices</li>\n  \n  <li>2mdn.net</li>\n  \n</ul>\n  \n\n\n\n<p>We classified as Facebook tracking technology any network requests being made to any of the following Facebook domains:</p>\n\n\n\n  <ul>\n\n  <li>facebook.com</li>\n  \n  <li>Facebook.net</li>\n  \n  <li>atdmt.com</li>\n  \n</ul>\n  \n\n\n\n\n\n<p>Blacklight’s analysis is limited by four main factors: </p>\n\n\n\n  <ol>\n\n  <li>It is a simulation of a user behavior, not actual user behavior, and could thus trigger different surveillance responses. </li>\n  \n  <li>The inspected website could be surveilling user activities for benign purposes. </li>\n  \n  <li>False positives (possible with canvas fingerprinting): Very occasionally, legitimate uses of the HTML canvas match the heuristics Blacklight uses to identify canvas fingerprinting. </li>\n  \n  <li>False negatives: The stack tracing technique used by Blacklight’s Javascript instrumentation might incorrectly attribute a call to a window API method we are monitoring to a library included by a script. For example, if a fingerprinting script uses jQuery to do some calls, jQuery might end up on the top of the stack and Blacklight will attribute the call to that instead of the script that's actually responsible. This possibility was brought to our attention by researchers who reviewed our methodology; we have not seen it occur in our tests or our survey of the 100,000 most popular sites.</li>\n  \n\n  </ol>\n\n\n\n  \n\n\n\n<p>Regarding false positives, when Blacklight visits a site, that site can see the request is coming from computers hosted by Amazon’s AWS cloud infrastructure. Because botnets are often run on cloud infrastructure, our tool could trigger bot-detection software on the website, including canvas fingerprinting. This could result in false positives for the canvas fingerprinting test where the purpose of the test is not to track users but rather to detect botnets.</p>\n\n\n\n<p>In order to test this, we took a random sample of 1,000 sites from the top websites from the Tranco List that we had already run through Blacklight on AWS. We ran this sample through Blacklight software on our computer locally at a residential IP address in New York City. We concluded that the results of a Blacklight inspection locally are very similar, but not exactly the same, as running it on cloud infrastructure.</p>\n\n\n\n<div id=\"results-for-sample-local-computer-and-aws\">\n  \n    <p><a href=\"#results-for-sample-local-computer-and-aws\">↩︎ link</a></p><h3>Results for Sample: Local Computer and AWS</h3>\n  \n  <div>\n    <table>\n        \n          <tbody><tr><th>\n              <span>\n                \n              </span>\n            </th><th>\n              <span>Local\n                \n              </span>\n            </th><th>\n              <span>AWS\n                \n              </span>\n            </th></tr>\n        \n      \n        \n          <tr data-row=\"1\"><td>Canvas fingerprinting</td><td>8%</td><td>10%</td></tr>\n        \n      \n        \n          <tr data-row=\"2\"><td>Session recording</td><td>18%</td><td>19%</td></tr>\n        \n      \n        \n          <tr data-row=\"3\"><td>Key logging</td><td>4%</td><td>6%</td></tr>\n        \n      \n        \n          <tr data-row=\"4\"><td>Median number of third-party cookies</td><td>4</td><td>5</td></tr>\n        \n      \n        \n          <tr data-row=\"5\"><td>Median number of third-party trackers recorded</td><td>7</td><td>8</td></tr>\n        \n      </tbody></table></div></div>\n\n\n<p>Not all surveillance activity that is imperceptible to the user is necessarily malicious. For instance, canvas fingerprinting is used for fraud prevention because <a href=\"https://docs.fingerprintjs.com/pro/user-identification\" target=\"_blank\">it can identify a device</a>. And key logging can be used to provide autocomplete functionality.</p>\n\n\n\n<p>Blacklight does not attempt to identify the intent of any particular tracking technology it finds.</p>\n\n\n\n<p>Nor can Blacklight determine exactly how a website uses the data it collects on a user when loading session recording scripts and monitoring user behavior, such as mouse movements and keystrokes.</p>\n\n\n\n<p>Blacklight does not check the terms of use or privacy policies of the websites it visits to see whether they disclose their surveillance activities.</p>\n\n\n\n<hr><p><strong>Input field values</strong></p>\n\n\n\n<p>The table below lists the values we programmed Blacklight to type into input fields on websites. We used the Mozilla <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete\" target=\"_blank\">autocomplete attribute write-up as our reference</a>. Blacklight also checks for the base64, md5, sha256 and sha512 versions of these values.</p>\n\n\n\n<div>\n    <table>\n        \n          <tbody><tr><th>\n              <span>Autocomplete Attribute\n                \n              </span>\n            </th><th>\n              <span>Blacklight Value\n                \n              </span>\n            </th></tr>\n        \n      \n        \n          <tr data-row=\"1\"><td>Date</td><td>01/01/2026</td></tr>\n        \n      \n        \n          <tr data-row=\"2\"><td>Email</td><td>blacklight-headless@themarkup.org</td></tr>\n        \n      \n        \n          <tr data-row=\"3\"><td>Password</td><td>SUPERS3CR3T_PASSWORD</td></tr>\n        \n      \n        \n          <tr data-row=\"4\"><td>Search</td><td>TheMarkup</td></tr>\n        \n      \n        \n          <tr data-row=\"5\"><td>Text</td><td>IdaaaaTarbell</td></tr>\n        \n      \n        \n          <tr data-row=\"6\"><td>URL</td><td>https://themarkup.org</td></tr>\n        \n      \n        \n          <tr data-row=\"7\"><td>Organization</td><td>The Markup</td></tr>\n        \n      \n        \n          <tr data-row=\"8\"><td>Organization Title</td><td>Non-profit newsroom</td></tr>\n        \n      \n        \n          <tr data-row=\"9\"><td>Current Password</td><td>S3CR3T_CURRENT_PASSWORD</td></tr>\n        \n      \n        \n          <tr data-row=\"10\"><td>New Password</td><td>S3CR3T_NEW_PASSWORD</td></tr>\n        \n      \n        \n          <tr data-row=\"11\"><td>Username</td><td>idaaaa_tarbell</td></tr>\n        \n      \n        \n          <tr data-row=\"12\"><td>Family Name</td><td>Tarbell</td></tr>\n        \n      \n        \n          <tr data-row=\"13\"><td>Given Name</td><td>Idaaaa</td></tr>\n        \n      \n        \n          <tr data-row=\"14\"><td>Name</td><td>IdaaaaTarbell</td></tr>\n        \n      \n        \n          <tr data-row=\"15\"><td>Street Address</td><td>PO Box #1103</td></tr>\n        \n      \n        \n          <tr data-row=\"16\"><td>Address Line 1</td><td>PO Box #1103</td></tr>\n        \n      \n        \n          <tr data-row=\"17\"><td>Postal Code</td><td>10159</td></tr>\n        \n      \n        \n          <tr data-row=\"18\"><td>CC-Name</td><td>IDAAAATARBELL</td></tr>\n        \n      \n        \n          <tr data-row=\"19\"><td>CC-Given-Name</td><td>IDAAAA</td></tr>\n        \n      \n        \n          <tr data-row=\"20\"><td>CC-Family-Name</td><td>TARBELL</td></tr>\n        \n      \n        \n          <tr data-row=\"21\"><td>CC-Number</td><td>4479846060020724</td></tr>\n        \n      \n        \n          <tr data-row=\"22\"><td>CC-Exp</td><td>01/2026</td></tr>\n        \n      \n        \n          <tr data-row=\"23\"><td>CC-Type</td><td>Visa</td></tr>\n        \n      \n        \n          <tr data-row=\"24\"><td>Transaction Amount</td><td>13371337</td></tr>\n        \n      </tbody></table></div>\n\n\n\n\n<p>We thank Gunes Acar (KU Leven), Steven Englehardt (Mozilla), and Arvind Narayanan and Jonathan Mayer (Princeton, CITP) for comments and suggestions on an earlier draft.</p>\n\n\n\n<hr></div></div>","textContent":"\n        \n        Blacklight is a real-time website privacy inspector.\n\n\n\nThe tool emulates how a user might be surveilled while browsing the web. Users type a URL into Blacklight, and it visits the requested website, scans for known types of privacy violations, and returns an instant privacy analysis of the inspected site.\n\n\n\nBlacklight works by visiting each website with a headless browser, running custom software built by The Markup. This software monitors which scripts on that website are potentially surveilling the user by performing seven different tests, each investigating a specific, known method of surveillance.\n\n\n\nThe types of surveillance that Blacklight seeks to identify are:\n\n\n\n  \n\n  Third-party cookies\n  \n  Ad trackers\n  \n  Key logging\n  \n  Session recording\n  \n  Canvas fingerprinting\n  \n  Facebook tracking\n  \n  Google Analytics “Remarketing Audiences”\n  \n\n  \n\n\n\nThese are defined later in this document, as are their limitations.\n\n\n\nBlacklight was built using the NodeJS Javascript environment, the Puppeteer Node library, which provides high-level control over a Chromium (open-source Chrome) browser. When a user enters a URL into Blacklight, the tool opens a headless web browser with a fresh profile and visits its homepage as well as an additional randomly selected page deeper inside the same website.\n\n\n\n\n\nWhile the browser is visiting the website, it runs custom software in the background that monitors scripts and network requests to observe when and how user data is being collected.   To monitor scripts, Blacklight modifies various fingerprintable properties of the browser’s Window API. This allows Blacklight to log which script made a particular function call, using the Stacktrace-js package. The network requests are collected using a monitoring tool included in Puppeteer’s API.\n\n\n\nBlacklight uses the script data and network requests to run the seven tests described above. Afterward, it closes the browser and generates an instant report for the user.\n\n\n\nIt records a list of all the URLs that the inspected website requests. In addition, it makes a list of all domains and subdomains that were requested. The tool we provide to the public will not save those lists unless the user chooses to share results with us through an option in the tool.\n\n\n\nWe define domain names using the Public Suffix + 1 method. We define first-party domain as any domain that matches the website visited, including subdomains. We define third-party as any domain that does not match the website visited. The tool compares the list of third-party domains from the website requests with DuckDuckGo’s Tracker Radar dataset.\n\n\n\nThis data merge allows Blacklight to add the following information about the third-party domains found on the inspected site:\n\n\n\n  \n\n  Name of the domain’s owner.\n  \n  Categories assigned by DuckDuckGo to each domain that attempt to describe its observed purpose or intent.\n  \n\n  \n\n\n\nThis additional information about third parties is provided to users as context for Blacklight’s instant test results. Among other things, this information is used to count the number of advertising-related trackers present on a given website.\n\n\n\nBlacklight runs tests based on the root URL of the page entered by a user into the tool. For example, if a user types in https://example.com/sports, Blacklight starts its inspection at https://example.com and disregards the /sports path. If a user types in https://sports.example.com, Blacklight starts its inspection at https://sports.example.com.\n\n\n\n  \n\n\n\nBlacklight results for each requested domain are cached for 24 hours, and these cached reports are delivered in response to subsequent user requests for the same website during those 24 hours. This is designed to prevent the tool from being used maliciously to overwhelm a website with thousands of automated visits.\n\n\n\nBlacklight will also tell users whether their results are high, low, or about average compared with what the tool found on the 100,000 most popular websites as ranked by the Tranco List. This is described in more detail below. \n\n\n\nThe Blacklight code base is open source and available on Github; it can also be downloaded as an NPM module.\n\n\n\nThere are limitations to our analysis. Blacklight emulates a user visiting a website, but its automated behavior is different from human behavior, and that behavior may trigger different types of surveillance. For instance, an automated request might trigger more fraud detection but fewer ads.\n\n\n\nGiven the dynamic nature of web-based technology, it is also possible that some of these tests will become out-of-date over time. And new legitimate-use cases for the techniques Blacklight flags could emerge that would not be listed in the tool’s caveats.\n\n\n\nFor this reason, Blacklight results should not be taken as the final word on potential privacy violations by a given website. Rather, they should be treated as an initial automated inspection that requires further investigation before a definitive claim can be made.\n\n\n\n\n\nBlacklight is built on the foundation of various privacy census tools built over the past decade.\n\n\n\nIt runs Javascript instrumentation, which enables it to monitor calls to the browsers’ Javascript API. This is based on OpenWPM, an open-source tool for web privacy measurement built by Steven Englehardt, Gunes Acar, Dillon Reisman, and Arvind Narayanan at Princeton University. It is now maintained by Mozilla.\n\n\n\nOpenWPM was used to power Princeton’s Web Transparency and Accountability Project, which monitored websites and services to discover companies’ data collection, data use, and deceptive practices.\n\n\n\nThrough numerous studies conducted between 2015 and 2019, Princeton researchers uncovered the presence of many privacy-infringing technologies. These included browser fingerprinting and cookie syncing as well as how session replay scripts collect passwords and sensitive user data. One notable example is the exfiltration of prescription data and health-conditions data from walgreens.com.\n\n\n\nFive of the seven tests Blacklight runs are based on the techniques described in the Princeton research mentioned above. These tests are canvas fingerprinting, key logging, session recording, and third-party cookies.      \n\n\n\nOpenWPM incorporates code and techniques from other privacy inspection tools, including FourthParty, Privacy Badger, and FP Detective:\n\n\n\n  \n\n  FourthParty was an open-source platform for measuring dynamic web content that was released in August 2011 and maintained until 2014. It has been used in various studies, including one that describes how websites like Home Depot were leaking their customers' usernames to third parties. Blacklight uses FourthParty’s method to monitor what user information is being sent over the network to third parties.\n  \n  Privacy Badger is a browser add-on made by the Electronic Frontier Foundation and released in May 2014. It prevents advertisers and third-party trackers from following people on the internet.\n  \n  FP Detective was the first comprehensive study to measure the prevalence of device fingerprinting on the internet. The tool was released in 2013 and was used to conduct large-scale web-privacy studies.\n  \n\n  \n\n\n\nBlacklight’s data analysis was inspired in part by the Website Evidence Collector developed by the European Union’s Electronic Data Protection Supervisor (EDPS). The Website Evidence Collector is a NodeJS package that uses the Puppeteer library to discover how a website collects a user’s personal data. Some of the categories of collected data were chosen by the EDPS.\n\n\n\nOther projects that have influenced Blacklight’s development include the Web Privacy Census, conducted at UC Berkeley in 2012, and the Wall Street Journal’s “What They Know” series.   \n\n\n\n\t\n\t↩︎ linkHow We Analyzed Each Type of Tracking\n\n\n\n\t\n\n\t\n\t↩︎ linkThird-Party Cookies\n\n\n\nThird-party cookies are a small piece of data that tracking companies store in your web browser when you visit a website. This bit of text—usually a unique number or string of characters—identifies you when you visit other websites that contain tracking code from the same company. Third-party cookies are used by hundreds of companies to build dossiers about users and deliver customized ads based on their behavior.\n\n\n\nPopular web browsers Edge, Brave, Firefox, and Safari all block third-party tracking cookies by default, and Chrome has announced that it will phase them out.\n\n\n\nWhat Blacklight Tests\n\n\n\nBlacklight monitors network requests for the “Set-Cookie” header and observes all domains that set cookies using the document.cookie javascript property. Blacklight identifies third-party cookies as those whose domains do not match the domain of the website being visited. We look up these third-party domains in DuckDuckGo’s Tracker Radar data to find out who owns them, how prevalent they are, and what kinds of services they provide.\n\n\n\n\t\n\n\n\nKey logging is when a first or third party monitors the text that you type into a webpage before you hit the submit button. This technique has been used for a variety of purposes, including identifying anonymous web users by matching them to postal addresses and real names. \n\n\n\nThere are other reasons for key logging, such as providing autocomplete functionality. Blacklight cannot determine the intent behind the inspected website’s use of this technique.\n\n\n\nWhat Blacklight Tests\n\n\n\nIn order to test whether this is happening on a given website, Blacklight types predetermined text (see Appendix) in all input fields but never clicks on a submit button. It monitors network requests to see if the data that was entered was sent to any servers.\n\n\n\n\n\nSession recording is technology that allows a third party to monitor and record all of a user’s behavior on a webpage—including mouse movements, clicks, scrolling down the page, and anything you type into a form even if you don’t click submit.\n\n\n\nIn a 2017 study, researchers at Princeton University found that session recorders were collecting sensitive information such as passwords and credit card numbers. When the researchers contacted the companies in question, most responded quickly and fixed the underlying cause of the data leak. However, the research highlights that these aren’t simply bugs but rather insecure practices that the researchers say should be stopped entirely. Most companies that offer session recording say they use the data to provide their customers—the websites installing the technology—meaningful insights on how to improve a user’s experience on the website. One company, Inspectlet, describes its service as watching “individual visitors use your site as if you’re looking over their shoulders.” (Inspectlet did not respond to an email seeking comment.)\n\n\n\n  Credit:Inspectlet\n  \n  \n  \n\n      Caption:\n      Screenshot from Inspectlet, a known session recording provider.\n\n\nWhat Blacklight Tests\n\n\n\nWe define session recording as the loading of a specific type of script by a company that we know to be providing session recording services.\n\n\n\nBlacklight monitors the network requests for specific URL substrings that appear only when session recording is taking place, according to a list created by researchers at Princeton University in 2017.\n\n\n\n  \n\n\n\nSometimes key logging is used as part of session recording. In those cases, Blacklight would correctly report the session recorder as both key logging and session recording because we observed both, even though both tests are identifying the same script.  \n\n\n\nBlacklight accurately detects when a website loads these scripts—but companies typically record only a sample of website visits, so not every user is being recorded on every visit.\n\n\n\n\t\n\n\t\n\t↩︎ linkCanvas Fingerprinting\n\n\n\nFingerprinting describes a group of techniques that try to identify your browser without setting a cookie. They can identify you even if you block all cookies.\n\n\n\nCanvas fingerprinting is a type of fingerprinting that identifies users by drawing shapes and text on a user’s webpage and noting the minor differences in the way they are rendered. \n\n\n\n  \n  \n  \n  \n\n      Caption:\n      Four examples of canvas fingerprinting found with Blacklight.\n\n\nThese differences in font rendering, smoothing, and anti-aliasing and other features are used by marketers and others to identify individual devices. All of the major internet browsers, except Chrome, try to counter canvas fingerprinting—either by not fulfilling data requests for scripts known to have engaged in the practice or by trying to standardize users’ fingerprints.\n\n\n\nThe image below is an example of the type of canvas images used by fingerprinting scripts. These canvases are usually invisible to the user.\n\n\n\nWhat Blacklight Tests\n\n\n\nWe follow the methodology described in this paper by researchers at Princeton University to identify when the HTML canvas element is used for tracking purposes. The parameters we use to identify canvases that are being drawn for fingerprinting purposes are:\n\n\n\n  \n\n  The canvas element's height and width properties must not be set below 16px.\n  \n  Text must be written to the canvas within at least 10 distinct characters.\n  \n  The script should not call the save, restore, or addEventListener methods of the rendering context.\n  \n  The script extracts and image with a toDataURL or with a single call to getImageData that specifies an area with a minimum size of 16px × 16px.\n  \n\n  \n\n\n\nWe have not seen this in practice, but it is possible that Blacklight could falsely label a legitimate use of the canvas that matches these heuristics. In order to account for this, the tool captures the image drawn by the script and renders this in the tool. Users should be able to determine the use of canvas simply by viewing this image. A typical fingerprinting script is shown above.                                                   \n\n\n\n\t\n\n\n\nAd trackers are technologies that identify and collect information about users. These technologies usually (but not always) appear with some level of consent from the website owners. They are used to collect website user analytics, for ad-targeting, and by data brokers and other information collectors to build user profiles. They usually take the form of Javascript scripts or web beacons.\n\n\n\nWeb beacons are small 1px by 1px images that are placed on a website for tracking purposes by third parties. Using this technique, a third party can determine behaviors including when a particular user went to a site, the kind of browser, and what IP address it used.\n\n\n\nWhat Blacklight Tests\n\n\n\nBlacklight checks all network requests against the EasyPrivacy list, which contains URLs and URL substrings that are known to be used for tracking. Blacklight monitors the network activity for requests being made to these URLs and substrings.\n\n\n\nBlacklight only records requests being made to third-party domains. It ignores any URL patterns in the EasyPrivacy list that match a first-party domain. For example, the EFF hosts its own analytics, and that results in requests to “https://anon-stats.eff.org,” their analytics subdomain. If a user types in https://eff.org, Blacklight does not consider calls to https://anon-stats.eff.org to be a third-party request.\n\n\n\nWe look up these third-party domains in DuckDuckGo’s Tracker Radar data set to find out who owns them, how prevalent they are, and what kinds of services they provide. We only include third-party domains that belong to the “Ad Motivated Tracking” categories defined in the Tracker Radar data set.\n\n\n\n\t\n\n\n\nThe Facebook pixel is a piece of code Facebook created that allows other websites to target their visitors later with ads on Facebook. Common actions that can be tracked by pixel include viewing a page or specific content, adding payment information, or making a purchase.\n\n\n\nWhat Blacklight Tests\n\n\n\nBlacklight looks for network requests from the site going to Facebook and looks in the URL query parameters for data that matches the schema of what is described in the documentation for Facebook’s pixel. We look for three different types of data: “standard events,” “custom events” and “advanced matching.”\n\n\n\n\t\n\n\n\nGoogle Analytics is the most popular website analytics platform in use today. According to whotracks.me 41.7 percent of web traffic is analyzed by Google Analytics. While most of the functionality of this service is to provide developers and website owners with information on how their audience is engaging with their website, the tool also allows the website to make custom audience lists based on user behavior and then target ads to those visitors across the internet using Google Ads and Display & Video 360. Blacklight examines inspected sites for the presence of the tool, not how it is used.\n\n\n\nWhat Blacklight Tests\n\n\n\nBlacklight looks for network requests from the inspected site going to a URL beginning with “stats.g.doubleclick” that also contains the “UA-” Google account identifier prefix. This is described in more detail in Google Analytics developer documentation.\n\n\n\n\n\nTo determine the prevalence of tracking technologies on the internet both for context in Blacklight and for accompanying news stories, we ran the 100,000 most popular websites as defined by the Tranco List through Blacklight. The data and analysis code can be found on Github . Blacklight successfully captured data for 81,617 of those URLs. The rest either failed to resolve, timed out on multiple attempts, or didn’t load a webpage. The percentages listed below are for the 81,617 successful captures.\n\n\n\nSome of the analysis goes beyond what appears on the tool. The key findings from our survey are as follows:\n\n\n\n  \n\n  6 percent of websites used canvas fingerprinting.\n  \n  15 percent of websites loaded scripts from known session recorders.\n  \n  4 percent of websites logged keystrokes.\n  \n  13 percent of sites did not load any third-party cookies or tracking network requests.\n  \n  The median number of third-party cookie loads was three.\n  \n  The median number of ad trackers loaded was seven.\n  \n  74 percent of sites loaded Google tracking technology.\n  \n  33 percent of websites loaded Facebook tracking technology.\n  \n  50 percent of sites used Google Analytics’ remarketing feature.\n  \n  30 percent of sites used the Facebook pixel.\n  \n\n  \n\n\n\nWe classified as Google tracking technology any network requests being made to any of the following domains:\n\n\n\n  \n\n  google-analytics.com\n  \n  Doubleclick.net\n  \n  Googletagmanager.com\n  \n  Googletagservices\n  \n  Googlesyndication.com\n  \n  Googleadservices\n  \n  2mdn.net\n  \n\n  \n\n\n\nWe classified as Facebook tracking technology any network requests being made to any of the following Facebook domains:\n\n\n\n  \n\n  facebook.com\n  \n  Facebook.net\n  \n  atdmt.com\n  \n\n  \n\n\n\n\n\nBlacklight’s analysis is limited by four main factors: \n\n\n\n  \n\n  It is a simulation of a user behavior, not actual user behavior, and could thus trigger different surveillance responses. \n  \n  The inspected website could be surveilling user activities for benign purposes. \n  \n  False positives (possible with canvas fingerprinting): Very occasionally, legitimate uses of the HTML canvas match the heuristics Blacklight uses to identify canvas fingerprinting. \n  \n  False negatives: The stack tracing technique used by Blacklight’s Javascript instrumentation might incorrectly attribute a call to a window API method we are monitoring to a library included by a script. For example, if a fingerprinting script uses jQuery to do some calls, jQuery might end up on the top of the stack and Blacklight will attribute the call to that instead of the script that's actually responsible. This possibility was brought to our attention by researchers who reviewed our methodology; we have not seen it occur in our tests or our survey of the 100,000 most popular sites.\n  \n\n  \n\n\n\n  \n\n\n\nRegarding false positives, when Blacklight visits a site, that site can see the request is coming from computers hosted by Amazon’s AWS cloud infrastructure. Because botnets are often run on cloud infrastructure, our tool could trigger bot-detection software on the website, including canvas fingerprinting. This could result in false positives for the canvas fingerprinting test where the purpose of the test is not to track users but rather to detect botnets.\n\n\n\nIn order to test this, we took a random sample of 1,000 sites from the top websites from the Tranco List that we had already run through Blacklight on AWS. We ran this sample through Blacklight software on our computer locally at a residential IP address in New York City. We concluded that the results of a Blacklight inspection locally are very similar, but not exactly the same, as running it on cloud infrastructure.\n\n\n\n\n  \n    ↩︎ linkResults for Sample: Local Computer and AWS\n  \n  \n    \n        \n          \n              \n                \n              \n            \n              Local\n                \n              \n            \n              AWS\n                \n              \n            \n        \n      \n        \n          Canvas fingerprinting8%10%\n        \n      \n        \n          Session recording18%19%\n        \n      \n        \n          Key logging4%6%\n        \n      \n        \n          Median number of third-party cookies45\n        \n      \n        \n          Median number of third-party trackers recorded78\n        \n      \n\n\nNot all surveillance activity that is imperceptible to the user is necessarily malicious. For instance, canvas fingerprinting is used for fraud prevention because it can identify a device. And key logging can be used to provide autocomplete functionality.\n\n\n\nBlacklight does not attempt to identify the intent of any particular tracking technology it finds.\n\n\n\nNor can Blacklight determine exactly how a website uses the data it collects on a user when loading session recording scripts and monitoring user behavior, such as mouse movements and keystrokes.\n\n\n\nBlacklight does not check the terms of use or privacy policies of the websites it visits to see whether they disclose their surveillance activities.\n\n\n\nInput field values\n\n\n\nThe table below lists the values we programmed Blacklight to type into input fields on websites. We used the Mozilla autocomplete attribute write-up as our reference. Blacklight also checks for the base64, md5, sha256 and sha512 versions of these values.\n\n\n\n\n    \n        \n          \n              Autocomplete Attribute\n                \n              \n            \n              Blacklight Value\n                \n              \n            \n        \n      \n        \n          Date01/01/2026\n        \n      \n        \n          Emailblacklight-headless@themarkup.org\n        \n      \n        \n          PasswordSUPERS3CR3T_PASSWORD\n        \n      \n        \n          SearchTheMarkup\n        \n      \n        \n          TextIdaaaaTarbell\n        \n      \n        \n          URLhttps://themarkup.org\n        \n      \n        \n          OrganizationThe Markup\n        \n      \n        \n          Organization TitleNon-profit newsroom\n        \n      \n        \n          Current PasswordS3CR3T_CURRENT_PASSWORD\n        \n      \n        \n          New PasswordS3CR3T_NEW_PASSWORD\n        \n      \n        \n          Usernameidaaaa_tarbell\n        \n      \n        \n          Family NameTarbell\n        \n      \n        \n          Given NameIdaaaa\n        \n      \n        \n          NameIdaaaaTarbell\n        \n      \n        \n          Street AddressPO Box #1103\n        \n      \n        \n          Address Line 1PO Box #1103\n        \n      \n        \n          Postal Code10159\n        \n      \n        \n          CC-NameIDAAAATARBELL\n        \n      \n        \n          CC-Given-NameIDAAAA\n        \n      \n        \n          CC-Family-NameTARBELL\n        \n      \n        \n          CC-Number4479846060020724\n        \n      \n        \n          CC-Exp01/2026\n        \n      \n        \n          CC-TypeVisa\n        \n      \n        \n          Transaction Amount13371337\n        \n      \n\n\n\n\nWe thank Gunes Acar (KU Leven), Steven Englehardt (Mozilla), and Arvind Narayanan and Jonathan Mayer (Princeton, CITP) for comments and suggestions on an earlier draft.\n\n\n\n","length":24146,"excerpt":"Blacklight catalogs the many ways any website tracks visitors: from cookies to capturing every user keystroke and mouse movement","byline":"By Surya Mattu and Aaron Sankin","dir":null,"siteName":null,"lang":"en"},"finalizedMeta":{"title":"How We Built a Real-time Privacy Inspector – The Markup","description":"Blacklight catalogs the many ways any website tracks visitors: from cookies to capturing every user keystroke and mouse movement","author":false,"creator":"@themarkup","publisher":false,"date":"2022-04-05T17:38:43.109Z","subject":"Blacklight","topics":["Blacklight"]},"jsonLd":{"@type":false,"headline":false,"description":false,"image":[],"mainEntityOfPage":{"@type":false,"@id":false},"datePublished":false,"dateModified":false,"isAccessibleForFree":false,"isPartOf":{"@type":[],"name":false,"productID":false},"discussionUrl":false,"license":false,"author":{"@type":false,"name":false,"description":false,"sameAs":false,"image":{"@type":false,"url":false},"givenName":false,"familyName":false,"alternateName":false,"publishingPrinciples":false},"publisher":{"@type":false,"name":false,"description":false,"sameAs":false,"logo":{"@type":false,"url":false},"publishingPrinciples":false},"editor":{"@type":false,"name":false,"description":false,"sameAs":false,"image":{"@type":false,"url":false},"givenName":false,"familyName":false,"alternateName":false,"publishingPrinciples":false}},"twitterObj":false,"status":200,"metadata":{"author":false,"title":"How We Built a Real-time Privacy Inspector – The Markup","description":"Blacklight catalogs the many ways any website tracks visitors: from cookies to capturing every user keystroke and mouse movement","canonical":"https://themarkup.org/blacklight/2020/09/22/how-we-built-a-real-time-privacy-inspector","keywords":[],"image":"https://mrkp-static-production.themarkup.org/uploads/2020/09/The-Markup-841x473.jpg","firstParagraph":"Big Tech Is Watching You. We’re Watching Big Tech."},"dublinCore":{},"opengraph":{"title":"How We Built a Real-time Privacy Inspector – The Markup","description":"Blacklight catalogs the many ways any website tracks visitors: from cookies to capturing every user keystroke and mouse movement","url":false,"site_name":false,"locale":false,"type":"article","typeObject":{"published_time":false,"modified_time":false,"author":false,"publisher":false,"section":"Blacklight","tag":[]},"image":"https://mrkp-static-production.themarkup.org/uploads/2020/09/show-your-work-blacklight-1200x628.jpg"},"twitter":{"site":"@themarkup","description":"Blacklight catalogs the many ways any website tracks visitors: from cookies to capturing every user keystroke and mouse movement","card":"summary_large_image","creator":"@themarkup","title":"How We Built a Real-time Privacy Inspector – The Markup","image":"https://mrkp-static-production.themarkup.org/uploads/2020/09/show-your-work-blacklight-1200x600.jpg"},"archivedData":{"link":false,"wayback":false}}}