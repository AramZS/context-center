{"initialLink":"https://web.dev/trust-tokens/","sanitizedLink":"https://web.dev/trust-tokens/","finalLink":"https://web.dev/trust-tokens/","htmlEmbed":"<script>window.contexterSetup=window.contexterSetup||function(){window.contexterSetupComplete=!0;class ContexterLink extends HTMLAnchorElement{constructor(){super()}connectedCallback(){this.setAttribute(\"target\",\"_blank\")}}customElements.define(\"contexter-link\",ContexterLink,{extends:\"a\"}),customElements.define(\"contexter-inner\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__inner\"}}),customElements.define(\"contexter-thumbnail\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__thumbnail\"}}),customElements.define(\"contexter-byline\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__byline\"}}),customElements.define(\"contexter-keywordset\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__keywordset\"}}),customElements.define(\"contexter-linkset\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__linkset\"}}),customElements.define(\"contexter-meta\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__meta\"}}),customElements.define(\"contexter-summary\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"p-summary entry-summary\"}}),customElements.define(\"contexter-box-head\",class extends HTMLElement{constructor(){super()}connectedCallback(){this.className=\"contexter-box__head\"}}),customElements.define(\"contexter-box-inner\",class extends HTMLElement{constructor(){super()}connectedCallback(){}});class ContexterBox extends HTMLElement{constructor(){super(),this.first=!0,this.shadow=this.attachShadow({mode:\"open\"})}connectedCallback(){if(this.first){this.first=!1;var style=document.createElement(\"style\"),lightDomStyle=(style.innerHTML=`:host {--background: #f5f6f7;--border: darkblue;--blue: #0000ee;--font-color: black;--inner-border: black;font-family: Franklin,Arial,Helvetica,sans-serif;font-size: 14px;background: var(--background);width: 600px;color: var(--font-color);min-height: 90px;display: block;padding: 8px;border: 1px solid var(--border);cursor: pointer;box-sizing: border-box;margin: 6px;contain: content;margin: 6px auto;}// can only select top-level nodes with slotted::slotted(*) {max-width: 100%;display:block;}::slotted([slot=thumbnail]) {max-width: 100%;display:block;}::slotted([slot=header]) {width: 100%;font-size: 1.25rem;font-weight: bold;display:block;margin-bottom: 6px;}::slotted([slot=author]) {max-width: 50%;font-size: 12px;display:inline-block;float: left;}::slotted([slot=time]) {max-width: 50%;font-size: 12px;display:inline-block;float: right;}::slotted([slot=summary]) {width: 100%;margin-top: 6px;padding: 10px 2px;border-top: 1px solid var(--inner-border);font-size: 15px;display:inline-block;margin-bottom: 6px;}contexter-meta {height: auto;margin-bottom: 4px;width: 100%;display: grid;position: relative;min-height: 16px;grid-template-columns: repeat(2, 1fr);}::slotted([slot=keywords]) {width: 80%;padding: 2px 4px;border-top: 1px solid var(--inner-border);font-size: 11px;display: block;float: right;font-style: italic;text-align: right;grid-column: 2/2;grid-row: 1;align-self: end;justify-self: end;}::slotted([slot=keywords]):empty {border-top: 0px solid var(--inner-border);}::slotted([slot=archive-link]) {font-size: 1em;display: inline;}::slotted([slot=archive-link])::after {content: \"|\";display: inline;color: var(--font-color);text-decoration: none;margin: 0 .5em;}::slotted([slot=read-link]) {font-size: 1em;display: inline;}contexter-linkset {width: 80%;padding: 2px 4px;font-size: 13px;float: left;font-weight: bold;grid-row: 1;grid-column: 1/2;align-self: end;justify-self: start;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {:host {width: 310px;}}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){:host {--background: #354150;--border: #1f2b37;--blue: #55b0ff;--font-color: #ffffff;--inner-border: #787a7c;background: var(--background);border: 1px solid var(--border)}}`,document.createElement(\"style\"));lightDomStyle.innerHTML=`contexter-box {contain: content;}contexter-box .read-link {font-weight: bold;}contexter-box a {color: #0000ee;}contexter-box img {width: 100%;border: 0;padding: 0;margin: 0;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {...}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){contexter-box a {color: #55b0ff;}}`,this.appendChild(lightDomStyle),this.shadow.appendChild(style);const innerContainer=document.createElement(\"contexter-box-inner\"),innerSlotThumbnail=(this.shadow.appendChild(innerContainer),document.createElement(\"slot\")),innerSlotHeader=(innerSlotThumbnail.name=\"thumbnail\",innerContainer.appendChild(innerSlotThumbnail),document.createElement(\"slot\")),innerSlotAuthor=(innerSlotHeader.name=\"header\",innerContainer.appendChild(innerSlotHeader),document.createElement(\"slot\")),innerSlotTime=(innerSlotAuthor.name=\"author\",innerContainer.appendChild(innerSlotAuthor),document.createElement(\"slot\")),innerSlotSummary=(innerSlotTime.name=\"time\",innerContainer.appendChild(innerSlotTime),document.createElement(\"slot\")),metaContainer=(innerSlotSummary.name=\"summary\",innerContainer.appendChild(innerSlotSummary),document.createElement(\"contexter-meta\")),innerSlotInfo=(innerContainer.appendChild(metaContainer),document.createElement(\"slot\")),linkContainer=(innerSlotInfo.name=\"keywords\",metaContainer.appendChild(innerSlotInfo),document.createElement(\"contexter-linkset\")),innerSlotArchiveLink=(metaContainer.appendChild(linkContainer),document.createElement(\"slot\")),innerSlotReadLink=(innerSlotArchiveLink.name=\"archive-link\",linkContainer.appendChild(innerSlotArchiveLink),document.createElement(\"slot\"));innerSlotReadLink.name=\"read-link\",linkContainer.appendChild(innerSlotReadLink),this.className=\"contexter-box\",this.onclick=e=>{if(!e.target.className.includes(\"read-link\")&&!e.target.className.includes(\"title-link\")){const mainLinks=this.querySelectorAll(\"a.main-link\");mainLinks[0].click()}}}}}customElements.define(\"contexter-box\",ContexterBox)},window.contexterSetupComplete||window.contexterSetup();</script><contexter-box class=\"link-card h-entry hentry\" itemscope=\"\" itemtype=\"https://schema.org/CreativeWork\"><contexter-thumbnail class=\"thumbnail\" slot=\"thumbnail\"></contexter-thumbnail><contexter-box-head slot=\"header\" class=\"p-name entry-title\" itemprop=\"headline\"><contexter-box-head slot=\"header\" class=\"p-name entry-title\" itemprop=\"headline\"><a is=\"contexter-link\" href=\"https://web.dev/trust-tokens/\" itemprop=\"url\">Getting started with Trust Tokens</a></contexter-box-head></contexter-box-head><time class=\"dt-published published\" slot=\"time\" itemprop=\"datePublished\" datetime=\"2022-04-05T17:38:38.977Z\">3/5/2022</time><contexter-summary class=\"p-summary entry-summary\" itemprop=\"abstract\" slot=\"summary\"><p>Trust Tokens is a new API to enable a website to convey a limited amount of information from one browsing context to another (for example, across sites) to help combat fraud, without passive tracking.</p></contexter-summary><contexter-keywordset itemprop=\"keywords\" slot=\"keywords\"></contexter-keywordset><a is=\"contexter-link\" href=\"https://web.dev/trust-tokens/\" class=\"read-link main-link\" itemprop=\"sameAs\" slot=\"read-link\">Read</a></contexter-box>","linkId":"d14c45715b1447b484fb27a82db885c90cb53c6b","data":{"originalLink":"https://web.dev/trust-tokens/","sanitizedLink":"https://web.dev/trust-tokens/","canonical":"https://web.dev/trust-tokens/","htmlText":"<!doctypehtml><html lang=en><meta charset=utf-8><meta content=width=device-width,initial-scale=1.0 name=viewport><link as=font href=/fonts/google-sans/regular/latin.woff2 rel=preload><link as=font href=/fonts/google-sans/bold/latin.woff2 rel=preload><link href=https://web-dev.imgix.net rel=preconnect><meta content=#fff name=theme-color><title>Getting started with Trust Tokens</title><meta name=description><link href=https://web.dev/trust-tokens/ rel=canonical><link href=https://web.dev/i18n/ja/trust-tokens/ hreflang=ja rel=alternate><link href=https://web.dev/i18n/ko/trust-tokens/ hreflang=ko rel=alternate><link href=https://web.dev/i18n/ru/trust-tokens/ hreflang=ru rel=alternate><link href=https://web.dev/i18n/zh/trust-tokens/ hreflang=zh rel=alternate><link href=https://web.dev/trust-tokens/ hreflang=en rel=alternate><meta content=\"Getting started with Trust Tokens\"itemprop=name><meta itemprop=description><meta content=https://web-dev.imgix.net/image/admin/cTo0l2opcfNxg1TEjxSg.jpg?auto=format&fit=max&w=1200&fm=auto itemprop=image><meta content=en_US property=og:locale><meta content=article property=og:type><meta content=https://web.dev/trust-tokens/ property=og:url><meta content=web.dev property=og:site_name><meta content=\"Getting started with Trust Tokens\"property=og:title><meta property=og:description><meta content=https://web-dev.imgix.net/image/admin/cTo0l2opcfNxg1TEjxSg.jpg?auto=format&fit=max&w=1200&fm=auto property=og:image><meta content=\"Black and white photograph of hand holding token\"property=og:image:alt><meta content=privacy property=tag><meta content=security property=tag><meta content=summary_large_image name=twitter:card><meta content=\"Getting started with Trust Tokens\"name=twitter:title><meta name=twitter:description><meta content=https://web-dev.imgix.net/image/admin/cTo0l2opcfNxg1TEjxSg.jpg?auto=format&fit=max&w=1200&fm=auto name=twitter:image><link data-title=\"web.dev feed\"href=/feed.xml rel=alternate type=application/atom+xml><link href=/manifest.webmanifest rel=manifest><link rel=\"shortcut icon\"href=/images/favicon.ico><link href=/images/favicon-32x32.png rel=icon sizes=32x32 type=image/png><link href=/images/favicon-16x16.png rel=icon sizes=16x16 type=image/png><link href=/images/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><link color=#0054ff href=/images/safari-pinned-tab.svg rel=mask-icon><script>window.applyThemeSetting=function(e){const t=window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\",o=e||localStorage.getItem(\"user-color-scheme\")||t,r=document.documentElement.getAttribute(\"data-user-theme\");if(o){o!==r&&document.documentElement.setAttribute(\"data-user-theme\",o);const e=document.querySelector(\"web-lighthouse-viewer article.lh-root\");e&&e.classList.toggle(\"lh-dark\",\"dark\"===o)}},window.applyThemeSetting();</script><link href=/css/next.css?v=32c217b9 rel=stylesheet><link href=/css/legacy-rollout.css?v=c92bcb17 rel=stylesheet><link as=font href=/fonts/material-icons/regular.woff2 rel=preload><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga(\"create\",\"UA-126406676-2\"),ga(\"set\",\"transport\",\"beacon\"),ga(\"set\",\"anonymizeIp\",!0),ga(\"set\",\"page\",window.location.pathname),ga(\"set\",\"dimension5\",\"9\");try{ga(\"set\",\"dimension6\",performance.getEntriesByType(\"navigation\")[0].type)}catch(a){ga(\"set\",\"dimension6\",\"(not set)\")}ga(\"send\",\"pageview\");</script><script>function loadScript(e,t){const d=document.createElement(\"script\");if(d.src=e,d.onload=()=>{document.dispatchEvent(new CustomEvent(\"scriptLoaded\",{detail:{url:e}}))},t&&(d.type=t),\"module\"===t){d.async=!1;const t=document.createElement(\"link\");t.rel=\"modulepreload\",t.href=e,document.head.append(t),window.addEventListener(\"DOMContentLoaded\",(()=>{document.head.append(d)}))}else document.head.append(d)}loadScript(\"/js/app.js?v=145f0867\",\"module\");let pageScripts=[\"/js/content.js\"];document.addEventListener(\"scriptLoaded\",(e=>{const t=e.detail.url.split(\"?\")[0],d=pageScripts.indexOf(t);d>-1&&pageScripts.splice(d,1),0===pageScripts.length&&document.dispatchEvent(new CustomEvent(\"pageScriptsLoaded\"))})),loadScript(\"/js/content.js?v=ba13cad3\",\"module\");</script><script>loadScript(\"https://www.google-analytics.com/analytics.js\",null),loadScript(\"https://www.google.com/recaptcha/api.js\",null);</script><body class=unresolved><web-snackbar-container></web-snackbar-container><a class=\"skip-link button\"data-type=primary href=#main>Skip to content</a><web-header class=site-header role=banner> <div class=\"cluster gutter-base\"><button class=\"icon-button tooltip color-core-text md:hidden-yes\"data-alignment=right data-open-drawer-button><svg viewbox=\"0 0 24 24\"height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M0 0h24v24H0z\"fill=none /><path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"/></svg> <span class=tooltip__content>Open menu</span></button><a class=\"site-header__brand brand\"href=/> <svg viewbox=\"0 0 119.79 22.32\"aria-label=web.dev height=22.32 role=img width=119.79 xmlns=http://www.w3.org/2000/svg><path d=\"M114.99 19.32h-2.2l-4.8-11.9h2.4l3.5 9.2 3.5-9.2h2.4Zm-16.8-7.3h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.56 3.56 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-14 0c-3.1 0-5.7-2.8-5.7-6.3s2.6-6.3 5.7-6.3a5 5 0 0 1 4.1 2h.1l-.1-1.6v-5.5h2.2v17.3h-2.1v-1.6h-.1a5.12 5.12 0 0 1-4.1 2Zm.3-2c2.2 0 3.8-1.7 3.8-4.3s-1.6-4.3-3.8-4.3a4 4 0 0 0-3.8 4.3 4 4 0 0 0 3.8 4.3Zm-6.8.1a1.61 1.61 0 0 1-1.7 1.6 1.74 1.74 0 0 1-1.7-1.6 1.67 1.67 0 0 1 1.7-1.6 1.61 1.61 0 0 1 1.7 1.6Zm-10.5-.1a4 4 0 0 0 3.8-4.3 4 4 0 0 0-3.8-4.3c-2.2 0-3.8 1.8-3.8 4.3s1.6 4.3 3.8 4.3Zm.4 2a5 5 0 0 1-4.1-2h-.1v1.6h-2.1V2.02h2.2v5.5l-.1 1.6h.1a4.84 4.84 0 0 1 4.1-2c3.1 0 5.7 2.8 5.7 6.3s-2.6 6.3-5.7 6.3Zm-17.4-7.7h6.8a3.17 3.17 0 0 0-3.4-2.9 3.42 3.42 0 0 0-3.4 2.9Zm3.6 7.7a6 6 0 0 1-6-6.3c0-3.6 2.5-6.3 5.9-6.3s5.8 2.4 5.8 6.5v.2h-9.3a3.88 3.88 0 0 0 3.8 3.9 3.67 3.67 0 0 0 3.3-2.1l2 1a6.22 6.22 0 0 1-5.5 3.1Zm-6.3-12.2-3.8 11.9h-2.3l-3-9.1-2.9 9.1h-2.3l-3.9-11.9h2.3l2.6 9 2.9-9h2.3l2.9 9 2.6-9Z\"class=brand__text fill=#5f6368 fill-rule=evenodd /><path d=\"M0 19.28a3 3 0 0 1 3-3h16.27a3.045 3.045 0 0 1 0 6.09H3.04A3 3 0 0 1 0 19.28Z\"fill=#6cf /><path d=\"M.89.9a3 3 0 0 1 4.3 0l8.12 8.11a3.05 3.05 0 0 1 0 4.3l-8.12 8.12a3.04 3.04 0 1 1-4.3-4.3l5.6-5.61a.51.51 0 0 0 0-.72L.89 5.22A3 3 0 0 1 .89.9Z\"fill=#06f fill-rule=evenodd /><path d=\"m10.39 16.22-5.2 5.2a3.04 3.04 0 1 1-4.3-4.3l.89-.9Z\"fill=#c6f /><circle cx=19.27 cy=19.27 fill=#06f r=3.04 /></svg> </a></div> <web-navigation-drawer type=standard> <nav aria-label=\"main navigation\"class=site-header__nav data-drawer-container><a data-category=\"Site-Wide Custom Events\"data-label=\"Tab: Learn\"class=site-header__link href=/learn/> Learn </a><a data-category=\"Site-Wide Custom Events\"data-label=\"Tab: Measure\"class=site-header__link href=/measure/> Measure </a><a data-category=\"Site-Wide Custom Events\"data-label=\"Tab: Blog\"class=site-header__link href=/blog/> Blog </a><a data-category=\"Site-Wide Custom Events\"data-label=\"Tab: Case Studies\"class=site-header__link href=/tags/case-study/> Case studies </a><a data-category=\"Site-Wide Custom Events\"data-label=\"Tab: About\"class=site-header__link href=/about/> About </a><button class=\"icon-button tooltip color-core-text md:hidden-yes\"data-drawer-close-button><svg viewbox=\"0 0 24 24\"aria-label=close class=icon height=24 role=img width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M0 0h24v24H0z\"fill=none /><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/></svg> <span class=tooltip__content>Close</span></button></nav> </web-navigation-drawer> <div class=\"site-header__actions cluster\"><div class=site-header__search><web-search i18n='{\"search\":{\"en\":\"Search\"},\"open_search\":{\"en\":\"Open search\"},\"all_articles\":{\"en\":\"All articles\"},\"close_search\":{\"en\":\"Close search\"}}'results-id=search-main-results></web-search><web-search-results id=search-main-results></web-search-results></div></div> </web-header><main id=main><img alt=\"Black and white photograph of hand holding token\"srcset=\"https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format&w=1600 1600w\"class=hero-image height=480 importance=high sizes=100vw src=https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format width=1600><div class=\"post wrapper\"data-flush><div class=\"sidebar region flex-align-start flex-dir-rev flex-wrap-no\"><nav aria-label=\"On this page\"class=\"course__toc toc over-scroll hidden-yes xl:hidden-no\"data-type=side><div class=\"course-toc__heading font-google-sans weight-medium\">On this page</div><web-scroll-spy> <div class=\"toc__wrapper flow-recursive\"><ul class=toc__list><li class=toc__listitem><a class=toc__anchor href=#summary>Summary</a><li class=toc__listitem><a class=toc__anchor href=#why-do-we-need-trust-tokens>Why do we need Trust Tokens?</a><li class=toc__listitem><a class=toc__anchor href=#what's-in-the-trust-tokens-proposal>What's in the Trust Tokens proposal?</a><li class=toc__listitem><a class=toc__anchor href=#sample-api-usage>Sample API usage</a><ul class=toc__list><li class=toc__listitem><a class=toc__anchor href=#trust-token-issuance>Trust token issuance</a><li class=toc__listitem><a class=toc__anchor href=#trust-token-redemption>Trust token redemption</a><li class=toc__listitem><a class=toc__anchor href=#privacy-considerations>Privacy considerations</a><li class=toc__listitem><a class=toc__anchor href=#security-considerations>Security considerations</a><li class=toc__listitem><a class=toc__anchor href=#request-mechanisms>Request mechanisms</a></ul><li class=toc__listitem><a class=toc__anchor href=#find-out-more>Find out more</a></ul></div> </web-scroll-spy></nav><article class=\"prose legacy-rollout\"><header class=\"flow gap-bottom-size-3\"><nav aria-label=breadcrumbs class=breadcrumbs><ul class=breadcrumbs__list role=list><li><a data-label=\"post, home breadcrumb\"class=gc-analytics-event data-action=click data-category=web.dev href=/> Home </a><li><a data-label=\"post, path breadcrumb\"class=gc-analytics-event data-action=click data-category=web.dev href=/blog> All articles </a></ul></nav><h1 id=getting-started-with-trust-tokens>Getting started with Trust Tokens</h1><p class=\"color-mid-text flow-space-base\">Trust Tokens is a new API to enable a website to convey a limited amount of information from one browsing context to another (for example, across sites) to help combat fraud, without passive tracking.<div class=\"flow-space-size-1 color-mid-text text-size-0\"><time>Jun 22, 2020</time> — Updated <time>Dec 10, 2021</time></div><div class=flow><span class=w-post-signpost__title>Available in: <a class=w-post-signpost__link href=/i18n/ja/trust-tokens/ lang=ja translate=no> 日本語</a>, <a class=w-post-signpost__link href=/i18n/ko/trust-tokens/ lang=ko translate=no> 한국어</a>, <a class=w-post-signpost__link href=/i18n/ru/trust-tokens/ lang=ru translate=no> Русский</a>, <a class=w-post-signpost__link href=/i18n/zh/trust-tokens/ lang=zh translate=no> 中文</a>, <a class=w-post-signpost__link href=/i18n/en/trust-tokens/ lang=en translate=no> English</a></span></div><div class=\"w-layout-container--narrow w-post-signpost\"><span class=w-post-signpost__title> Appears in: </span><a class=w-post-signpost__link href=/secure>Safe and secure</a></div><div class=\"cluster flow-space-size-2\"><div class=author><a class=avatar href=/authors/samdutton/> <img alt=\"Sam Dutton\"sizes=\"(min-width: 64px) 64px, calc(100vw - 48px)\"srcset=\"https://web-dev.imgix.net/image/admin/wPss4TJX9IJ1CJza7iFY.jpg?fit=crop&h=64&w=64&auto=format&dpr=1&q=75 1x,     https://web-dev.imgix.net/image/admin/wPss4TJX9IJ1CJza7iFY.jpg?fit=crop&h=64&w=64&auto=format&dpr=2&q=50 2x,     https://web-dev.imgix.net/image/admin/wPss4TJX9IJ1CJza7iFY.jpg?fit=crop&h=64&w=64&auto=format&dpr=3&q=35 3x,     https://web-dev.imgix.net/image/admin/wPss4TJX9IJ1CJza7iFY.jpg?fit=crop&h=64&w=64&auto=format&dpr=4&q=23 4x,     https://web-dev.imgix.net/image/admin/wPss4TJX9IJ1CJza7iFY.jpg?fit=crop&h=64&w=64&auto=format&dpr=5&q=20 5x\"decoding=async height=64 loading=lazy src=https://web-dev.imgix.net/image/admin/wPss4TJX9IJ1CJza7iFY.jpg?auto=format&fit=crop&h=64&w=64 width=64> </a><div class=flow><cite class=author__name> <a href=/authors/samdutton/>Sam Dutton</a> </cite><div class=\"author__links cluster\"><a href=https://twitter.com/sw12>Twitter</a><a href=https://github.com/samdutton>GitHub</a></div></div></div></div></header><div class=\"xl:hidden-yes flow-space-size-1\"><details aria-label=\"On this page\"data-type=inner role=navigation><summary>On this page</summary> <div class=toc><ul class=toc__list><li class=toc__listitem><a class=toc__anchor href=#summary>Summary</a><li class=toc__listitem><a class=toc__anchor href=#why-do-we-need-trust-tokens>Why do we need Trust Tokens?</a><li class=toc__listitem><a class=toc__anchor href=#what's-in-the-trust-tokens-proposal>What's in the Trust Tokens proposal?</a><li class=toc__listitem><a class=toc__anchor href=#sample-api-usage>Sample API usage</a><ul class=toc__list><li class=toc__listitem><a class=toc__anchor href=#trust-token-issuance>Trust token issuance</a><li class=toc__listitem><a class=toc__anchor href=#trust-token-redemption>Trust token redemption</a><li class=toc__listitem><a class=toc__anchor href=#privacy-considerations>Privacy considerations</a><li class=toc__listitem><a class=toc__anchor href=#security-considerations>Security considerations</a><li class=toc__listitem><a class=toc__anchor href=#request-mechanisms>Request mechanisms</a></ul><li class=toc__listitem><a class=toc__anchor href=#find-out-more>Find out more</a></ul></div></details></div><aside class=\"aside flow bg-state-bad-bg color-state-bad-text\"><p class=\"cluster color-state-bad-text\"><span class=\"aside__icon box-block\"><svg aria-label=\"Error sign\"viewbox=\"0 0 24 24\"fill=currentColor height=24 role=img width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-2h2v2h-2zm0-10v6h2V7h-2z\"clip-rule=evenodd fill-rule=evenodd /></svg></span> <strong>Caution</strong><div class=flow><p><strong>⚠️ Warning: you may need to update your app!</strong><p><strong>TrustTokenV3</strong> is a collection of backwards-incompatible changes to Chromium's Trust Tokens implementation. The changes arrived in Chrome 92, which reached Chrome Stable towards the end of July 2021.<p>If you haven't already, you will need to update existing applications <a href=https://www.chromestatus.com/feature/5078049450098688 rel=noopener>testing the API</a>.<p>Find out more: <a href=https://bit.ly/what-is-trusttokenv3 rel=noopener>What's TrustTokenV3?</a>.</div></aside><p><br><br><div class=youtube><lite-youtube videoid=bXB1Iwq6Eq4> </lite-youtube></div><h2 id=summary>Summary <a class=w-headline-link href=#summary>#</a></h2><p>Trust tokens enable an origin to issue cryptographic tokens to a user it trusts. The tokens are stored by the user's browser. The browser can then use the tokens in other contexts to evaluate the user's authenticity.<p>The Trust Token API enables trust of a user in one context to be conveyed to another context without identifying the user or linking the two identities.<p>You can try out the API with our <a href=https://trust-token-demo.glitch.me rel=noopener>demo</a>, and <a href=https://developers.google.com/web/updates/2021/01/devtools#trust-token rel=noopener>inspect tokens</a> in the Chrome DevTools <strong>Network</strong> and <strong>Application</strong> tabs.<figure><img alt=\"Screenshot showing Trust Tokens in the Chrome DevTools Network tab.\"sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\"srcset=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&w=1600 1600w\"decoding=async height=584 loading=lazy src=https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format width=800><figcaption>Trust Tokens in the Chrome DevTools <b>Network</b> tab.</figcaption></figure><figure><img alt=\"Screenshot showing Trust Tokens in the Chrome DevTools Application tab.\"sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\"srcset=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&w=1600 1600w\"decoding=async height=584 loading=lazy src=https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format width=800><figcaption>Trust Tokens in the Chrome DevTools <b>Application</b> tab.</figcaption></figure><aside class=\"aside flow bg-state-info-bg color-state-info-text\"><div class=flow><p>The Privacy Sandbox is a series of proposals to satisfy third-party use cases without third-party cookies or other tracking mechanisms. See <a href=/digging-into-the-privacy-sandbox>Digging into the Privacy Sandbox</a> for an overview of all the proposals.<p><strong>This proposal needs your feedback!</strong> If you have comments, please <a href=https://github.com/WICG/trust-token-api/issues/new rel=noopener>create an issue</a> on the <a href=https://github.com/WICG/trust-token-api rel=noopener>Trust Token explainer</a> repository.</div></aside><h2 id=why-do-we-need-trust-tokens>Why do we need Trust Tokens? <a class=w-headline-link href=#why-do-we-need-trust-tokens>#</a></h2><p>The web needs ways to establish trust signals which show that a user is who they say they are, and not a bot pretending to be a human, or a malicious third-party defrauding a real person or service. Fraud protection is particularly important for advertisers, ad providers, and CDNs.<p>Unfortunately, many existing mechanisms to gauge and propagate trustworthiness—to work out if an interaction with a site is from a real human, for example—take advantage of techniques that can also be used for fingerprinting.<aside class=\"aside flow color-secondary-box-text bg-secondary-box-bg\"><p class=cluster><span class=\"aside__icon box-block\"><svg aria-label=\"Highlighter pen\"viewbox=\"0 0 24 24\"fill=currentColor height=24 role=img width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M10.22 9.49l-5.91 6c-.77.8-.7 2.05.08 2.85L.77 22h5.68l.74-.75c.78.81 1.95.86 2.73.05l5.96-6.05-5.66-5.76zm12.46-4l-2.82-2.87c-.78-.8-2.07-.84-2.84-.04l-5.75 5.85 5.66 5.75 5.69-5.78c.77-.81.83-2.11.06-2.91z\"clip-rule=evenodd fill-rule=evenodd /></svg></span> <strong>Key Term</strong><div class=flow><p><strong>Fingerprinting</strong> enables sites to identify and track individual users by getting data about their device, operating system, and browser setup (such as language preferences, <a href=https://developer.mozilla.org/docs/Web/API/NavigatorID/userAgent rel=noopener>user agent</a>, and available fonts) or changes in device state. This may be done on the server by checking request headers or on the client with JavaScript.<p>Fingerprinting uses mechanisms that users aren't aware of and can't control. Sites such as <a href=https://panopticlick.eff.org/ rel=noopener>Panopticlick</a> and <a href=https://amiunique.org/ rel=noopener>amiunique.org</a> show how fingerprint data can be combined to identify you as an individual.</div></aside><p>The API must preserve privacy, enabling trust to be propagated across sites without individual user tracking.<h2 id=what's-in-the-trust-tokens-proposal>What's in the Trust Tokens proposal? <a class=w-headline-link href=#what's-in-the-trust-tokens-proposal>#</a></h2><p>The web relies on building trust signals to detect fraud and spamming. One way to do this is by tracking browsing with global, cross-site per-user identifiers. For a privacy-preserving API, that's not acceptable.<p>From the proposal <a href=https://github.com/WICG/trust-token-api#overview rel=noopener><strong>explainer</strong></a>:<blockquote><p>This API proposes a new per-origin storage area for \"Privacy Pass\" style cryptographic tokens, which are accessible in third party contexts. These tokens are non-personalized and cannot be used to track users, but are cryptographically signed so they cannot be forged.<p>When an origin is in a context where they trust the user, they can issue the browser a batch of tokens, which can be \"spent\" at a later time in a context where the user would otherwise be unknown or less trusted. Crucially, the tokens are indistinguishable from one another, preventing websites from tracking users through them.<p>We further propose an extension mechanism for the browser to sign outgoing requests with keys bound to a particular token redemption.</blockquote><h2 id=sample-api-usage>Sample API usage <a class=w-headline-link href=#sample-api-usage>#</a></h2><p>The following is adapted from <a href=https://github.com/WICG/trust-token-api#sample-api-usage rel=noopener>sample code in the API explainer</a>.<aside class=\"aside flow bg-state-info-bg color-state-info-text\"><div class=flow><p>The code in this post uses updated syntax available since Chrome 88.</div></aside><p>Imagine that a user visits a news website (<code>publisher.example</code>) which embeds advertising from a third party ad network (<code>foo.example</code>). The user has previously used a social media site that issues trust tokens (<code>issuer.example</code>).<p>The sequence below shows how trust tokens work.<p><strong>1.</strong> The user visits <code>issuer.example</code> and performs actions that lead the site to believe they are a real human, such as account activity, or passing a CAPTCHA challenge.<p><strong>2.</strong> <code>issuer.example</code> verifies the user is a human, and runs the following JavaScript to issue a trust token to the user's browser:</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://issuer.example/trust-token'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token literal-property property\">trustToken</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'token-request'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token literal-property property\">issuer</span><span class=\"token operator\">:</span> <span class=\"token string\">'https://issuer.example'</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span></code></pre> </web-copy-code><p><strong>3.</strong> The user's browser stores the trust token, associating it with <code>issuer.example</code>.<p><strong>4.</strong> Some time later, the user visits <code>publisher.example</code>.<p><strong>5.</strong> <code>publisher.example</code> wants to know if the user is a real human. <code>publisher.example</code> trusts <code>issuer.example</code>, so they check if the user's browser has valid tokens from that origin:</p><web-copy-code><pre class=language-js><code class=language-js>document<span class=\"token punctuation\">.</span><span class=\"token function\">hasTrustToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://issuer.example'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre> </web-copy-code><p><strong>6.</strong> If this returns a promise that resolves to <code>true</code>, that means the user has tokens from <code>issuer.example</code>, so <code>publisher.example</code> can attempt to redeem a token:</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://issuer.example/trust-token'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><br><span class=\"token literal-property property\">trustToken</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'token-redemption'</span><span class=\"token punctuation\">,</span><br>  <span class=\"token literal-property property\">issuer</span><span class=\"token operator\">:</span> <span class=\"token string\">'https://issuer.example'</span><span class=\"token punctuation\">,</span><br>  <span class=\"token literal-property property\">refreshPolicy</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>none<span class=\"token punctuation\">,</span> refresh<span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span></code></pre> </web-copy-code><p>With this code:<ol><li>The redeemer <code>publisher.example</code> requests a redemption.<li>If the redemption is successful, the issuer <code>issuer.example</code> returns a redemption record which indicates that at some point they issued a valid token to this browser.</ol><p><strong>7.</strong> Once the promise returned by <code>fetch()</code> has resolved, the redemption record can be used in subsequent resource requests:</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://foo.example/get-content'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token literal-property property\">trustToken</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'send-redemption-record'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token literal-property property\">issuers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'https://issuer.example'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">]</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre> </web-copy-code><p>With this code:<ol><li>Redemption records are included as a request header <code>Sec-Redemption-Record</code>.<li><code>foo.example</code> receives the redemption record and can parse the record to determine whether <code>issuer.example</code> thought this user was a human.<li><code>foo.example</code> responds accordingly.</ol><details><summary>How can a website work out whether to trust you?</summary> You might have shopping history with an e-commerce site, check-ins on a location platform, or account history at a bank. Issuers might also look at other factors such as how long you've had an account, or other interactions (such as CAPTCHAs or form submission) that increase the issuer's trust in the likelihood that you're a real human.</details><h3 id=trust-token-issuance>Trust token issuance <a class=w-headline-link href=#trust-token-issuance>#</a></h3><p>If the user is deemed to be trustworthy by a trust token issuer such as <code>issuer.example</code>, the issuer can fetch trust tokens for the user by making a <code>fetch()</code> request with a <code>trustToken</code> parameter:</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'issuer.example/trust-token'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token literal-property property\">trustToken</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'token-request'</span><br>  <span class=\"token punctuation\">}</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span></code></pre> </web-copy-code><p>This invokes an extension of the <a href=https://privacypass.github.io/ rel=noopener>Privacy Pass</a> issuance protocol using a <a href=https://eprint.iacr.org/2020/072.pdf rel=noopener>new cryptographic primitive</a>:<ol><li><p>Generate a set of pseudo-random numbers known as <em>nonces</em>.</p><li><p>Blind the nonces (encode them so the issuer can't view their contents) and attach them to the request in a <code>Sec-Trust-Token</code> header.</p><li><p>Send a POST request to the endpoint provided.</p></ol><p>The endpoint responds with <a href=https://en.wikipedia.org/wiki/Blind_signature rel=noopener>blinded tokens</a> (signatures on the blind nonces), then the tokens are unblinded and stored internally together with the associated nonces by the browser as trust tokens.<h3 id=trust-token-redemption>Trust token redemption <a class=w-headline-link href=#trust-token-redemption>#</a></h3><p>A publisher site (such as <code>publisher.example</code> in the example above) can check if there are trust tokens available for the user:</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token keyword\">const</span> userHasTokens <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">hasTrustToken</span><span class=\"token punctuation\">(</span><span class=\"token string\">'issuer.example/trust-token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre> </web-copy-code><p>If there are tokens available, the publisher site can redeem them to get a redemption record:</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'issuer.example/trust-token'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token operator\">...</span><br>  <span class=\"token literal-property property\">trustToken</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'token-redemption'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token literal-property property\">refreshPolicy</span><span class=\"token operator\">:</span> <span class=\"token string\">'none'</span><br>  <span class=\"token punctuation\">}</span><br>  <span class=\"token operator\">...</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span></code></pre> </web-copy-code><p>The publisher can include redemption records in requests that require a trust token—such as posting a comment, liking a page, or voting in a poll—by using a <code>fetch()</code> call like the following:</p><web-copy-code><pre class=language-js><code class=language-js><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://foo.example/post-comment'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><br>  <span class=\"token operator\">...</span><br>  <span class=\"token literal-property property\">trustToken</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><br>    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'send-redemption-record'</span><span class=\"token punctuation\">,</span><br>    <span class=\"token literal-property property\">issuers</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'issuer.example/trust-token'</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">]</span><br>  <span class=\"token punctuation\">}</span><br>  <span class=\"token operator\">...</span><br><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre> </web-copy-code><p>Redemption records are included as a <code>Sec-Redemption-Record</code> request header.<aside class=\"aside flow bg-state-info-bg color-state-info-text\"><div class=flow><p>Trust tokens are only accessible through options to Fetch, XHR, and the HTML <code>&LTiframe></code> element: they cannot be accessed directly.</div></aside><h3 id=privacy-considerations>Privacy considerations <a class=w-headline-link href=#privacy-considerations>#</a></h3><p>Tokens are designed to be 'unlinkable'. An issuer can learn aggregate information about which sites its users visit, but can't link issuance with redemption: when a user redeems a token, the issuer can't tell the token apart from other tokens it has created. However, trust tokens currently do not exist in a vacuum: there are other ways an issuer could currently—in theory—join a user's identity across sites, such as third-party cookies and covert tracking techniques. It is important for sites to understand this ecosystem transition as they plan their support. This is a general aspect of the transition for many Privacy Sandbox APIs, so not discussed further here.<h3 id=security-considerations>Security considerations <a class=w-headline-link href=#security-considerations>#</a></h3><p><strong>Trust token exhaustion:</strong> a malicious site could deliberately deplete a user's supply of tokens from a particular issuer. There are several mitigations against this kind of attack, such as enabling issuers to provide many tokens at once, so users have an adequate supply of ensuring browsers only ever redeem one token per top-level page view.<p><strong>Double-spend prevention:</strong> malware might attempt to access all of a user's trust tokens. However, tokens will run out over time, since every redemption is sent to the same token issuer, which can verify that each token is used only once. To mitigate risk, issuers could also sign fewer tokens.<h3 id=request-mechanisms>Request mechanisms <a class=w-headline-link href=#request-mechanisms>#</a></h3><p>It might be possible to allow for sending redemption records outside of <code>fetch()</code>, for example with navigation requests. Sites might also be able to include issuer data in HTTP response headers to enable token redemption in parallel with page loading.<p><strong>To reiterate: this proposal needs your feedback!</strong> If you have comments, please <a href=https://github.com/WICG/trust-token-api/issues/new rel=noopener>create an issue</a> on the Trust Token <a href=https://github.com/WICG/trust-token-api rel=noopener>explainer repository</a>.<h2 id=find-out-more>Find out more <a class=w-headline-link href=#find-out-more>#</a></h2><ul><li><a href=https://trust-token-demo.glitch.me rel=noopener>Trust Tokens demo</a><li><a href=https://developer.chrome.com/blog/origin-trials/ rel=noopener>Getting started with Chrome's origin trials</a><li><a href=/digging-into-the-privacy-sandbox/>Digging in to the Privacy Sandbox</a><li><a href=https://github.com/WICG/trust-token-api rel=noopener>Trust Token API Explainer</a><li><a href=https://sites.google.com/a/chromium.org/dev/updates/trust-token rel=noopener>Chromium Projects: Trust Token API</a><li><a href=https://groups.google.com/a/chromium.org/g/blink-dev/c/X9sF2uLe9rA/m/1xV5KEn2DgAJ rel=noopener>Intent to Implement: Trust Token API</a><li><a href=https://www.chromestatus.com/feature/5078049450098688 rel=noopener>Chrome Platform Status</a><li><a href=https://privacypass.github.io/ rel=noopener>Privacy Pass</a><li><a href=https://eprint.iacr.org/2020/072.pdf rel=noopener>Extensions of Privacy Pass</a></ul><hr><p>Thanks to all those who helped write and review this post.<p>Photo by <a href=https://unsplash.com/photos/b4D7FKAghoE rel=noopener>ZSun Fu</a> on <a href=https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText rel=noopener>Unsplash</a>.<div class=\"cluster gutter-base flow-space-size-2\"aria-label=tags role=list><a class=pill href=/tags/privacy/>Privacy</a><a class=pill href=/tags/security/>Security</a></div><div class=\"text-size-0 color-mid-text\"><span> Last updated: <time>Dec 10, 2021</time> </span> — <a href=https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/trust-tokens/index.md> Improve article </a></div><div class=flow-space-size-2><a class=button data-type=secondary href=/blog> <svg viewbox=\"0 0 24 24\"height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M0 0h24v24H0z\"fill=none /><path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"/></svg> <span>Return to all articles</span> </a></div><div class=\"docked-actions flow flow-space-base\"><div><share-action class=\"gc-analytics-event fab\"authors=@sw12 data-action=click data-category=web.dev data-icon=share data-label=share data-type=primary role=button tabindex=0> <svg viewbox=\"0 0 24 24\"height=24 width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M0 0h24v24H0V0z\"fill=none /><path d=\"M18 16.1c-.8 0-1.4.3-2 .8l-7.1-4.2c.1-.2.1-.5.1-.7s0-.5-.1-.7L16 7.2c.5.5 1.2.8 2 .8 1.7 0 3-1.3 3-3s-1.3-3-3-3-3 1.3-3 3c0 .2 0 .5.1.7L8 9.8C7.5 9.3 6.8 9 6 9c-1.7 0-3 1.3-3 3s1.3 3 3 3c.8 0 1.5-.3 2-.8l7.1 4.2c-.1.2-.1.4-.1.6 0 1.6 1.3 2.9 2.9 2.9s2.9-1.3 2.9-2.9-1.2-2.9-2.8-2.9z\"fill=currentColor /></svg> <span class=fab__label>Share</span> </share-action></div><div><a class=\"fab gc-analytics-event\"data-action=click data-category=web.dev data-label=view-subscribe data-type=primary href=/newsletter/> <svg aria-label=\"An envelope with plus icon\"viewbox=\"0 0 24 24\"height=24 role=img width=24 xmlns=http://www.w3.org/2000/svg><path d=\"M13 20H4c-1.1 0-2-.9-2-2l.01-12c0-1.1.89-2 1.99-2h16c1.1 0 2 .9 2 2v7h-2V8l-8 5-8-5v10h9v2zm-1-9l8-5H4l8 5zm8 7h3v2h-3v3h-2v-3h-3v-2h3v-3h2v3z\"fill=currentColor fill-rule=nonzero /></svg> <span class=fab__label>subscribe</span> </a></div></div></article></div></div></main><footer class=site-footer role=contentinfo><nav aria-label=\"footer navigation\"class=\"site-footer__primary-nav auto-grid\"><div><h3 class=\"text-size-2 color-mid-text\">Contribute</h3><ul class=w-footer__linkbox-list role=list><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Link (index 1)\"href=https://github.com/GoogleChrome/web.dev/issues/new?assignees=&labels=bug&template=bug_report.md&title=> File a bug </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Link (index 2)\"href=https://github.com/googlechrome/web.dev> View source </a></ul></div><div><h3 class=\"text-size-2 color-mid-text\">Related content</h3><ul class=w-footer__linkbox-list role=list><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Link (index 1)\"href=https://developer.chrome.com/> developer.chrome.com </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Link (index 1)\"href=https://blog.chromium.org/> Chrome updates </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Link (index 2)\"href=https://developers.google.com/web/fundamentals> Web Fundamentals </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Link (index 3)\"href=/tags/case-study/> Case studies </a><li><a data-label=\"Footer Link (index 5)\"data-category=Podcasts href=/podcasts/> Podcasts </a><li><a data-label=\"Footer Link (index 6)\"data-category=Shows href=/shows/> Shows </a></ul></div><div><h3 class=\"text-size-2 color-mid-text\">Connect</h3><ul class=w-footer__linkbox-list role=list><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Link (index 1)\"href=https://www.twitter.com/ChromiumDev> Twitter </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Link (index 2)\"href=https://www.youtube.com/user/ChromeDevelopers> YouTube </a></ul></div></nav><nav aria-label=\"Google developers\"class=\"site-footer__brand-nav repel\"><ul class=cluster role=list><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Google Developers Link\"href=https://developers.google.com/> <img alt=\"Google Developers\"class=w-footer__utility-logo height=33 loading=lazy src=/images/lockup-color.png width=185> </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Chrome Link\"href=https://developer.chrome.com/> Chrome </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Firebase Link\"href=https://firebase.google.com/> Firebase </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Google Cloud Platform Link\"href=https://cloud.google.com/> Google Cloud Platform </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer All products Link\"href=https://developers.google.com/products> All products </a></ul><div class=cluster><theme-toggle> <label class=toggle-switch for=theme-toggle><span class=toggle-switch__label>Dark theme</span> <input class=toggle-switch__input id=theme-toggle role=switch type=checkbox> <div class=\"toggle-switch__decor focus-ring\"aria-hidden=true><div class=toggle-switch__thumb></div></div></label> </theme-toggle><web-language-select current=en></web-language-select></div></nav><nav aria-label=\"terms and policies\"class=site-footer__misc-links><ul class=cluster role=list><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Terms and Privacy link\"href=https://policies.google.com/> Terms & Privacy </a><li><a data-category=\"Site-Wide Custom Events\"data-label=\"Footer Community Guidelines link\"href=/community-guidelines/> Community Guidelines </a></ul></nav><p class=\"gap-top-size-2 text-size-0\">Except as otherwise noted, the content of this page is licensed under the <a href=https://creativecommons.org/licenses/by/4.0/> Creative Commons Attribution 4.0 License</a>, and code samples are licensed under the <a href=https://www.apache.org/licenses/LICENSE-2.0> Apache 2.0 License</a>. For details, see the <a href=https://developers.google.com/terms/site-policies> Google Developers Site Policies</a>.</footer>","oembed":false,"readabilityObject":{"title":"Getting started with Trust Tokens","content":"<div id=\"readability-page-1\" class=\"page\"><article><header><nav aria-label=\"breadcrumbs\"><ul role=\"list\"><li><a data-label=\"post, home breadcrumb\" data-action=\"click\" data-category=\"web.dev\" href=\"/\"> Home </a></li><li><a data-label=\"post, path breadcrumb\" data-action=\"click\" data-category=\"web.dev\" href=\"/blog\"> All articles </a></li></ul></nav><p>Trust Tokens is a new API to enable a website to convey a limited amount of information from one browsing context to another (for example, across sites) to help combat fraud, without passive tracking.</p><p><time>Jun 22, 2020</time> — Updated <time>Dec 10, 2021</time></p></header><h2 id=\"summary\">Summary <a href=\"#summary\">#</a></h2><p>Trust tokens enable an origin to issue cryptographic tokens to a user it trusts. The tokens are stored by the user's browser. The browser can then use the tokens in other contexts to evaluate the user's authenticity.</p><p>The Trust Token API enables trust of a user in one context to be conveyed to another context without identifying the user or linking the two identities.</p><p>You can try out the API with our <a href=\"https://trust-token-demo.glitch.me/\" rel=\"noopener\">demo</a>, and <a href=\"https://developers.google.com/web/updates/2021/01/devtools#trust-token\" rel=\"noopener\">inspect tokens</a> in the Chrome DevTools <strong>Network</strong> and <strong>Application</strong> tabs.</p><figure><img alt=\"Screenshot showing Trust Tokens in the Chrome DevTools Network tab.\" sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format&amp;w=1600 1600w\" decoding=\"async\" height=\"584\" loading=\"lazy\" src=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/krrI292OLd6awb4dxkN0.jpg?auto=format\" width=\"800\"><figcaption>Trust Tokens in the Chrome DevTools <b>Network</b> tab.</figcaption></figure><figure><img alt=\"Screenshot showing Trust Tokens in the Chrome DevTools Application tab.\" sizes=\"(min-width: 800px) 800px, calc(100vw - 48px)\" srcset=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=200 200w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=228 228w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=260 260w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=296 296w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=338 338w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=385 385w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=439 439w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=500 500w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=571 571w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=650 650w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=741 741w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=845 845w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=964 964w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=1098 1098w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=1252 1252w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=1428 1428w,     https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format&amp;w=1600 1600w\" decoding=\"async\" height=\"584\" loading=\"lazy\" src=\"https://web-dev.imgix.net/image/tcFciHGuF3MxnTr1y5ue01OGLBn2/cwR9JdoVo1M4VDovP2oM.jpg?auto=format\" width=\"800\"><figcaption>Trust Tokens in the Chrome DevTools <b>Application</b> tab.</figcaption></figure><h2 id=\"why-do-we-need-trust-tokens\">Why do we need Trust Tokens? <a href=\"#why-do-we-need-trust-tokens\">#</a></h2><p>The web needs ways to establish trust signals which show that a user is who they say they are, and not a bot pretending to be a human, or a malicious third-party defrauding a real person or service. Fraud protection is particularly important for advertisers, ad providers, and CDNs.</p><p>Unfortunately, many existing mechanisms to gauge and propagate trustworthiness—to work out if an interaction with a site is from a real human, for example—take advantage of techniques that can also be used for fingerprinting.</p><p>The API must preserve privacy, enabling trust to be propagated across sites without individual user tracking.</p><h2 id=\"what's-in-the-trust-tokens-proposal\">What's in the Trust Tokens proposal? <a href=\"#what's-in-the-trust-tokens-proposal\">#</a></h2><p>The web relies on building trust signals to detect fraud and spamming. One way to do this is by tracking browsing with global, cross-site per-user identifiers. For a privacy-preserving API, that's not acceptable.</p><p>From the proposal <a href=\"https://github.com/WICG/trust-token-api#overview\" rel=\"noopener\"><strong>explainer</strong></a>:</p><blockquote><p>This API proposes a new per-origin storage area for \"Privacy Pass\" style cryptographic tokens, which are accessible in third party contexts. These tokens are non-personalized and cannot be used to track users, but are cryptographically signed so they cannot be forged.</p><p>When an origin is in a context where they trust the user, they can issue the browser a batch of tokens, which can be \"spent\" at a later time in a context where the user would otherwise be unknown or less trusted. Crucially, the tokens are indistinguishable from one another, preventing websites from tracking users through them.</p><p>We further propose an extension mechanism for the browser to sign outgoing requests with keys bound to a particular token redemption.</p></blockquote><h2 id=\"sample-api-usage\">Sample API usage <a href=\"#sample-api-usage\">#</a></h2><p>The following is adapted from <a href=\"https://github.com/WICG/trust-token-api#sample-api-usage\" rel=\"noopener\">sample code in the API explainer</a>.</p><p>Imagine that a user visits a news website (<code>publisher.example</code>) which embeds advertising from a third party ad network (<code>foo.example</code>). The user has previously used a social media site that issues trust tokens (<code>issuer.example</code>).</p><p>The sequence below shows how trust tokens work.</p><p><strong>1.</strong>&nbsp;The user visits <code>issuer.example</code> and performs actions that lead the site to believe they are a real human, such as account activity, or passing a CAPTCHA challenge.</p><p><strong>2.</strong>&nbsp;<code>issuer.example</code> verifies the user is a human, and runs the following JavaScript to issue a trust token to the user's browser:</p><web-copy-code><pre><code><span>fetch</span><span>(</span><span>'https://issuer.example/trust-token'</span><span>,</span> <span>{</span><br>  <span>trustToken</span><span>:</span> <span>{</span><br>    <span>type</span><span>:</span> <span>'token-request'</span><span>,</span><br>    <span>issuer</span><span>:</span> <span>'https://issuer.example'</span><br>  <span>}</span><br><span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>...</span><span>)</span></code></pre> </web-copy-code><p><strong>3.</strong>&nbsp;The user's browser stores the trust token, associating it with <code>issuer.example</code>.</p><p><strong>4.</strong>&nbsp;Some time later, the user visits <code>publisher.example</code>.</p><p><strong>5.</strong>&nbsp;<code>publisher.example</code> wants to know if the user is a real human. <code>publisher.example</code> trusts <code>issuer.example</code>, so they check if the user's browser has valid tokens from that origin:</p><web-copy-code><pre><code>document<span>.</span><span>hasTrustToken</span><span>(</span><span>'https://issuer.example'</span><span>)</span><span>;</span></code></pre> </web-copy-code><p><strong>6.</strong>&nbsp;If this returns a promise that resolves to <code>true</code>, that means the user has tokens from <code>issuer.example</code>, so <code>publisher.example</code> can attempt to redeem a token:</p><web-copy-code><pre><code><span>fetch</span><span>(</span><span>'https://issuer.example/trust-token'</span><span>,</span> <span>{</span><br><span>trustToken</span><span>:</span> <span>{</span><br>  <span>type</span><span>:</span> <span>'token-redemption'</span><span>,</span><br>  <span>issuer</span><span>:</span> <span>'https://issuer.example'</span><span>,</span><br>  <span>refreshPolicy</span><span>:</span> <span>{</span>none<span>,</span> refresh<span>}</span><br><span>}</span><br><span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>...</span><span>)</span></code></pre> </web-copy-code><p>With this code:</p><ol><li>The redeemer <code>publisher.example</code> requests a redemption.</li><li>If the redemption is successful, the issuer <code>issuer.example</code> returns a redemption record which indicates that at some point they issued a valid token to this browser.</li></ol><p><strong>7.</strong>&nbsp;Once the promise returned by <code>fetch()</code> has resolved, the redemption record can be used in subsequent resource requests:</p><web-copy-code><pre><code><span>fetch</span><span>(</span><span>'https://foo.example/get-content'</span><span>,</span> <span>{</span><br>  <span>trustToken</span><span>:</span> <span>{</span><br>    <span>type</span><span>:</span> <span>'send-redemption-record'</span><span>,</span><br>    <span>issuers</span><span>:</span> <span>[</span><span>'https://issuer.example'</span><span>,</span> <span>...</span><span>]</span><br>  <span>}</span><br><span>}</span><span>)</span><span>;</span></code></pre> </web-copy-code><p>With this code:</p><ol><li>Redemption records are included as a request header <code>Sec-Redemption-Record</code>.</li><li><code>foo.example</code> receives the redemption record and can parse the record to determine whether <code>issuer.example</code> thought this user was a human.</li><li><code>foo.example</code> responds accordingly.</li></ol><details><summary>How can a website work out whether to trust you?</summary> You might have shopping history with an e-commerce site, check-ins on a location platform, or account history at a bank. Issuers might also look at other factors such as how long you've had an account, or other interactions (such as CAPTCHAs or form submission) that increase the issuer's trust in the likelihood that you're a real human.</details><h3 id=\"trust-token-issuance\">Trust token issuance <a href=\"#trust-token-issuance\">#</a></h3><p>If the user is deemed to be trustworthy by a trust token issuer such as <code>issuer.example</code>, the issuer can fetch trust tokens for the user by making a <code>fetch()</code> request with a <code>trustToken</code> parameter:</p><web-copy-code><pre><code><span>fetch</span><span>(</span><span>'issuer.example/trust-token'</span><span>,</span> <span>{</span><br>  <span>trustToken</span><span>:</span> <span>{</span><br>    <span>type</span><span>:</span> <span>'token-request'</span><br>  <span>}</span><br><span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>...</span><span>)</span></code></pre> </web-copy-code><p>This invokes an extension of the <a href=\"https://privacypass.github.io/\" rel=\"noopener\">Privacy Pass</a> issuance protocol using a <a href=\"https://eprint.iacr.org/2020/072.pdf\" rel=\"noopener\">new cryptographic primitive</a>:</p><ol><li><p>Generate a set of pseudo-random numbers known as <em>nonces</em>.</p></li><li><p>Blind the nonces (encode them so the issuer can't view their contents) and attach them to the request in a <code>Sec-Trust-Token</code> header.</p></li><li><p>Send a POST request to the endpoint provided.</p></li></ol><p>The endpoint responds with <a href=\"https://en.wikipedia.org/wiki/Blind_signature\" rel=\"noopener\">blinded tokens</a> (signatures on the blind nonces), then the tokens are unblinded and stored internally together with the associated nonces by the browser as trust tokens.</p><h3 id=\"trust-token-redemption\">Trust token redemption <a href=\"#trust-token-redemption\">#</a></h3><p>A publisher site (such as <code>publisher.example</code> in the example above) can check if there are trust tokens available for the user:</p><web-copy-code><pre><code><span>const</span> userHasTokens <span>=</span> <span>await</span> document<span>.</span><span>hasTrustToken</span><span>(</span><span>'issuer.example/trust-token'</span><span>)</span><span>;</span></code></pre> </web-copy-code><p>If there are tokens available, the publisher site can redeem them to get a redemption record:</p><web-copy-code><pre><code><span>fetch</span><span>(</span><span>'issuer.example/trust-token'</span><span>,</span> <span>{</span><br>  <span>...</span><br>  <span>trustToken</span><span>:</span> <span>{</span><br>    <span>type</span><span>:</span> <span>'token-redemption'</span><span>,</span><br>    <span>refreshPolicy</span><span>:</span> <span>'none'</span><br>  <span>}</span><br>  <span>...</span><br><span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>...</span><span>)</span></code></pre> </web-copy-code><p>The publisher can include redemption records in requests that require a trust token—such as posting a comment, liking a page, or voting in a poll—by using a <code>fetch()</code> call like the following:</p><web-copy-code><pre><code><span>fetch</span><span>(</span><span>'https://foo.example/post-comment'</span><span>,</span> <span>{</span><br>  <span>...</span><br>  <span>trustToken</span><span>:</span> <span>{</span><br>    <span>type</span><span>:</span> <span>'send-redemption-record'</span><span>,</span><br>    <span>issuers</span><span>:</span> <span>[</span><span>'issuer.example/trust-token'</span><span>,</span> <span>...</span><span>]</span><br>  <span>}</span><br>  <span>...</span><br><span>}</span><span>)</span><span>.</span><span>then</span><span>(</span><span>...</span><span>)</span><span>;</span></code></pre> </web-copy-code><p>Redemption records are included as a <code>Sec-Redemption-Record</code> request header.</p><h3 id=\"privacy-considerations\">Privacy considerations <a href=\"#privacy-considerations\">#</a></h3><p>Tokens are designed to be 'unlinkable'. An issuer can learn aggregate information about which sites its users visit, but can't link issuance with redemption: when a user redeems a token, the issuer can't tell the token apart from other tokens it has created. However, trust tokens currently do not exist in a vacuum: there are other ways an issuer could currently—in theory—join a user's identity across sites, such as third-party cookies and covert tracking techniques. It is important for sites to understand this ecosystem transition as they plan their support. This is a general aspect of the transition for many Privacy Sandbox APIs, so not discussed further here.</p><h3 id=\"security-considerations\">Security considerations <a href=\"#security-considerations\">#</a></h3><p><strong>Trust token exhaustion:</strong> a malicious site could deliberately deplete a user's supply of tokens from a particular issuer. There are several mitigations against this kind of attack, such as enabling issuers to provide many tokens at once, so users have an adequate supply of ensuring browsers only ever redeem one token per top-level page view.</p><p><strong>Double-spend prevention:</strong> malware might attempt to access all of a user's trust tokens. However, tokens will run out over time, since every redemption is sent to the same token issuer, which can verify that each token is used only once. To mitigate risk, issuers could also sign fewer tokens.</p><h3 id=\"request-mechanisms\">Request mechanisms <a href=\"#request-mechanisms\">#</a></h3><p>It might be possible to allow for sending redemption records outside of <code>fetch()</code>, for example with navigation requests. Sites might also be able to include issuer data in HTTP response headers to enable token redemption in parallel with page loading.</p><p><strong>To reiterate: this proposal needs your feedback!</strong> If you have comments, please <a href=\"https://github.com/WICG/trust-token-api/issues/new\" rel=\"noopener\">create an issue</a> on the Trust Token <a href=\"https://github.com/WICG/trust-token-api\" rel=\"noopener\">explainer repository</a>.</p><h2 id=\"find-out-more\">Find out more <a href=\"#find-out-more\">#</a></h2><ul><li><a href=\"https://trust-token-demo.glitch.me/\" rel=\"noopener\">Trust Tokens demo</a></li><li><a href=\"https://developer.chrome.com/blog/origin-trials/\" rel=\"noopener\">Getting started with Chrome's origin trials</a></li><li><a href=\"/digging-into-the-privacy-sandbox/\">Digging in to the Privacy Sandbox</a></li><li><a href=\"https://github.com/WICG/trust-token-api\" rel=\"noopener\">Trust Token API Explainer</a></li><li><a href=\"https://sites.google.com/a/chromium.org/dev/updates/trust-token\" rel=\"noopener\">Chromium Projects: Trust Token API</a></li><li><a href=\"https://groups.google.com/a/chromium.org/g/blink-dev/c/X9sF2uLe9rA/m/1xV5KEn2DgAJ\" rel=\"noopener\">Intent to Implement: Trust Token API</a></li><li><a href=\"https://www.chromestatus.com/feature/5078049450098688\" rel=\"noopener\">Chrome Platform Status</a></li><li><a href=\"https://privacypass.github.io/\" rel=\"noopener\">Privacy Pass</a></li><li><a href=\"https://eprint.iacr.org/2020/072.pdf\" rel=\"noopener\">Extensions of Privacy Pass</a></li></ul><hr><p>Thanks to all those who helped write and review this post.</p><p>Photo by <a href=\"https://unsplash.com/photos/b4D7FKAghoE\" rel=\"noopener\">ZSun Fu</a> on <a href=\"https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText\" rel=\"noopener\">Unsplash</a>.</p><div><p><span> Last updated: <time>Dec 10, 2021</time> </span> — <a href=\"https://github.com/GoogleChrome/web.dev/blob/main/src/site/content/en/blog/trust-tokens/index.md\"> Improve article </a></p></div><p><a data-type=\"secondary\" href=\"/blog\"> <svg viewBox=\"0 0 24 24\" height=\"24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M0 0h24v24H0z\" fill=\"none\"></path><path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"></path></svg> <span>Return to all articles</span> </a></p></article></div>","textContent":" Home  All articles Trust Tokens is a new API to enable a website to convey a limited amount of information from one browsing context to another (for example, across sites) to help combat fraud, without passive tracking.Jun 22, 2020 — Updated Dec 10, 2021Summary #Trust tokens enable an origin to issue cryptographic tokens to a user it trusts. The tokens are stored by the user's browser. The browser can then use the tokens in other contexts to evaluate the user's authenticity.The Trust Token API enables trust of a user in one context to be conveyed to another context without identifying the user or linking the two identities.You can try out the API with our demo, and inspect tokens in the Chrome DevTools Network and Application tabs.Trust Tokens in the Chrome DevTools Network tab.Trust Tokens in the Chrome DevTools Application tab.Why do we need Trust Tokens? #The web needs ways to establish trust signals which show that a user is who they say they are, and not a bot pretending to be a human, or a malicious third-party defrauding a real person or service. Fraud protection is particularly important for advertisers, ad providers, and CDNs.Unfortunately, many existing mechanisms to gauge and propagate trustworthiness—to work out if an interaction with a site is from a real human, for example—take advantage of techniques that can also be used for fingerprinting.The API must preserve privacy, enabling trust to be propagated across sites without individual user tracking.What's in the Trust Tokens proposal? #The web relies on building trust signals to detect fraud and spamming. One way to do this is by tracking browsing with global, cross-site per-user identifiers. For a privacy-preserving API, that's not acceptable.From the proposal explainer:This API proposes a new per-origin storage area for \"Privacy Pass\" style cryptographic tokens, which are accessible in third party contexts. These tokens are non-personalized and cannot be used to track users, but are cryptographically signed so they cannot be forged.When an origin is in a context where they trust the user, they can issue the browser a batch of tokens, which can be \"spent\" at a later time in a context where the user would otherwise be unknown or less trusted. Crucially, the tokens are indistinguishable from one another, preventing websites from tracking users through them.We further propose an extension mechanism for the browser to sign outgoing requests with keys bound to a particular token redemption.Sample API usage #The following is adapted from sample code in the API explainer.Imagine that a user visits a news website (publisher.example) which embeds advertising from a third party ad network (foo.example). The user has previously used a social media site that issues trust tokens (issuer.example).The sequence below shows how trust tokens work.1. The user visits issuer.example and performs actions that lead the site to believe they are a real human, such as account activity, or passing a CAPTCHA challenge.2. issuer.example verifies the user is a human, and runs the following JavaScript to issue a trust token to the user's browser:fetch('https://issuer.example/trust-token', {  trustToken: {    type: 'token-request',    issuer: 'https://issuer.example'  }}).then(...) 3. The user's browser stores the trust token, associating it with issuer.example.4. Some time later, the user visits publisher.example.5. publisher.example wants to know if the user is a real human. publisher.example trusts issuer.example, so they check if the user's browser has valid tokens from that origin:document.hasTrustToken('https://issuer.example'); 6. If this returns a promise that resolves to true, that means the user has tokens from issuer.example, so publisher.example can attempt to redeem a token:fetch('https://issuer.example/trust-token', {trustToken: {  type: 'token-redemption',  issuer: 'https://issuer.example',  refreshPolicy: {none, refresh}}}).then(...) With this code:The redeemer publisher.example requests a redemption.If the redemption is successful, the issuer issuer.example returns a redemption record which indicates that at some point they issued a valid token to this browser.7. Once the promise returned by fetch() has resolved, the redemption record can be used in subsequent resource requests:fetch('https://foo.example/get-content', {  trustToken: {    type: 'send-redemption-record',    issuers: ['https://issuer.example', ...]  }}); With this code:Redemption records are included as a request header Sec-Redemption-Record.foo.example receives the redemption record and can parse the record to determine whether issuer.example thought this user was a human.foo.example responds accordingly.How can a website work out whether to trust you? You might have shopping history with an e-commerce site, check-ins on a location platform, or account history at a bank. Issuers might also look at other factors such as how long you've had an account, or other interactions (such as CAPTCHAs or form submission) that increase the issuer's trust in the likelihood that you're a real human.Trust token issuance #If the user is deemed to be trustworthy by a trust token issuer such as issuer.example, the issuer can fetch trust tokens for the user by making a fetch() request with a trustToken parameter:fetch('issuer.example/trust-token', {  trustToken: {    type: 'token-request'  }}).then(...) This invokes an extension of the Privacy Pass issuance protocol using a new cryptographic primitive:Generate a set of pseudo-random numbers known as nonces.Blind the nonces (encode them so the issuer can't view their contents) and attach them to the request in a Sec-Trust-Token header.Send a POST request to the endpoint provided.The endpoint responds with blinded tokens (signatures on the blind nonces), then the tokens are unblinded and stored internally together with the associated nonces by the browser as trust tokens.Trust token redemption #A publisher site (such as publisher.example in the example above) can check if there are trust tokens available for the user:const userHasTokens = await document.hasTrustToken('issuer.example/trust-token'); If there are tokens available, the publisher site can redeem them to get a redemption record:fetch('issuer.example/trust-token', {  ...  trustToken: {    type: 'token-redemption',    refreshPolicy: 'none'  }  ...}).then(...) The publisher can include redemption records in requests that require a trust token—such as posting a comment, liking a page, or voting in a poll—by using a fetch() call like the following:fetch('https://foo.example/post-comment', {  ...  trustToken: {    type: 'send-redemption-record',    issuers: ['issuer.example/trust-token', ...]  }  ...}).then(...); Redemption records are included as a Sec-Redemption-Record request header.Privacy considerations #Tokens are designed to be 'unlinkable'. An issuer can learn aggregate information about which sites its users visit, but can't link issuance with redemption: when a user redeems a token, the issuer can't tell the token apart from other tokens it has created. However, trust tokens currently do not exist in a vacuum: there are other ways an issuer could currently—in theory—join a user's identity across sites, such as third-party cookies and covert tracking techniques. It is important for sites to understand this ecosystem transition as they plan their support. This is a general aspect of the transition for many Privacy Sandbox APIs, so not discussed further here.Security considerations #Trust token exhaustion: a malicious site could deliberately deplete a user's supply of tokens from a particular issuer. There are several mitigations against this kind of attack, such as enabling issuers to provide many tokens at once, so users have an adequate supply of ensuring browsers only ever redeem one token per top-level page view.Double-spend prevention: malware might attempt to access all of a user's trust tokens. However, tokens will run out over time, since every redemption is sent to the same token issuer, which can verify that each token is used only once. To mitigate risk, issuers could also sign fewer tokens.Request mechanisms #It might be possible to allow for sending redemption records outside of fetch(), for example with navigation requests. Sites might also be able to include issuer data in HTTP response headers to enable token redemption in parallel with page loading.To reiterate: this proposal needs your feedback! If you have comments, please create an issue on the Trust Token explainer repository.Find out more #Trust Tokens demoGetting started with Chrome's origin trialsDigging in to the Privacy SandboxTrust Token API ExplainerChromium Projects: Trust Token APIIntent to Implement: Trust Token APIChrome Platform StatusPrivacy PassExtensions of Privacy PassThanks to all those who helped write and review this post.Photo by ZSun Fu on Unsplash. Last updated: Dec 10, 2021  —  Improve article   Return to all articles ","length":8990,"excerpt":"Trust Tokens is a new API to enable a website to convey a limited amount of information from one browsing context to another (for example, across sites) to help combat fraud, without passive tracking.","byline":"Sam Dutton TwitterGitHub","dir":null,"siteName":"web.dev","lang":"en"},"finalizedMeta":{"title":"Getting started with Trust Tokens","description":"Trust Tokens is a new API to enable a website to convey a limited amount of information from one browsing context to another (for example, across sites) to help combat fraud, without passive tracking.","author":false,"creator":"","publisher":false,"date":"2022-04-05T17:38:38.977Z","topics":[]},"jsonLd":{"@type":false,"headline":false,"description":false,"image":[],"mainEntityOfPage":{"@type":false,"@id":false},"datePublished":false,"dateModified":false,"isAccessibleForFree":false,"isPartOf":{"@type":[],"name":false,"productID":false},"discussionUrl":false,"license":false,"author":{"@type":false,"name":false,"description":false,"sameAs":false,"image":{"@type":false,"url":false},"givenName":false,"familyName":false,"alternateName":false,"publishingPrinciples":false},"publisher":{"@type":false,"name":false,"description":false,"sameAs":false,"logo":{"@type":false,"url":false},"publishingPrinciples":false},"editor":{"@type":false,"name":false,"description":false,"sameAs":false,"image":{"@type":false,"url":false},"givenName":false,"familyName":false,"alternateName":false,"publishingPrinciples":false}},"twitterObj":false,"status":200,"metadata":{"author":false,"title":"Getting started with Trust Tokens","description":"","canonical":"https://web.dev/trust-tokens/","keywords":[],"image":"https://web-dev.imgix.net/image/admin/okxi2ttRG3h1Z4F3cylI.jpg?auto=format","firstParagraph":"Trust Tokens is a new API to enable a website to convey a limited amount of information from one browsing context to another (for example, across sites) to help combat fraud, without passive tracking."},"dublinCore":{},"opengraph":{"title":"Getting started with Trust Tokens","description":"","url":"https://web.dev/trust-tokens/","site_name":"web.dev","locale":"en_US","type":"article","typeObject":{"published_time":false,"modified_time":false,"author":false,"publisher":false,"section":false,"tag":[]},"image":"https://web-dev.imgix.net/image/admin/cTo0l2opcfNxg1TEjxSg.jpg?auto=format&fit=max&w=1200&fm=auto","image:alt":"Black and white photograph of hand holding token"},"twitter":{"site":false,"description":"","card":"summary_large_image","creator":false,"title":"Getting started with Trust Tokens","image":"https://web-dev.imgix.net/image/admin/cTo0l2opcfNxg1TEjxSg.jpg?auto=format&fit=max&w=1200&fm=auto"},"archivedData":{"link":false,"wayback":false}}}