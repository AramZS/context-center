{"initialLink":"https://pywb.readthedocs.io/en/localization/manual/memento.html","sanitizedLink":"https://pywb.readthedocs.io/en/localization/manual/memento.html","finalLink":"https://pywb.readthedocs.io/en/localization/manual/memento.html","htmlEmbed":"<script>window.contexterSetup=window.contexterSetup||function(){window.contexterSetupComplete=!0;class ContexterLink extends HTMLAnchorElement{constructor(){super()}connectedCallback(){this.setAttribute(\"target\",\"_blank\")}}customElements.define(\"contexter-link\",ContexterLink,{extends:\"a\"}),customElements.define(\"contexter-inner\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__inner\"}}),customElements.define(\"contexter-thumbnail\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__thumbnail\"}}),customElements.define(\"contexter-byline\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__byline\"}}),customElements.define(\"contexter-keywordset\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__keywordset\"}}),customElements.define(\"contexter-linkset\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__linkset\"}}),customElements.define(\"contexter-meta\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"contexter-box__meta\"}}),customElements.define(\"contexter-summary\",class extends HTMLElement{constructor(){super()}attributeChangedCallback(name,oldValue,newValue){}connectedCallback(){this.className=\"p-summary entry-summary\"}}),customElements.define(\"contexter-box-head\",class extends HTMLElement{constructor(){super()}connectedCallback(){this.className=\"contexter-box__head\"}}),customElements.define(\"contexter-box-inner\",class extends HTMLElement{constructor(){super()}connectedCallback(){}});class ContexterBox extends HTMLElement{constructor(){super(),this.first=!0,this.shadow=this.attachShadow({mode:\"open\"})}connectedCallback(){if(this.first){this.first=!1;var style=document.createElement(\"style\"),lightDomStyle=(style.innerHTML=`:host {--background: #f5f6f7;--border: darkblue;--blue: #0000ee;--font-color: black;--inner-border: black;font-family: Franklin,Arial,Helvetica,sans-serif;font-size: 14px;background: var(--background);width: 600px;color: var(--font-color);min-height: 90px;display: block;padding: 8px;border: 1px solid var(--border);cursor: pointer;box-sizing: border-box;margin: 6px;contain: content;margin: 6px auto;}// can only select top-level nodes with slotted::slotted(*) {max-width: 100%;display:block;}::slotted([slot=thumbnail]) {max-width: 100%;display:block;}::slotted([slot=header]) {width: 100%;font-size: 1.25rem;font-weight: bold;display:block;margin-bottom: 6px;}::slotted([slot=author]) {max-width: 50%;font-size: 12px;display:inline-block;float: left;}::slotted([slot=time]) {max-width: 50%;font-size: 12px;display:inline-block;float: right;}::slotted([slot=summary]) {width: 100%;margin-top: 6px;padding: 10px 2px;border-top: 1px solid var(--inner-border);font-size: 15px;display:inline-block;margin-bottom: 6px;}contexter-meta {height: auto;margin-bottom: 4px;width: 100%;display: grid;position: relative;min-height: 16px;grid-template-columns: repeat(2, 1fr);}::slotted([slot=keywords]) {width: 80%;padding: 2px 4px;border-top: 1px solid var(--inner-border);font-size: 11px;display: block;float: right;font-style: italic;text-align: right;grid-column: 2/2;grid-row: 1;align-self: end;justify-self: end;}::slotted([slot=keywords]):empty {border-top: 0px solid var(--inner-border);}::slotted([slot=archive-link]) {font-size: 1em;display: inline;}::slotted([slot=archive-link])::after {content: \"|\";display: inline;color: var(--font-color);text-decoration: none;margin: 0 .5em;}::slotted([slot=read-link]) {font-size: 1em;display: inline;}contexter-linkset {width: 80%;padding: 2px 4px;font-size: 13px;float: left;font-weight: bold;grid-row: 1;grid-column: 1/2;align-self: end;justify-self: start;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {:host {width: 310px;}}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){:host {--background: #354150;--border: #1f2b37;--blue: #55b0ff;--font-color: #ffffff;--inner-border: #787a7c;background: var(--background);border: 1px solid var(--border)}}`,document.createElement(\"style\"));lightDomStyle.innerHTML=`contexter-box {contain: content;}contexter-box .read-link {font-weight: bold;}contexter-box a {color: #0000ee;}contexter-box img {width: 100%;border: 0;padding: 0;margin: 0;}/* Extra small devices (phones, 600px and down) */@media only screen and (max-width: 600px) {...}/* Small devices (portrait tablets and large phones, 600px and up) */@media only screen and (min-width: 600px) {...}/* Medium devices (landscape tablets, 768px and up) */@media only screen and (min-width: 768px) {...}/* Large devices (laptops/desktops, 992px and up) */@media only screen and (min-width: 992px) {...}/* Extra large devices (large laptops and desktops, 1200px and up) */@media only screen and (min-width: 1200px) {...}@media (prefers-color-scheme: dark){contexter-box a {color: #55b0ff;}}`,this.appendChild(lightDomStyle),this.shadow.appendChild(style);const innerContainer=document.createElement(\"contexter-box-inner\"),innerSlotThumbnail=(this.shadow.appendChild(innerContainer),document.createElement(\"slot\")),innerSlotHeader=(innerSlotThumbnail.name=\"thumbnail\",innerContainer.appendChild(innerSlotThumbnail),document.createElement(\"slot\")),innerSlotAuthor=(innerSlotHeader.name=\"header\",innerContainer.appendChild(innerSlotHeader),document.createElement(\"slot\")),innerSlotTime=(innerSlotAuthor.name=\"author\",innerContainer.appendChild(innerSlotAuthor),document.createElement(\"slot\")),innerSlotSummary=(innerSlotTime.name=\"time\",innerContainer.appendChild(innerSlotTime),document.createElement(\"slot\")),metaContainer=(innerSlotSummary.name=\"summary\",innerContainer.appendChild(innerSlotSummary),document.createElement(\"contexter-meta\")),innerSlotInfo=(innerContainer.appendChild(metaContainer),document.createElement(\"slot\")),linkContainer=(innerSlotInfo.name=\"keywords\",metaContainer.appendChild(innerSlotInfo),document.createElement(\"contexter-linkset\")),innerSlotArchiveLink=(metaContainer.appendChild(linkContainer),document.createElement(\"slot\")),innerSlotReadLink=(innerSlotArchiveLink.name=\"archive-link\",linkContainer.appendChild(innerSlotArchiveLink),document.createElement(\"slot\"));innerSlotReadLink.name=\"read-link\",linkContainer.appendChild(innerSlotReadLink),this.className=\"contexter-box\",this.onclick=e=>{if(!e.target.className.includes(\"read-link\")&&!e.target.className.includes(\"title-link\")){const mainLinks=this.querySelectorAll(\"a.main-link\");mainLinks[0].click()}}}}}customElements.define(\"contexter-box\",ContexterBox)},window.contexterSetupComplete||window.contexterSetup();</script><contexter-box class=\"link-card h-entry hentry\" itemscope=\"\" itemtype=\"https://schema.org/CreativeWork\"><contexter-thumbnail class=\"thumbnail\" slot=\"thumbnail\"></contexter-thumbnail><contexter-box-head slot=\"header\" class=\"p-name entry-title\" itemprop=\"headline\"><contexter-box-head slot=\"header\" class=\"p-name entry-title\" itemprop=\"headline\"><a is=\"contexter-link\" href=\"https://pywb.readthedocs.io/en/localization/manual/memento.html\" itemprop=\"url\">Memento API — pywb 2.0 documentation</a></contexter-box-head></contexter-box-head><time class=\"dt-published published\" slot=\"time\" itemprop=\"datePublished\" datetime=\"2022-03-09T18:43:57.193Z\">2/9/2022</time><contexter-summary class=\"p-summary entry-summary\" itemprop=\"abstract\" slot=\"summary\"><p>pywb supports the Memento Protocol as specified in RFC 7089 and provides API endpointsfor Memento TimeMaps and TimeGates per collection.</p></contexter-summary><contexter-keywordset itemprop=\"keywords\" slot=\"keywords\"></contexter-keywordset><a is=\"contexter-link\" href=\"https://pywb.readthedocs.io/en/localization/manual/memento.html\" class=\"read-link main-link\" itemprop=\"sameAs\" slot=\"read-link\">Read</a></contexter-box>","linkId":"0fe24f1d02032deb26608b92e80d91869277945b","data":{"originalLink":"https://pywb.readthedocs.io/en/localization/manual/memento.html","sanitizedLink":"https://pywb.readthedocs.io/en/localization/manual/memento.html","canonical":"https://pywb.readthedocs.io/en/localization/manual/memento.html","htmlText":"\n\n<!DOCTYPE html>\n<!--[if IE 8]><html class=\"no-js lt-ie9\" lang=\"en\" > <![endif]-->\n<!--[if gt IE 8]><!--> <html class=\"no-js\" lang=\"en\" > <!--<![endif]-->\n<head>\n  <meta charset=\"utf-8\">\n  \n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  \n  <title>Memento API &mdash; pywb 2.0 documentation</title>\n  \n\n  \n  \n  \n  \n\n  \n  <script type=\"text/javascript\" src=\"../_static/js/modernizr.min.js\"></script>\n  \n    \n      <script type=\"text/javascript\" id=\"documentation_options\" data-url_root=\"../\" src=\"../_static/documentation_options.js\"></script>\n        <script type=\"text/javascript\" src=\"../_static/jquery.js\"></script>\n        <script type=\"text/javascript\" src=\"../_static/underscore.js\"></script>\n        <script type=\"text/javascript\" src=\"../_static/doctools.js\"></script>\n        <script type=\"text/javascript\" src=\"../_static/language_data.js\"></script>\n        <script async=\"async\" type=\"text/javascript\" src=\"https://assets.readthedocs.org/static/javascript/readthedocs-doc-embed.js\"></script>\n    \n    <script type=\"text/javascript\" src=\"../_static/js/theme.js\"></script>\n\n    \n\n  \n  <link rel=\"stylesheet\" href=\"../_static/css/theme.css\" type=\"text/css\" />\n  <link rel=\"stylesheet\" href=\"../_static/pygments.css\" type=\"text/css\" />\n    <link rel=\"index\" title=\"Index\" href=\"../genindex.html\" />\n    <link rel=\"search\" title=\"Search\" href=\"../search.html\" />\n    <link rel=\"next\" title=\"OpenWayback Transition Guide\" href=\"owb-transition.html\" />\n    <link rel=\"prev\" title=\"CDXJ Server API\" href=\"cdxserver_api.html\" /> \n\n<!-- RTD Extra Head -->\n\n<link rel=\"stylesheet\" href=\"https://assets.readthedocs.org/static/css/readthedocs-doc-embed.css\" type=\"text/css\" />\n\n<script type=\"application/json\" id=\"READTHEDOCS_DATA\">{\"ad_free\": false, \"api_host\": \"https://readthedocs.org\", \"build_date\": \"2021-06-09T20:05:53Z\", \"builder\": \"sphinx\", \"canonical_url\": null, \"commit\": \"bfcef2ae\", \"docroot\": \"/docs/\", \"features\": {\"docsearch_disabled\": false}, \"global_analytics_code\": \"UA-17997319-1\", \"language\": \"en\", \"page\": \"manual/memento\", \"programming_language\": \"py\", \"project\": \"pywb\", \"proxied_api_host\": \"/_\", \"source_suffix\": \".rst\", \"subprojects\": {}, \"theme\": \"sphinx_rtd_theme\", \"user_analytics_code\": \"\", \"version\": \"localization\"}</script>\n\n<!--\nUsing this variable directly instead of using `JSON.parse` is deprecated.\nThe READTHEDOCS_DATA global variable will be removed in the future.\n-->\n<script type=\"text/javascript\">\nREADTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);\n</script>\n\n<script type=\"text/javascript\" src=\"https://assets.readthedocs.org/static/javascript/readthedocs-analytics.js\" async=\"async\"></script>\n\n<!-- end RTD <extrahead> -->\n</head>\n\n<body class=\"wy-body-for-nav\">\n\n   \n  <div class=\"wy-grid-for-nav\">\n    \n    <nav data-toggle=\"wy-nav-shift\" class=\"wy-nav-side\">\n      <div class=\"wy-side-scroll\">\n        <div class=\"wy-side-nav-search\" >\n          \n\n          \n            <a href=\"../index.html\" class=\"icon icon-home\"> pywb\n          \n\n          \n          </a>\n\n          \n            \n            \n            \n              <div class=\"version\">\n                localization\n              </div>\n            \n          \n\n          \n<div role=\"search\">\n  <form id=\"rtd-search-form\" class=\"wy-form\" action=\"../search.html\" method=\"get\">\n    <input type=\"text\" name=\"q\" placeholder=\"Search docs\" />\n    <input type=\"hidden\" name=\"check_keywords\" value=\"yes\" />\n    <input type=\"hidden\" name=\"area\" value=\"default\" />\n  </form>\n</div>\n\n          \n        </div>\n\n        <div class=\"wy-menu wy-menu-vertical\" data-spy=\"affix\" role=\"navigation\" aria-label=\"main navigation\">\n          \n            \n            \n              \n            \n            \n              <ul class=\"current\">\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"usage.html\">Usage</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"configuring.html\">Configuring the Web Archive</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"access-control.html\">Embargo and Access Control</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"ui-customization.html\">UI Customizations</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"localization.html\">Localization / Multi-lingual Support</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"architecture.html\">Architecture</a></li>\n<li class=\"toctree-l1 current\"><a class=\"reference internal\" href=\"apis.html\">APIs</a><ul class=\"current\">\n<li class=\"toctree-l2\"><a class=\"reference internal\" href=\"cdxserver_api.html\">CDXJ Server API</a></li>\n<li class=\"toctree-l2 current\"><a class=\"current reference internal\" href=\"#\">Memento API</a><ul>\n<li class=\"toctree-l3\"><a class=\"reference internal\" href=\"#timemap-api\">TimeMap API</a></li>\n<li class=\"toctree-l3\"><a class=\"reference internal\" href=\"#timegate-api\">TimeGate API</a><ul>\n<li class=\"toctree-l4\"><a class=\"reference internal\" href=\"#non-redirecting-timegate-memento-pattern-2-2\">Non-Redirecting TimeGate (Memento Pattern 2.2)</a></li>\n<li class=\"toctree-l4\"><a class=\"reference internal\" href=\"#redirecting-timegate-memento-pattern-2-3\">Redirecting TimeGate (Memento Pattern 2.3)</a></li>\n<li class=\"toctree-l4\"><a class=\"reference internal\" href=\"#proxy-mode-memento-api\">Proxy Mode Memento API</a></li>\n</ul>\n</li>\n<li class=\"toctree-l3\"><a class=\"reference internal\" href=\"#uri-m-headers\">URI-M Headers</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"owb-transition.html\">OpenWayback Transition Guide</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"../code/pywb.html\">pywb package</a></li>\n</ul>\n\n            \n          \n        </div>\n      </div>\n    </nav>\n\n    <section data-toggle=\"wy-nav-shift\" class=\"wy-nav-content-wrap\">\n\n      \n      <nav class=\"wy-nav-top\" aria-label=\"top navigation\">\n        \n          <i data-toggle=\"wy-nav-top\" class=\"fa fa-bars\"></i>\n          <a href=\"../index.html\">pywb</a>\n        \n      </nav>\n\n\n      <div class=\"wy-nav-content\">\n        \n        <div class=\"rst-content\">\n        \n          \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<div role=\"navigation\" aria-label=\"breadcrumbs navigation\">\n\n  <ul class=\"wy-breadcrumbs\">\n    \n      <li><a href=\"../index.html\">Docs</a> &raquo;</li>\n        \n          <li><a href=\"apis.html\">APIs</a> &raquo;</li>\n        \n      <li>Memento API</li>\n    \n    \n      <li class=\"wy-breadcrumbs-aside\">\n        \n            \n            \n              <a href=\"https://github.com/webrecorder/pywb/blob/localization/docs/manual/memento.rst\" class=\"fa fa-github\"> Edit on GitHub</a>\n            \n          \n        \n      </li>\n    \n  </ul>\n\n  \n  <hr/>\n</div>\n          <div role=\"main\" class=\"document\" itemscope=\"itemscope\" itemtype=\"http://schema.org/Article\">\n           <div itemprop=\"articleBody\">\n            \n  <div class=\"section\" id=\"memento-api\">\n<span id=\"id1\"></span><h1>Memento API<a class=\"headerlink\" href=\"#memento-api\" title=\"Permalink to this headline\">¶</a></h1>\n<p>pywb supports the Memento Protocol as specified in <a class=\"reference external\" href=\"https://tools.ietf.org/html/rfc7089\">RFC 7089</a> and provides API endpoints\nfor Memento TimeMaps and TimeGates per collection.</p>\n<p>Memento support is enabled by default and can be controlled via the <code class=\"docutils literal notranslate\"><span class=\"pre\">enable_memento:</span> <span class=\"pre\">true|false</span></code> setting in the <code class=\"docutils literal notranslate\"><span class=\"pre\">config.yaml</span></code></p>\n<div class=\"section\" id=\"timemap-api\">\n<h2>TimeMap API<a class=\"headerlink\" href=\"#timemap-api\" title=\"Permalink to this headline\">¶</a></h2>\n<p>The timemap API is available at <code class=\"docutils literal notranslate\"><span class=\"pre\">/&lt;coll&gt;/timemap/&lt;type&gt;/&lt;url&gt;</span></code> for any pywb collection <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;coll&gt;</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;url&gt;</span></code> in the collection.</p>\n<p>The timemap (URI-T) can be provided in several output formats, as specified by the <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;type&gt;</span></code> param:</p>\n<ul class=\"simple\">\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">link</span></code> – returns an <code class=\"docutils literal notranslate\"><span class=\"pre\">application/link-format</span></code> as required by the <a class=\"reference external\" href=\"https://tools.ietf.org/html/rfc7089#section-5\">Memento spec</a></li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">cdxj</span></code> – returns a timemap in the native CDXJ format.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">json</span></code> – returns the timemap as newline-delimited JSON lines (NDJSON) format.</li>\n</ul>\n<p>Although not required by the Memento spec, the Link output produced by timemap also includes the extra <code class=\"docutils literal notranslate\"><span class=\"pre\">collection=</span></code> field, specifying\nthe collection of each url. This is especially useful when accessing the timemap for the special <a class=\"reference internal\" href=\"configuring.html#auto-all\"><span class=\"std std-ref\">Auto “All” Aggregate Collection</span></a> to view a timemap across\nmultiple collections in a single response.</p>\n<p>The Timemap API is implemented as a subset of the <a class=\"reference internal\" href=\"cdxserver_api.html#cdx-server-api\"><span class=\"std std-ref\">CDXJ Server API</span></a> and should produce the same result as the equivalent CDX server query.</p>\n<p>For example, the timemap query:\n<code class=\"docutils literal notranslate\"><span class=\"pre\">http://localhost:8080/pywb/timemap/link/http://example.com/</span></code> is equivalent to the CDX server query:\n<code class=\"docutils literal notranslate\"><span class=\"pre\">http://localhost:8080/pywb/cdx?url=http://example.com/&amp;output=link</span></code></p>\n</div>\n<div class=\"section\" id=\"timegate-api\">\n<h2>TimeGate API<a class=\"headerlink\" href=\"#timegate-api\" title=\"Permalink to this headline\">¶</a></h2>\n<p>The TimeGate API for any pywb collection is <code class=\"docutils literal notranslate\"><span class=\"pre\">/&lt;coll&gt;/&lt;url&gt;</span></code>, eg. <code class=\"docutils literal notranslate\"><span class=\"pre\">/my-coll/http://example.com/</span></code></p>\n<p>The timegate can either be a non-redirecting timegate (URI-M, 200-style negotiation) and return a URI-M response, or a redirecting timegate  (302-style negotiation) and redirect to a URI-M.</p>\n<div class=\"section\" id=\"non-redirecting-timegate-memento-pattern-2-2\">\n<span id=\"memento-no-redirect\"></span><h3>Non-Redirecting TimeGate (Memento Pattern 2.2)<a class=\"headerlink\" href=\"#non-redirecting-timegate-memento-pattern-2-2\" title=\"Permalink to this headline\">¶</a></h3>\n<p>This behavior is consistent with <a class=\"reference external\" href=\"https://tools.ietf.org/html/rfc7089#section-4.2.2\">Memento Pattern 2.2</a> and is the default behavior.</p>\n<p>To avoid an extra redirect, the TimeGate returns the requested memento directly (200-style negotiation) without redirecting to its canonical, timestamped url.\nThe ‘canonical’ URI-M is included in the <code class=\"docutils literal notranslate\"><span class=\"pre\">Content-Location</span></code> header and should be used to reference the memento in the future.</p>\n<p>(For HTML Mementos, the rewriting system also injects the url and timestamp into the page so that it can be displayed to the user). This behavior optimizes network traffic by avoiding unneeded redirects.</p>\n</div>\n<div class=\"section\" id=\"redirecting-timegate-memento-pattern-2-3\">\n<h3>Redirecting TimeGate (Memento Pattern 2.3)<a class=\"headerlink\" href=\"#redirecting-timegate-memento-pattern-2-3\" title=\"Permalink to this headline\">¶</a></h3>\n<p>This behavior is consistent with <a class=\"reference external\" href=\"https://tools.ietf.org/html/rfc7089#section-4.2.3\">Memento Pattern 2.3</a></p>\n<p>To enable this behavior, add <code class=\"docutils literal notranslate\"><span class=\"pre\">redirect_to_exact:</span> <span class=\"pre\">true</span></code> to the config.</p>\n<p>In this mode, the TimeGate always issues a 302 to redirect a request to the “canonical” URI-M memento. The <code class=\"docutils literal notranslate\"><span class=\"pre\">Location</span></code> header is always present\nwith the redirect.</p>\n<p>As this approach always includes a redirect, use of this system is discouraged when the intent is to render mementos. However, this approach is useful when the goal is to determine the URI-M and to provide backwards compatibility.</p>\n</div>\n<div class=\"section\" id=\"proxy-mode-memento-api\">\n<span id=\"memento-proxy\"></span><h3>Proxy Mode Memento API<a class=\"headerlink\" href=\"#proxy-mode-memento-api\" title=\"Permalink to this headline\">¶</a></h3>\n<p>When running in <a class=\"reference internal\" href=\"configuring.html#https-proxy\"><span class=\"std std-ref\">HTTP/S Proxy Mode</span></a>, pywb behaves roughly in accordance with <a class=\"reference external\" href=\"https://tools.ietf.org/html/rfc7089#section-4.1.3\">Memento Pattern 1.3</a></p>\n<p>Every URI in proxy mode is also a TimeGate, and the <code class=\"docutils literal notranslate\"><span class=\"pre\">Accept-Datetime</span></code> header can be used to specify which timestamp to use in proxy mode.\nThe <code class=\"docutils literal notranslate\"><span class=\"pre\">Accept-Datetime</span></code> header overrides any other timestamp setting in proxy mode.</p>\n<p>The main distinction from the standard is that the URI-R, the original resource, is not available in proxy mode. (It is simply the URL loaded without the proxy,\nwhich is not possible to specify via the URL alone).</p>\n</div>\n</div>\n<div class=\"section\" id=\"uri-m-headers\">\n<h2>URI-M Headers<a class=\"headerlink\" href=\"#uri-m-headers\" title=\"Permalink to this headline\">¶</a></h2>\n<p>When serving a URI-M (any archived url), the following additional headers are included in accordance with Memento spec:</p>\n<ul class=\"simple\">\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">Link</span></code> header with at least <code class=\"docutils literal notranslate\"><span class=\"pre\">original</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">timegate</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">timemap</span></code> relations</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">Content-Location</span></code> is included if using <a class=\"reference internal\" href=\"#memento-no-redirect\"><span class=\"std std-ref\">Non-Redirecting TimeGate (Memento Pattern 2.2)</span></a> behavior</li>\n</ul>\n<p>(Note: the <code class=\"docutils literal notranslate\"><span class=\"pre\">Content-Location</span></code> may also be included in case of fuzzy-matching response, where the actual/canonical url is different than requested url due to an inexact match)</p>\n</div>\n</div>\n\n\n           </div>\n           \n          </div>\n          <footer>\n  \n    <div class=\"rst-footer-buttons\" role=\"navigation\" aria-label=\"footer navigation\">\n      \n        <a href=\"owb-transition.html\" class=\"btn btn-neutral float-right\" title=\"OpenWayback Transition Guide\" accesskey=\"n\" rel=\"next\">Next <span class=\"fa fa-arrow-circle-right\"></span></a>\n      \n      \n        <a href=\"cdxserver_api.html\" class=\"btn btn-neutral float-left\" title=\"CDXJ Server API\" accesskey=\"p\" rel=\"prev\"><span class=\"fa fa-arrow-circle-left\"></span> Previous</a>\n      \n    </div>\n  \n\n  <hr/>\n\n  <div role=\"contentinfo\">\n    <p>\n        &copy; Copyright 2014-2020, Webrecorder Software, Rhizome, and Contributors\n      \n        <span class=\"commit\">\n          Revision <code>bfcef2ae</code>.\n        </span>\n      \n\n    </p>\n  </div>\n  Built with <a href=\"http://sphinx-doc.org/\">Sphinx</a> using a <a href=\"https://github.com/rtfd/sphinx_rtd_theme\">theme</a> provided by <a href=\"https://readthedocs.org\">Read the Docs</a>. \n\n</footer>\n\n        </div>\n      </div>\n\n    </section>\n\n  </div>\n  \n\n  <div class=\"rst-versions\" data-toggle=\"rst-versions\" role=\"note\" aria-label=\"versions\">\n    <span class=\"rst-current-version\" data-toggle=\"rst-current-version\">\n      <span class=\"fa fa-book\"> Read the Docs</span>\n      v: localization\n      <span class=\"fa fa-caret-down\"></span>\n    </span>\n    <div class=\"rst-other-versions\">\n      <dl>\n        <dt>Versions</dt>\n        \n          <dd><a href=\"/en/master/\">master</a></dd>\n        \n          <dd><a href=\"/en/latest/\">latest</a></dd>\n        \n          <dd><a href=\"/en/localization/\">localization</a></dd>\n        \n          <dd><a href=\"/en/embargo/\">embargo</a></dd>\n        \n          <dd><a href=\"/en/docs/\">docs</a></dd>\n        \n          <dd><a href=\"/en/develop/\">develop</a></dd>\n        \n      </dl>\n      <dl>\n        <dt>Downloads</dt>\n        \n          <dd><a href=\"//pywb.readthedocs.io/_/downloads/en/localization/pdf/\">pdf</a></dd>\n        \n          <dd><a href=\"//pywb.readthedocs.io/_/downloads/en/localization/htmlzip/\">html</a></dd>\n        \n          <dd><a href=\"//pywb.readthedocs.io/_/downloads/en/localization/epub/\">epub</a></dd>\n        \n      </dl>\n      <dl>\n        <dt>On Read the Docs</dt>\n          <dd>\n            <a href=\"//readthedocs.org/projects/pywb/?fromdocs=pywb\">Project Home</a>\n          </dd>\n          <dd>\n            <a href=\"//readthedocs.org/builds/pywb/?fromdocs=pywb\">Builds</a>\n          </dd>\n      </dl>\n      <hr/>\n      Free document hosting provided by <a href=\"http://www.readthedocs.org\">Read the Docs</a>.\n\n    </div>\n  </div>\n\n\n\n  <script type=\"text/javascript\">\n      jQuery(function () {\n          SphinxRtdTheme.Navigation.enable(true);\n      });\n  </script>\n\n  \n   \n\n</body>\n</html>","oembed":false,"readabilityObject":{"title":"Memento API — pywb 2.0 documentation","content":"<div id=\"readability-page-1\" class=\"page\">\n\n   \n  <div>\n    \n    <nav data-toggle=\"wy-nav-shift\">\n      \n    </nav>\n\n    <section data-toggle=\"wy-nav-shift\">\n\n      \n      <nav aria-label=\"top navigation\">\n        \n          <i data-toggle=\"wy-nav-top\"></i>\n          <a href=\"../index.html\">pywb</a>\n        \n      </nav>\n\n\n      <div id=\"memento-api\" itemprop=\"articleBody\" role=\"main\" itemscope=\"itemscope\" itemtype=\"http://schema.org/Article\">\n\n<p>pywb supports the Memento Protocol as specified in <a href=\"https://tools.ietf.org/html/rfc7089\">RFC 7089</a> and provides API endpoints\nfor Memento TimeMaps and TimeGates per collection.</p>\n<p>Memento support is enabled by default and can be controlled via the <code><span>enable_memento:</span> <span>true|false</span></code> setting in the <code><span>config.yaml</span></code></p>\n<div id=\"timemap-api\">\n<h2>TimeMap API<a href=\"#timemap-api\" title=\"Permalink to this headline\">¶</a></h2>\n<p>The timemap API is available at <code><span>/&lt;coll&gt;/timemap/&lt;type&gt;/&lt;url&gt;</span></code> for any pywb collection <code><span>&lt;coll&gt;</span></code> and <code><span>&lt;url&gt;</span></code> in the collection.</p>\n<p>The timemap (URI-T) can be provided in several output formats, as specified by the <code><span>&lt;type&gt;</span></code> param:</p>\n<ul>\n<li><code><span>link</span></code> – returns an <code><span>application/link-format</span></code> as required by the <a href=\"https://tools.ietf.org/html/rfc7089#section-5\">Memento spec</a></li>\n<li><code><span>cdxj</span></code> – returns a timemap in the native CDXJ format.</li>\n<li><code><span>json</span></code> – returns the timemap as newline-delimited JSON lines (NDJSON) format.</li>\n</ul>\n<p>Although not required by the Memento spec, the Link output produced by timemap also includes the extra <code><span>collection=</span></code> field, specifying\nthe collection of each url. This is especially useful when accessing the timemap for the special <a href=\"configuring.html#auto-all\"><span>Auto “All” Aggregate Collection</span></a> to view a timemap across\nmultiple collections in a single response.</p>\n<p>The Timemap API is implemented as a subset of the <a href=\"cdxserver_api.html#cdx-server-api\"><span>CDXJ Server API</span></a> and should produce the same result as the equivalent CDX server query.</p>\n<p>For example, the timemap query:\n<code><span>http://localhost:8080/pywb/timemap/link/http://example.com/</span></code> is equivalent to the CDX server query:\n<code><span>http://localhost:8080/pywb/cdx?url=http://example.com/&amp;output=link</span></code></p>\n</div>\n<div id=\"timegate-api\">\n<h2>TimeGate API<a href=\"#timegate-api\" title=\"Permalink to this headline\">¶</a></h2>\n<p>The TimeGate API for any pywb collection is <code><span>/&lt;coll&gt;/&lt;url&gt;</span></code>, eg. <code><span>/my-coll/http://example.com/</span></code></p>\n<p>The timegate can either be a non-redirecting timegate (URI-M, 200-style negotiation) and return a URI-M response, or a redirecting timegate  (302-style negotiation) and redirect to a URI-M.</p>\n<div id=\"non-redirecting-timegate-memento-pattern-2-2\">\n<h3>Non-Redirecting TimeGate (Memento Pattern 2.2)<a href=\"#non-redirecting-timegate-memento-pattern-2-2\" title=\"Permalink to this headline\">¶</a></h3>\n<p>This behavior is consistent with <a href=\"https://tools.ietf.org/html/rfc7089#section-4.2.2\">Memento Pattern 2.2</a> and is the default behavior.</p>\n<p>To avoid an extra redirect, the TimeGate returns the requested memento directly (200-style negotiation) without redirecting to its canonical, timestamped url.\nThe ‘canonical’ URI-M is included in the <code><span>Content-Location</span></code> header and should be used to reference the memento in the future.</p>\n<p>(For HTML Mementos, the rewriting system also injects the url and timestamp into the page so that it can be displayed to the user). This behavior optimizes network traffic by avoiding unneeded redirects.</p>\n</div>\n<div id=\"redirecting-timegate-memento-pattern-2-3\">\n<h3>Redirecting TimeGate (Memento Pattern 2.3)<a href=\"#redirecting-timegate-memento-pattern-2-3\" title=\"Permalink to this headline\">¶</a></h3>\n<p>This behavior is consistent with <a href=\"https://tools.ietf.org/html/rfc7089#section-4.2.3\">Memento Pattern 2.3</a></p>\n<p>To enable this behavior, add <code><span>redirect_to_exact:</span> <span>true</span></code> to the config.</p>\n<p>In this mode, the TimeGate always issues a 302 to redirect a request to the “canonical” URI-M memento. The <code><span>Location</span></code> header is always present\nwith the redirect.</p>\n<p>As this approach always includes a redirect, use of this system is discouraged when the intent is to render mementos. However, this approach is useful when the goal is to determine the URI-M and to provide backwards compatibility.</p>\n</div>\n<div id=\"proxy-mode-memento-api\">\n<h3>Proxy Mode Memento API<a href=\"#proxy-mode-memento-api\" title=\"Permalink to this headline\">¶</a></h3>\n<p>When running in <a href=\"configuring.html#https-proxy\"><span>HTTP/S Proxy Mode</span></a>, pywb behaves roughly in accordance with <a href=\"https://tools.ietf.org/html/rfc7089#section-4.1.3\">Memento Pattern 1.3</a></p>\n<p>Every URI in proxy mode is also a TimeGate, and the <code><span>Accept-Datetime</span></code> header can be used to specify which timestamp to use in proxy mode.\nThe <code><span>Accept-Datetime</span></code> header overrides any other timestamp setting in proxy mode.</p>\n<p>The main distinction from the standard is that the URI-R, the original resource, is not available in proxy mode. (It is simply the URL loaded without the proxy,\nwhich is not possible to specify via the URL alone).</p>\n</div>\n</div>\n\n</div>\n\n    </section>\n\n  </div>\n  \n\n  <div data-toggle=\"rst-versions\" role=\"note\" aria-label=\"versions\">\n    <p><span data-toggle=\"rst-current-version\">\n      <span> Read the Docs</span>\n      v: localization\n      <span></span>\n    </span></p>\n  </div>\n\n\n\n  \n\n  \n   \n\n\n</div>","textContent":"\n\n   \n  \n    \n    \n      \n    \n\n    \n\n      \n      \n        \n          \n          pywb\n        \n      \n\n\n      \n\npywb supports the Memento Protocol as specified in RFC 7089 and provides API endpoints\nfor Memento TimeMaps and TimeGates per collection.\nMemento support is enabled by default and can be controlled via the enable_memento: true|false setting in the config.yaml\n\nTimeMap API¶\nThe timemap API is available at /<coll>/timemap/<type>/<url> for any pywb collection <coll> and <url> in the collection.\nThe timemap (URI-T) can be provided in several output formats, as specified by the <type> param:\n\nlink – returns an application/link-format as required by the Memento spec\ncdxj – returns a timemap in the native CDXJ format.\njson – returns the timemap as newline-delimited JSON lines (NDJSON) format.\n\nAlthough not required by the Memento spec, the Link output produced by timemap also includes the extra collection= field, specifying\nthe collection of each url. This is especially useful when accessing the timemap for the special Auto “All” Aggregate Collection to view a timemap across\nmultiple collections in a single response.\nThe Timemap API is implemented as a subset of the CDXJ Server API and should produce the same result as the equivalent CDX server query.\nFor example, the timemap query:\nhttp://localhost:8080/pywb/timemap/link/http://example.com/ is equivalent to the CDX server query:\nhttp://localhost:8080/pywb/cdx?url=http://example.com/&output=link\n\n\nTimeGate API¶\nThe TimeGate API for any pywb collection is /<coll>/<url>, eg. /my-coll/http://example.com/\nThe timegate can either be a non-redirecting timegate (URI-M, 200-style negotiation) and return a URI-M response, or a redirecting timegate  (302-style negotiation) and redirect to a URI-M.\n\nNon-Redirecting TimeGate (Memento Pattern 2.2)¶\nThis behavior is consistent with Memento Pattern 2.2 and is the default behavior.\nTo avoid an extra redirect, the TimeGate returns the requested memento directly (200-style negotiation) without redirecting to its canonical, timestamped url.\nThe ‘canonical’ URI-M is included in the Content-Location header and should be used to reference the memento in the future.\n(For HTML Mementos, the rewriting system also injects the url and timestamp into the page so that it can be displayed to the user). This behavior optimizes network traffic by avoiding unneeded redirects.\n\n\nRedirecting TimeGate (Memento Pattern 2.3)¶\nThis behavior is consistent with Memento Pattern 2.3\nTo enable this behavior, add redirect_to_exact: true to the config.\nIn this mode, the TimeGate always issues a 302 to redirect a request to the “canonical” URI-M memento. The Location header is always present\nwith the redirect.\nAs this approach always includes a redirect, use of this system is discouraged when the intent is to render mementos. However, this approach is useful when the goal is to determine the URI-M and to provide backwards compatibility.\n\n\nProxy Mode Memento API¶\nWhen running in HTTP/S Proxy Mode, pywb behaves roughly in accordance with Memento Pattern 1.3\nEvery URI in proxy mode is also a TimeGate, and the Accept-Datetime header can be used to specify which timestamp to use in proxy mode.\nThe Accept-Datetime header overrides any other timestamp setting in proxy mode.\nThe main distinction from the standard is that the URI-R, the original resource, is not available in proxy mode. (It is simply the URL loaded without the proxy,\nwhich is not possible to specify via the URL alone).\n\n\n\n\n\n    \n\n  \n  \n\n  \n    \n       Read the Docs\n      v: localization\n      \n    \n  \n\n\n\n  \n\n  \n   \n\n\n","length":3599,"excerpt":"pywb supports the Memento Protocol as specified in RFC 7089 and provides API endpoints\nfor Memento TimeMaps and TimeGates per collection.","byline":null,"dir":null,"siteName":null,"lang":"en"},"finalizedMeta":{"title":"Memento API — pywb 2.0 documentation","description":"pywb supports the Memento Protocol as specified in RFC 7089 and provides API endpoints\nfor Memento TimeMaps and TimeGates per collection.","author":false,"creator":"","publisher":false,"date":"2022-03-09T18:43:57.193Z","topics":[]},"jsonLd":{"@type":false,"headline":false,"description":false,"image":[],"mainEntityOfPage":{"@type":false,"@id":false},"datePublished":false,"dateModified":false,"isAccessibleForFree":false,"isPartOf":{"@type":[],"name":false,"productID":false},"discussionUrl":false,"license":false,"author":{"@type":false,"name":false,"description":false,"sameAs":false,"image":{"@type":false,"url":false},"givenName":false,"familyName":false,"alternateName":false,"publishingPrinciples":false},"publisher":{"@type":false,"name":false,"description":false,"sameAs":false,"logo":{"@type":false,"url":false},"publishingPrinciples":false},"editor":{"@type":false,"name":false,"description":false,"sameAs":false,"image":{"@type":false,"url":false},"givenName":false,"familyName":false,"alternateName":false,"publishingPrinciples":false}},"twitterObj":false,"status":200,"metadata":{"author":false,"title":"Memento API — pywb 2.0 documentation","description":false,"canonical":"https://pywb.readthedocs.io/en/localization/manual/memento.html","keywords":[],"image":false,"firstParagraph":"pywb supports the Memento Protocol as specified in RFC 7089 and provides API endpoints\nfor Memento TimeMaps and TimeGates per collection."},"dublinCore":{},"opengraph":{"title":false,"description":false,"url":false,"site_name":false,"locale":false,"type":false,"typeObject":{"published_time":false,"modified_time":false,"author":false,"publisher":false,"section":false,"tag":[]},"image":false},"twitter":{"site":false,"description":false,"card":false,"creator":false,"title":false,"image":false},"archivedData":{"link":false,"wayback":false}}}