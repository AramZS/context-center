---js
{
    eleventyComputed: {
        applyThis: {
            timelineCheck: function(siteContext){
                if (siteContext){
                    console.log(siteContext.timeline, "Global check")
                }
            },
        },
        title: function(siteContext){
            if (siteContext?.timeline)
                return siteContext.timeline.title

            return '';
        },
        description: function(siteContext){
            if (siteContext?.timeline)
                return siteContext.timeline.description

            return '';
        },
        tags: function(siteContext){
            if (siteContext?.timeline)
                return siteContext.timeline.tags

            return [];
        },
        categories: function(siteContext){
            if (siteContext?.timeline)
                return siteContext.timeline.categories

            return '';
        },
        filters: function(siteContext){
            if (siteContext?.timeline)
                return siteContext.timeline.filters

            return [];
        },
        date: function(siteContext){
            if (siteContext?.timeline)
                return siteContext.timeline.date

            return "Last Modified";
        },
        header: function(siteContext){
            if (siteContext?.timeline)
                return siteContext.timeline.header

            return [];
        },
        color: function(siteContext){
            if (siteContext?.timeline)
                return siteContext.timeline.color

            return 'grey';
        },
        shortdate: function(siteContext){
            if (siteContext?.timeline)
                return siteContext.timeline.shortdate

            return false;
        },
    }
}
---
<!DOCTYPE html>
<html lang="en" class="no-js">
<head>

<meta charset="utf-8" />
<title>{{- title -}}</title>
{% if description %}
<meta name="description" content="{{ description }}" />
{% endif %}
{% if author %}
<meta name="author" content="{{ author }}" />
{% endif %}
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link
  href="https://fonts.googleapis.com/css?family=Roboto+Slab|Hind+Vadodara:400,600"
  rel="stylesheet"
  type="text/css"
/>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css"
  integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>
<link rel="stylesheet" href="{{timelinesConfig.cssPath}}/normalize.css" />
<link rel="stylesheet" href="{{timelinesConfig.cssPath}}/main.css" />
<link rel="stylesheet" href="{{timelinesConfig.domainName}}/{{timelinesConfig.customCSS}}" />
<link rel="icon" type="image/png" href="img/favicon.png" />
<meta property="og:title" content="{{- title -}}" />
<meta property="og:type" content="article" />
<meta property="og:image" content="img/og-image.jpg" />

</head>
<body>
    {% if header  %}
    <header class="page-header">
        <h1>{{ title }}</h1>
        <p>{{ header }}</p>
    </header>
    {% endif %}
    <section>
            <!--
        {{ eleventyComputed | console }}
     -->
        <div class="timeline-filter-wrapper">
            <header class="timeline-filter">
                <ul>
                    <li>
                        <input type="checkbox" name="filter-shortcut" id="all" checked /> <label for="all">All</label>
                    </li>
                    {% for filter in filters %}
                        <li>
                            <input type="checkbox" name="filter" id="{{ filter }}" checked /> <label for="{{ filter }}">
                                {%- sentenceCase filter -%}
                            </label>
                        </li>
                    {% endfor %}
                    </ul>
                </header>
            </div>
            <article class="timeline" data-timeline="{{timelineSlug}}">
            {% for entry in collections[timelineSlug] %}
                <div class="timeline-entry" data-category='{% for item in entry.data.categories %}{{ item }} {% endfor %}' aria-hidden="false">
                    <!-- {{ entry | console }} -->
                    <div class="timeline-icon {{- entry.data.color or "grey" }}">
                        {% if entry.data.faicon %}
                            <i class="fas fa-{{- entry.data.faicon }}" aria-hidden="true"></i>
                        {% endif %}
                    </div>
                    <div class="timeline-description">
                        <span class="timestamp">
                            <time datetime="{{- entry.data.date }}">
                                {%- humanizeDate entry.data.date %}
                            </time>
                        </span>
                        <h2><a id="{{- entry.data.title | slugify -}}" href="#{{- entry.data.title | slugify -}}"><i class="fas fa-link"></i></a>{{- entry.data.title }}</h2>
                        {% if entry.data.image %}
                            <div class="captioned-image image-right">
                                {% if entry.data.image.link %}<a href="{{- entry.data.image.link -}}">{% endif %}
                                <img src="{{- entry.data.image.src -}}" alt="{{- entry.data.image.src -}}" />
                                {% if entry.data.image.link %}</a>{% endif %}
                                {% if entry.data.image.caption %}
                                    <span class="caption">{{- entry.data.image.caption -}}</span>
                                {% endif %}
                            </div>
                        {% endif %}
                        {%- if entry.data.isBasedOn and entry.data.customLink %}
                            <a target="_blank" href="{{entry.data.customLink}}">Read the article</a>
                        {%- endif %}
                        {% if entry.data and entry.data.content %}

                        {{- entry.data.content or "" }}

                        {% endif %}
                        {% if entry.data.links %}
                            <ul>
                                {% for link in entry.data.links %}
                                    <li>
                                        <a href="{{- link.href -}}" target="_blank">{{- link.linkText }}</a>{{- link.extraText }}
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
            </article>
        </section>
        {% if footer %}
        <footer class="page-footer">
            {{- footer }}
        </footer>
        {% endif %}

        <script src="{{timelinesConfig.jsPath}}/site-js.js"></script>
    </body>
</html>
